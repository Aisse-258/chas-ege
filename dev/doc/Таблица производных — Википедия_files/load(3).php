mw.loader.implement("ext.visualEditor.viewPageTarget.init",function(){(function(){var conf,uri,pageExists,viewUri,veEditUri,isViewPage,init,support,getTargetDeferred;function getTarget(){var loadTargetDeferred;if(!getTargetDeferred){getTargetDeferred=$.Deferred();loadTargetDeferred=$.Deferred().done(function(){var target=new ve.init.mw.ViewPageTarget();ve.init.mw.targets.push(target);ve.init.mw.ViewPageTarget.prototype.setupSectionEditLinks=init.setupSectionEditLinks;getTargetDeferred.resolve(target);}).fail(getTargetDeferred.reject);mw.loader.using('ext.visualEditor.viewPageTarget',loadTargetDeferred.resolve,loadTargetDeferred.reject);}return getTargetDeferred.promise();}conf=mw.config.get('wgVisualEditorConfig');uri=new mw.Uri();pageExists=!!mw.config.get('wgArticleId');viewUri=new mw.Uri(mw.util.wikiGetlink(mw.config.get('wgRelevantPageName')));veEditUri=viewUri.clone().extend({'veaction':'edit'});isViewPage=(mw.config.get('wgAction')==='view'&&!('diff'in uri.query));support={es5:(
Array.isArray&&Array.prototype.filter&&Array.prototype.indexOf&&Array.prototype.map&&Date.prototype.toJSON&&Function.prototype.bind&&Object.create&&Object.keys&&String.prototype.trim&&window.JSON&&JSON.parse&&JSON.stringify),contentEditable:'contentEditable'in document.createElement('div')};init={support:support,blacklist:{'msie':[['<=',10]],'android':[['<',3]],'firefox':[['<=',14]],'opera':null,'blackberry':null},skinSetup:function(){init.setupTabLayout();init.setupSectionEditLinks();},setupTabLayout:function(){var caVeEdit,caVeEditSource,action=pageExists?'edit':'create',pTabsId=$('#p-views').length?'p-views':'p-cactions',$caSource=$('#ca-viewsource'),$caEdit=$('#ca-edit'),$caEditLink=$caEdit.find('a'),reverseTabOrder=$('body').hasClass('rtl')&&pTabsId==='p-views',caVeEditNextnode=reverseTabOrder?$caEdit.get(0):$caEdit.next().get(0);if(!$caEdit.length||$caSource.length){return;}if(conf.tabLayout==='add'){caVeEdit=mw.util.addPortletLink(pTabsId,veEditUri,mw.msg('visualeditor-ca-ve-'+
action),'ca-ve-edit',mw.msg('tooltip-ca-ve-edit'),mw.msg('accesskey-ca-ve-edit'),caVeEditNextnode);}else{caVeEditSource=mw.util.addPortletLink(pTabsId,$caEditLink.attr('href'),mw.msg('visualeditor-ca-'+action+'source'),'ca-editsource',mw.msg('tooltip-ca-'+action+'source'),mw.msg('accesskey-ca-editsource'),caVeEditNextnode);$(caVeEditSource).addClass($caEdit.attr('class'));$caEdit.remove();caVeEdit=mw.util.addPortletLink(pTabsId,veEditUri,$caEditLink.text(),$caEdit.attr('id'),$caEditLink.attr('title'),mw.msg('accesskey-ca-ve-edit'),reverseTabOrder?caVeEditSource.nextSibling:caVeEditSource);}if(isViewPage){$(caVeEdit).click(init.onEditTabClick);}},setupSectionEditLinks:function(){var $editsections=$('#mw-content-text .mw-editsection');$editsections.css('direction',$('body').css('direction'));$editsections.each(function(){var $closingBracket,$expandedOnly,$hiddenBracket,$outerClosingBracket,expandTimeout,shrinkTimeout,$editsection=$(this),$heading=$editsection.closest(
'h1, h2, h3, h4, h5, h6'),$editLink=$editsection.find('a').eq(0),$editSourceLink=$editLink.clone(),$links=$editLink.add($editSourceLink),$divider=$('<span>'),dividerText=$.trim(mw.msg('pipe-separator')),$brackets=$([this.firstChild,this.lastChild]);function expandSoon(){clearTimeout(shrinkTimeout);expandTimeout=setTimeout(expand,100);}function expand(){clearTimeout(shrinkTimeout);$closingBracket.css('visibility','hidden');$expandedOnly.css('visibility','visible');$heading.addClass('mw-editsection-expanded');}function shrinkSoon(){clearTimeout(expandTimeout);shrinkTimeout=setTimeout(shrink,100);}function shrink(){clearTimeout(expandTimeout);if(!$links.is(':focus')){$closingBracket.css('visibility','visible');$expandedOnly.css('visibility','hidden');$heading.removeClass('mw-editsection-expanded');}}if(!$brackets.hasClass('mw-editsection-bracket')){$brackets=$brackets.wrap($('<span>').addClass('mw-editsection-bracket')).parent();}$closingBracket=$brackets.last();$outerClosingBracket=
$closingBracket.clone();$expandedOnly=$divider.add($editSourceLink).add($outerClosingBracket).css('visibility','hidden');$hiddenBracket=$closingBracket.clone().css('visibility','hidden');$heading.on({'mouseenter':expandSoon,'mouseleave':shrinkSoon});$links.on({'focus':expand,'blur':shrinkSoon});if(isViewPage){$editLink.click(init.onEditSectionLinkClick);}$editSourceLink.addClass('mw-editsection-link-secondary').text(mw.msg('visualeditor-ca-editsource-section'));$divider.addClass('mw-editsection-divider').text(dividerText);$editLink.attr('href',function(i,val){return new mw.Uri(veEditUri).extend({'vesection':new mw.Uri(val).query.section});}).addClass('mw-editsection-link-primary');$closingBracket.after($divider,$hiddenBracket,$editSourceLink,$outerClosingBracket);});},onEditTabClick:function(e){if((e.which&&e.which!==1)||e.shiftKey||e.altKey||e.ctrlKey||e.metaKey){return;}e.preventDefault();getTarget().done(function(target){target.logEvent('Edit',{action:'edit-link-click'});target.
activate();});},onEditSectionLinkClick:function(e){if((e.which&&e.which!==1)||e.shiftKey||e.altKey||e.ctrlKey||e.metaKey){return;}e.preventDefault();getTarget().done(function(target){target.logEvent('Edit',{action:'section-edit-link-click'});target.saveEditSection($(e.target).closest('h1, h2, h3, h4, h5, h6').get(0));target.activate();});}};support.visualEditor=support.es5&&support.contentEditable&&(('vewhitelist'in uri.query)||!$.client.test(init.blacklist,null,true));init.isAvailable=(support.visualEditor&&!(conf.disableForAnons&&mw.user.isAnon())&&!mw.config.get('wgIsRedirect',!!uri.query.redirect)&&mw.user.options.get('visualeditor-enable')&&!mw.user.options.get('visualeditor-betatempdisable')&&$.inArray(mw.config.get('skin'),conf.skins)!==-1&&$.inArray(new mw.Title(mw.config.get('wgRelevantPageName')).getNamespaceId(),conf.namespaces)!==-1&&mw.config.get('wgPageContentModel')==='wikitext');mw.libs.ve=init;if(!init.isAvailable){return;}$(function(){if(isViewPage){if(uri.query.
veaction==='edit'){getTarget().done(function(target){target.activate();});}}init.skinSetup();});}());;},{"css":[
".mw-editsection{white-space:nowrap;padding-right:0.25em; unicode-bidi:-moz-isolate;unicode-bidi:-webkit-isolate;unicode-bidi:isolate}.mw-editsection-divider{color:#ccc}.mw-editsection-bracket{-webkit-transition:color 100ms ease-out,margin 100ms ease-out;-moz-transition:color 100ms ease-out,margin 100ms ease-out;-ms-transition:color 100ms ease-out,margin 100ms ease-out;-o-transition:color 100ms ease-out,margin 100ms ease-out;transition:color 100ms ease-out,margin 100ms ease-out} .mw-content-ltr .mw-editsection-expanded .mw-editsection-bracket:first-of-type,.mw-content-rtl .mw-editsection-expanded .mw-editsection-bracket:not(:first-of-type){margin-left:-0.25em;margin-right:0.25em;color:#ccc} .mw-content-rtl .mw-editsection-expanded .mw-editsection-bracket:first-of-type,.mw-content-ltr .mw-editsection-expanded .mw-editsection-bracket:not(:first-of-type){margin-right:-0.25em;margin-left:0.25em;color:#ccc}\n/* cache key: ruwiki:resourceloader:filter:minify-css:7:3248e8340c4f1645af3dff5cd4ed23e8 */"
]},{"accesskey-ca-editsource":"e","accesskey-ca-ve-edit":"v","pipe-separator":" | ","tooltip-ca-createsource":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0435 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u043a\u043e\u0434\u0430","tooltip-ca-editsource":"\u041f\u0440\u0430\u0432\u0438\u0442\u044c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u043a\u043e\u0434 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b","tooltip-ca-ve-edit":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0432\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0430","visualeditor-ca-createsource":
"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u043a \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u043a\u043e\u0434","visualeditor-ca-editsource":"\u041f\u0440\u0430\u0432\u0438\u0442\u044c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442","visualeditor-ca-editsource-section":"\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442","visualeditor-ca-ve-create":"\u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440","visualeditor-ca-ve-edit":"\u0412\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440"});
/* cache key: ruwiki:resourceloader:filter:minify-js:7:9e38cfe183c3f8df0ede335847a1e783 */