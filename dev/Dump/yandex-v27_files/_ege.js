(function(a){if(!a){a=window.Lego={}}a.messages=a.messages||{};a.message=function(c,b){return a.params.locale=="ru"?b:(a.messages[c]||b)}})(window.Lego);(function(a){a=a||{};a.oframebustMatchDomain=function(g,h){g=Object.prototype.toString.call(g)==="[object Array]"?g:(function(){var d=[];for(var e in g){g.hasOwnProperty(e)&&d.push(e)}return d}());for(var c=0,b=g.length;c<b;c++){var k=g[c];if(typeof(k)=="string"){if(/(\?|\*)/.test(k)){var f=k.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\?/g,".{1}");if((new RegExp("^"+f+"$")).test(h)){return true}}else{if(h==k){return true}}}else{try{if(k.test(h)){return true}}catch(j){}}}}})(window.Lego);(function(a){if(!a){a=window.Lego={}}a.oframebust=function(c){if(location==top.location){return}var d=(location.search.match(/[&?]oframebust=([^&;]+)/)||[])[1];if(!d){top.location=location}if(a.oframebustMatchDomain(c,d)){var b=document.createElement("iframe");b.style.position="absolute";b.style.left="-999px";b.style.width="1px";b.src="//"+d+"/oframebust.html?"+encodeURIComponent(location.href);(function(){if(document.body&&document.body.firstChild){document.body.insertBefore(b,document.body.firstChild)}else{setTimeout(arguments.callee,0)}})();return}top.location=location}})(window.Lego);(function(e){var b=(function(){_}).toString().indexOf("_")>-1,a=e.browser.msie,c=a?["toString","valueOf"]:null,f=function(){};function d(h,g,i){var k=false;if(a){var j=[];e.each(c,function(){i.hasOwnProperty(this)&&(k=true)&&j.push({name:this,val:i[this]})});if(k){e.each(i,function(l){j.push({name:l,val:this})});i=j}}e.each(i,function(m,n){if(k){m=n.name;n=n.val}if(e.isFunction(n)&&(!b||n.toString().indexOf(".__base")>-1)){var l=h[m]||function(){};g[m]=function(){var p=this.__base;this.__base=l;var o=n.apply(this,arguments);this.__base=p;return o}}else{g[m]=n}})}e.inherit=function(){var h=e.isFunction(arguments[0]),n=h?arguments[0]:f,j=arguments[h?1:0]||{},l=arguments[h?2:1],g=j.__constructor||(h&&n.prototype.__constructor)?function(){this.__constructor.apply(this,arguments)}:function(){};if(!h){g.prototype=j;g.prototype.__self=g.prototype.constructor=g;return e.extend(g,l)}e.extend(g,n);var k=function(){},i=k.prototype=n.prototype,m=g.prototype=new k();m.__self=m.constructor=g;d(i,m,j);l&&d(n,g,l);return g};e.inheritSelf=function(j,h,i){var g=j.prototype;d(g,g,h);i&&d(j,j,i);return j}})(jQuery);(function(c){var a=0,d="__"+(+new Date),b=function(){return"uniq"+ ++a};c.identify=function(g,f){if(!g){return b()}var e="uniqueID" in g?"uniqueID":d;return f||e in g?g[e]:g[e]=b()}})(jQuery);(function(a){a.isEmptyObject||(a.isEmptyObject=function(c){for(var b in c){return false}return true})})(jQuery);(function(d){var a="__"+ +new Date+"storage",c=function(f,e){return d.identify(f)+(e?d.identify(e):"")},b={buildEventName:function(f){return f},on:function(o,j,p,s,m){if(typeof o=="string"){if(d.isFunction(j)){s=p;p=j;j=undefined}var f=c(p,s),l=this[a]||(this[a]={}),g=o.split(" "),h=0,q;while(o=g[h++]){o=this.buildEventName(o);q=l[o]||(l[o]={ids:{},list:{}});if(!(f in q.ids)){var n=q.list,r={fn:p,data:j,ctx:s||this,special:m};if(n.last){n.last.next=r;r.prev=n.last}else{n.first=r}q.ids[f]=n.last=r}}}else{var k=this;d.each(o,function(t,i){k.on(t,i,j,m)})}return this},onFirst:function(i,h,g,f){return this.on(i,h,g,f,{one:true})},un:function(p,q,t){if(typeof p=="string"||typeof p=="undefined"){var n=this[a];if(n){if(p){var h=p.split(" "),k=0,r;while(p=h[k++]){p=this.buildEventName(p);if(r=n[p]){if(q){var g=c(q,t),f=r.ids;if(g in f){var o=r.list,s=f[g],j=s.prev,l=s.next;if(j){j.next=l}else{if(s===o.first){o.first=l}}if(l){l.prev=j}else{if(s===o.last){o.last=j}}delete f[g]}}else{delete this[a][p]}}}}else{delete this[a]}}}else{var m=this;d.each(p,function(u,i){m.un(u,i,t)})}return this},trigger:function(k,i){var l=this[a],j;typeof k==="string"?k=d.Event(this.buildEventName(j=k)):k.type=this.buildEventName(j=k.type);if(l&&(l=l[k.type])){var h=l.list.first,f,g;while(h){k.data=h.data;f=h.fn.call(h.ctx,k,i);if(typeof f!=="undefined"){k.result=f;if(f===false){k.preventDefault();k.stopPropagation()}}g=h.next;h.special&&h.special.one&&this.un(j,h.fn,h.ctx);h=g}}return this}};d.observable=d.inherit(b,b)})(jQuery);(function(e,g){var d=[],f={},a={};function c(j,i,h){return(j?"__elem_"+j:"")+"__mod"+(i?"_"+i:"")+(h?"_"+h:"")}function b(i,h,j){e.isFunction(i)?(h[c(j,"*","*")]=i):e.each(i,function(l,k){e.isFunction(k)?(h[c(j,l,"*")]=k):e.each(k,function(m,n){h[c(j,l,m)]=n})})}this.BEM=e.inherit(e.observable,{__constructor:function(i,h){var j=this;j._modCache={};j._processingMods={};j.params=e.extend(j.getDefaultParams(),i);j._uniqId=j.params.uniqId||e.identify(j);a[j._uniqId]=j;h!==false?j._init():j.afterCurrentEvent(j._init)},_init:function(){var h=this;if("_uniqId" in h&&!h.hasMod("js","inited")){h.setMod("js","inited").trigger("init")}return h},changeThis:function(i,h){var j=this;return function(){return i.apply(h||j,arguments)}},afterCurrentEvent:function(i,h){this.__self.afterCurrentEvent(this.changeThis(i,h))},bind:function(j,k,i,h){return this.on(j,k,i,h)},bindOne:function(j,k,i,h){return this.onFirst(j,k,i,h)},unbind:function(i,h){return this.un(i,h)},trigger:function(i,h){this.__base(i=this.buildEvent(i),h).__self.trigger(i,h);return this},buildEvent:function(h){typeof h=="string"&&(h=e.Event(h));h.block=this;return h},hasMod:function(i,j,h){if(arguments.length==2){h=j;j=i;i=g}return this.getMod(i,j)===h},getMod:function(j,k){var h=typeof j;if(h==="string"||h==="undefined"){k=j||k;var i=this._modCache;return k in i?i[k]:i[k]=this._extractModVal(k)}return this._getElemMod(k,j)},_getElemMod:function(j,h,i){return this._extractModVal(j,h,i)},getMods:function(k){var i=k&&typeof k!="string",l=this,h=[].slice.call(arguments,i?1:0),j=l._extractMods(h,i?k:g);if(!i){h.length?e.each(h,function(n,m){l._modCache[m]=j[m]}):l._modCache=j}return j},setMod:function(k,o,p){if(typeof p=="undefined"){p=o;o=k;k=g}var l=this;if(!k||k[0]){var m=(k&&k[0]?e.identify(k[0]):"")+"_"+o;if(this._processingMods[m]){return l}var j,i=k?l._getElemMod(o,k,j=l.__self._extractElemNameFrom(k)):l.getMod(o);if(i===p){return l}this._processingMods[m]=true;var h=true,n=[o,p,i];k&&n.unshift(k);e.each([["*","*"],[o,"*"],[o,p]],function(){h=l._callModFn(j,this[0],this[1],n)!==false&&h});!k&&h&&(l._modCache[o]=p);h&&l._afterSetMod(o,p,k,j);delete this._processingMods[m]}return l},_afterSetMod:function(j,h,i){},toggleMod:function(j,k,i,m,l){if(typeof j=="string"){l=m;m=i;i=k;k=j;j=g}if(typeof m=="undefined"){m=""}else{if(typeof m=="boolean"){l=m;m=""}}var h=this.getMod(j,k);(h==i||h==m)&&this.setMod(j,k,typeof l==="boolean"?(l?i:m):this.hasMod(j,k,i)?m:i);return this},delMod:function(h,i){if(!i){i=h;h=g}return this.setMod(h,i,"")},_callModFn:function(k,j,h,i){var l=c(k,j,h);return this[l]?this[l].apply(this,i):g},_extractModVal:function(i,h){return""},_extractMods:function(h,i){return{}},getDefaultParams:function(){return{}},del:function(i){var h=[].slice.call(arguments);typeof i=="string"&&h.unshift(this);this.__self.del.apply(this.__self,h);return this},destruct:function(){delete a[this.un()._uniqId];delete this._uniqId}},{_name:"i-bem",blocks:f,_uniqIdToBlock:a,getBlockByUniqId:function(h){return a[h]},decl:function(h,i,k){if(typeof h=="string"){h={block:h}}else{if(h.name){h.block=h.name}}if(i.onSetMod){b(i.onSetMod,i);delete i.onSetMod}if(i.onElemSetMod){e.each(i.onElemSetMod,function(n,m){b(m,i,n)});delete i.onElemSetMod}var j=f[h.baseBlock||h.block]||this;if(h.modName){e.each(i,function(m,n){e.isFunction(n)&&(i[m]=function(){var p;if(this.hasMod(h.modName,h.modVal)){p=n}else{var o=j.prototype[m];o&&o!==i[m]&&(p=this.__base)}return p?p.apply(this,arguments):g})})}var l;h.block==j._name?(l=e.inheritSelf(j,i,k))._processLive(true):(l=f[h.block]=e.inherit(j,i,k))._name=h.block;return l},_processLive:function(h){return false},create:function(h,i){return new f[h](i)},getName:function(){return this._name},_extractElemNameFrom:function(h){},afterCurrentEvent:function(i,h){d.push({fn:i,ctx:h})==1&&setTimeout(function(){var j,k=d.splice(0,d.length);while(j=k.shift()){j.fn.call(j.ctx||this)}},0)},changeThis:function(i,h){return function(){return i.apply(h||this,arguments)}},del:function(l){var k=typeof l=="string",j=k?0:1,h=arguments.length;k&&(l=this);while(j<h){delete l[arguments[j++]]}return this}})})(jQuery);(function(i,b,a){var g="_",c="__",d="[a-zA-Z0-9-]+";function e(l,j,k){k.push(g,l,g,j)}function f(l,m,j,k){k.push(l);j&&e(m,j,k)}function h(n,l,m,j,k){f(n,a,a,k);k.push(c,l);j&&e(m,j,k)}i.INTERNAL={NAME_PATTERN:d,MOD_DELIM:g,ELEM_DELIM:c,buildModPostfix:function(m,j,k){var l=k||[];e(m,j,l);return k?l:l.join("")},buildClass:function(p,n,o,j,k){var m=typeof o;if(m=="string"){if(typeof j!="string"){k=j;j=o;o=n;n=a}}else{if(m!="undefined"){k=o;o=a}else{if(n&&typeof n!="string"){k=n;n=a}}}if(!(n||o||k)){return p}var l=k||[];n?h(p,n,o,j,l):f(p,o,j,l);return k?l:l.join("")},buildClasses:function(n,m,l,j){var k=j||[];m?h(n,m,a,a,k):f(n,a,a,k);l&&b.each(l,function(p,o){if(o){k.push(" ");m?h(n,m,p,o,k):f(n,p,o,k)}});return j?k:k.join("")}}})(BEM,jQuery);(function(a){var b=a.event.special.leftclick={setup:function(){a(this).bind("click",b.handler)},teardown:function(){a(this).unbind("click",b.handler)},handler:function(c){if(!c.button){c.type="leftclick";a.event.handle.apply(this,arguments);c.type="click"}}}})(jQuery);(function(a,c){if(typeof JSON!="undefined"){return a.stringify=JSON.stringify}var b=Object.prototype.toString;a.stringify=function(h){if(h===null){return"null"}switch(b.call(h)){case"[object String]":return'"'+h.replace(/"/g,'\\"')+'"';case"[object Number]":case"[object Boolean]":return""+h;case"[object Array]":var g="[",f=0,d=h.length,j;while(f<d){j=a.stringify(h[f]);g+=(f++>0?",":"")+(typeof j=="undefined"?"null":j)}return g+"]";case"[object Object]":var g="{",f=0,j;for(var e in h){if(h.hasOwnProperty(e)){j=a.stringify(h[e]);typeof j!="undefined"&&(g+=(f++>0?",":"")+'"'+e+'":'+j)}}return g+"}";default:return c}}})(jQuery);(function(k,d,c){var g=k.INTERNAL,f=g.ELEM_DELIM,h={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},i=g.buildClasses,j={};function e(l,m,n){(l[m]||(l[m]=[])).unshift(n)}function b(l,m){return m.modName?function(n){(n._currBlock.mods||{})[m.modName]===m.modVal&&l(n)}:l}function a(m,l){var o=d.isArray(l),n;d.isArray(m)?o?n=m.concat(l):(n=m).push(l):o?(n=l).unshift(m):n=[m,l];return n}k.HTML={decl:function(n,m){typeof n=="string"&&(n={name:n});var l=j[n.name]||(j[n.name]={});m.onBlock&&e(l,"_block",b(m.onBlock,n));if(m.onElem){d.isFunction(m.onElem)?e(l,"_elem",b(m.onElem,n)):d.each(m.onElem,function(p,o){e(l,"_elem"+(p==="*"?"":f+p),b(o,n))})}},build:function(m){var l=new this.Ctx(m);l._buildAll();return l._flush()},Ctx:d.inherit({__constructor:function(l){this._buffer=[];this._params=l;this._tParams=null;this._tParamsChanges=null;this._currBlock=c},pos:function(){return this._params._pos},isFirst:function(){return this._params._pos===1},isLast:function(){var l=this._params;return l._pos===l._siblingsCount},params:function(l){var m=this;if(typeof l=="undefined"){return m._params}m._params=l;return m},param:function(l,o,m,q){var p=this,n=p._params;if(typeof o=="undefined"){return n[l]}if(m||!(l in n)){n[l]=o}else{if(q){n[l]=d.extend(o,n[l])}}return p},attrs:function(m,l){return this.param("attrs",m,l,true)},attr:function(m,o,n){var p=this;if(typeof o=="undefined"){return(p._params.attrs||{})[m]}var l=p._params.attrs;l?(n||!(m in l))&&(l[m]=o):(p._params.attrs={})[m]=o;return p},tag:function(m,l){return this.param("tag",m,l)},cls:function(m,l){return this.param("cls",m,l)},mods:function(m,l){return this.param("mods",m,l,true)},mod:function(l,o,n){var p=this;if(typeof o=="undefined"){return(p._params.mods||{})[l]}var m=p._params.mods;m?(n||!(l in m))&&(m[l]=o):(p._params.mods={})[l]=o;return p},js:function(l){return this.param("js",l)},content:function(m,l){return this.param("content",m,l)},wrapContent:function(l){var n=this,m=n._params;l.content=m.content;m.content=l;return n},beforeContent:function(l){var n=this,m=n._params;m.content=a(l,m.content);return n},afterContent:function(l){var n=this,m=n._params;m.content=a(m.content,l);return n},wrap:function(l){var n=this,m=n._params;l.block||(l._currBlock=n._currBlock);l.content=m._wrapper?m._wrapper:m;m._wrapper=l;return n},tParam:function(l,o){var p=this,n=p._tParams||(p._tParams={});if(typeof o=="undefined"){return n[l]}var m=p._tParamsChanges||(p._tParamsChanges={});l in m||(m[l]=n[l]);n[l]=o;return p},_buildAll:function(){var s=this,m=s._buffer,r=s._params,p=typeof r;if(p=="string"||p=="number"){m.push(r)}else{if(d.isArray(r)){var o=0,l=r.length,n,q;while(o<l){s._params=n=r[o++];q=typeof n;if(q=="string"||q=="number"){m.push(n)}else{if(n){n._pos=o;n._siblingsCount=l;s._buildByDecl()}}}}else{if(r){s._params._pos=s._params._siblingsCount=1;s._buildByDecl()}}}},_build:function(){var q=this,m=q._buffer,p=q._params,l=p.tag||"div",o,n=p.block||p.elem;p.js&&((o={})[p.block]=p.js===true?{}:p.js);m.push("<",l);if(n||p.cls){m.push(' class="');if(n){i(p.block||q._currBlock.block,p.elem,p.mods,m);p.mix&&d.each(p.mix,function(r,s){m.push(" ");i(s.block,s.elem,s.mods,m);s.js&&((o||(o={}))[s.block]=s.js===true?{}:s.js)})}p.cls&&m.push(n?" ":"",p.cls);o&&m.push(" i-bem");m.push('"')}o&&m.push(' onclick="return ',d.stringify(o).replace(/'/g,"\\'").replace(/"/g,"'"),'"');p.attrs&&d.each(p.attrs,function(r,s){s!==false&&m.push(" ",r,'="',typeof s!="undefined"&&s!==null?s.toString().replace(/"/g,"&quot;"):"",'"')});if(h[l]){m.push("/>")}else{m.push(">");if(typeof p.content!="undefined"){q._params=p.content;q._buildAll()}m.push("</",l,">")}},_flush:function(){var l=this._buffer.join("");delete this._buffer;return l},_buildByDecl:function(){var o=this,r=o._currBlock,l=o._params;l._currBlock&&(o._currBlock=l._currBlock);l.block&&(o._currBlock=l);if(!l._wrapper){if(l.block||l.elem){var q=j[o._currBlock.block];if(q){var s;if(l.elem){s=q["_elem"+f+l.elem];q._elem&&(s=(s?s.concat(q._elem):q._elem))}else{s=q._block}if(s){var m=0,p;while(p=s[m++]){p(o)}}}}if(l._wrapper){l._currBlock=o._currBlock;o._params=l._wrapper;return o._buildAll()}}var t=o._tParamsChanges;o._tParamsChanges=null;o._build();o._currBlock=r;if(t){var n=o._tParams;d.each(t,function(u,v){typeof v=="undefined"?delete n[u]:n[u]=v})}}})}})(BEM,jQuery);(function(i,e,h){var d=e(window),x=e(document),m={},z={},f={},p={},u=i.blocks,v=i._uniqIdToBlock,b=i.INTERNAL,k=b.NAME_PATTERN,o=b.MOD_DELIM,j=b.ELEM_DELIM,y=b.buildModPostfix,s=b.buildClass;function q(C,A){var B=C[0];e.each(r(B),function(D,F){c(F,B,D,A);var E=v[F.uniqId];E?E._addDomElem(C):a(D,C,F)})}function a(H,D,C,A,I){if(typeof C=="boolean"){I=A;A=C;C=h}var E=D[0];C=c(C||r(E)[H],E,H);var G=C.uniqId;if(v[G]){return v[G]._init()}m[G]=m[G]?m[G].add(D):D;var F=u[H]||t.decl(H,{},{live:true});if(!(F._liveInitable=!!F._processLive())||A){var B=new F(m[G],C,!!A);delete m[G];I&&I.apply(B,Array.prototype.slice.call(arguments,4));return B}}function c(F,C,B,A){(F||(F={})).uniqId||(F.uniqId=(F.id?B+"-id-"+F.id:e.identify())+(A||e.identify()));var E=e.identify(C),D=z[E]||(z[E]={});D[B]||(D[B]=F);return F}function w(B,A,D){var C=B.find(A);return D?C:C.add(B.filter(A))}function r(A){var B=e.identify(A);return z[B]||(z[B]=g(A))}function g(C){var B=C.onclick;if(!B&&C.tagName.toLowerCase()=="body"){var A=e(C).attr("onclick");A&&(B=Function(A))}return B?B():{}}function l(A){delete z[e.identify(A)]}function n(){return x[0][e.support.boxModel?"documentElement":"body"]}e.fn.bem=function(A,B){return a(A,this,B,true)};var t=i.DOM=i.decl("i-bem__dom",{__constructor:function(B,C,A){this.domElem=B;this._eventNameCache={};this._elemCache={};this._needSpecialUnbind=false;this.__base(C,A)},_addDomElem:function(A){this.domElem=this.domElem.add(A)},_removeDomElem:function(A){!(this.domElem=this.domElem.not(A))[0]&&this.destruct()},findBlocksInside:function(A,B){return this._doBlocksMethod(this._buildFindBlocksParams("find",A,B))},findBlockInside:function(A,B){return this._doBlocksMethod(this._buildFindBlocksParams("find",A,B,true))},findBlocksOutside:function(A,B){return this._doBlocksMethod(this._buildFindBlocksParams("parents",A,B))},findBlockOutside:function(A,B){return this._doBlocksMethod(this._buildFindBlocksParams("closest",A,B))[0]},findBlocksOn:function(A,B){return this._doBlocksMethod(this._buildFindBlocksParams("",A,B))},findBlockOn:function(A,B){return this._doBlocksMethod(this._buildFindBlocksParams("",A,B,true))},_buildFindBlocksParams:function(A,B,D,C){return{select:A,elem:D?B:h,block:D||B,onlyFirst:C}},doBlocksMethodInside:function(B,C,D,A){return this._doBlocksMethod(this._buildDoBlocksMethodParams("find",B,C,D,A))},doBlocksMethodOutside:function(B,C,D,A){return this._doBlocksMethod(this._buildDoBlocksMethodParams("closest",B,C,D,A))},doBlocksMethodOn:function(B,C,D,A){return this._doBlocksMethod(this._buildDoBlocksMethodParams("",B,C,D,A))},doBlocksMethod:function(B,C,A){return this._doBlocksMethod({blocks:B,method:C,args:A})},_buildDoBlocksMethodParams:function(A,D,E,F,C){var B=typeof F=="string";return{select:A,elem:B?D:h,block:B?E:D,method:B?F:E,args:B?C:F}},_doBlocksMethod:function(B){var E=this;if(B.blocks){return e.map(B.blocks,function(J){return E._doBlockMethod(J,B.method,B.args)})}var D=B.elem?(typeof B.elem=="string"?this.findElem(B.elem):B.elem):this.domElem,C=typeof B.block=="string",I=C?B.block:B.block.blockName,A="."+(C?s(I):s(I,B.block.modName,B.block.modVal))+(B.onlyFirst?":first":""),F=D.filter(A);B.select&&(F=F.add(D[B.select](A)));if(B.onlyFirst){return F[0]?this._doBlockMethod(a(I,F.eq(0),true),B.method,B.args):null}if(B.method){return e.map(F,function(J){return E._doBlockMethod(a(I,e(J),true),B.method,B.args)})}var H=[],G={};e.each(F,function(J,K){var L=a(I,e(K),true);if(!G[L._uniqId]){G[L._uniqId]=true;H.push(L)}});return H},_doBlockMethod:function(B,C,A){return C?B[C].apply(B,A||[]):B},bindToDomElem:function(B,C,A){var D=this;A?B.bind(D._buildEventName(C),function(E){(E.data||(E.data={})).domElem=e(this);return A.apply(D,arguments)}):e.each(C,function(F,E){D.bindToDomElem(B,F,E)});return D},bindToDoc:function(B,A){this._needSpecialUnbind=true;return this.bindToDomElem(x,B,A)},bindToWin:function(B,A){this._needSpecialUnbind=true;return this.bindToDomElem(d,B,A)},bindToBlock:function(B,A){return this.bindToDomElem(this.domElem,B,A)},bindToElem:function(C,B,A){return this.bindToDomElem(typeof C=="string"?this.findElem(C):C,B,A)},bindTo:function(C,B,A){if(!B||e.isFunction(B)){A=B;B=C;C=this.domElem}else{if(typeof C=="string"){C=this.elem(C)}}return this.bindToDomElem(C,B,A)},unbindFromDomElem:function(A,B){A.unbind(this._buildEventName(B));return this},unbindFromDoc:function(A){return this.unbindFromDomElem(x,A)},unbindFromWin:function(A){return this.unbindFromDomElem(d,A)},unbindFromBlock:function(A){return this.unbindFromDomElem(this.domElem,A)},unbindFromElem:function(B,A){return this.unbindFromDomElem(typeof B=="string"?this.findElem(B):B,A)},unbindFrom:function(B,A){if(!A){A=B;B=this.domElem}else{if(typeof B=="string"){B=this.elem(B)}}return this.unbindFromDomElem(B,A)},_buildEventName:function(A){var B=this;return A.indexOf(" ")>1?e.map(A.split(" "),function(C){return B._buildOneEventName(C)}).join(" "):B._buildOneEventName(A)},_buildOneEventName:function(C){var E=this,A=E._eventNameCache;if(C in A){return A[C]}var D="."+E._uniqId;if(C.indexOf(".")<0){return A[C]=C+D}var B=".bem_"+E.__self._name;return A[C]=e.map(C.split("."),function(G,F){return F==0?G+B:B+"_"+G}).join("")+D},trigger:function(B,A){this.__base(B=this.buildEvent(B),A)._ctxTrigger(B,A);return this},_ctxTrigger:function(B,A){var E=this,D=f[E.__self._buildCtxEventName(B.type)],C={};D&&E.domElem.each(function(){var G=this,F=D.counter;while(G&&F){var I=e.identify(G,true);if(I){if(C[I]){break}var H=D.ctxs[I];if(H){e.each(H,function(K,J){J.fn.call(J.ctx||E,B,A)});F--}C[I]=true}G=G.parentNode}})},setMod:function(B,C,A){if(B&&typeof A!="undefined"&&B.length>1){var D=this;B.each(function(){D.setMod(e(this),C,A)});return D}return this.__base(B,C,A)},_extractModVal:function(E,B,D){var A=(B||this.domElem)[0],C;A&&(C=A.className.match(this.__self._buildModValRE(E,D||B)));return C?C[2]:""},_extractMods:function(A,E){var D={},B=!A.length,C=0;e.each((E||this.domElem)[0].className.match(this.__self._buildModValRE("("+(B?k:A.join("|"))+")",E,"g"))||[],function(F,G){var I=(G=e.trim(G)).lastIndexOf(o),H=G.substr(0,I-1).lastIndexOf(o);D[G.substr(H+1,I-H-1)]=G.substr(I+1);++C});C<A.length&&e.each(A,function(F,G){G in D||(D[G]="")});return D},_afterSetMod:function(G,C,E,F){var B=this.__self,A=B._buildModClassPrefix(G,F),D=B._buildModValRE(G,F),H=C==="";(E||this.domElem).each(function(){var I=this.className;I.indexOf(A)>-1?this.className=I.replace(D,(H?"":"$1"+A+C)+"$3"):H||e(this).addClass(A+C)});F&&this.dropElemCache(F,G,C)},findElem:function(D,F,E,C){if(arguments.length%2){C=E;E=F;F=D;D=this.domElem}else{if(typeof D=="string"){D=this.findElem(D)}}var B=this.__self,A="."+e.map(F.split(" "),function(G){return s(B._name,G,E,C)}).join(",.");return w(D,A)},_elem:function(B,D,A){var C=B+y(D,A);return this._elemCache[C]||(this._elemCache[C]=this.findElem(B,D,A))},elem:function(D,C,A){if(D.indexOf(" ")<0){return this._elem(D,C,A)}var B=e([]),E=this;e.each(D.split(" "),function(){B=B.add(E._elem(this,C,A))});return B},dropElemCache:function(D,C,A){if(D){var E=this,B=y(C,A);D.indexOf(" ")<0?delete E._elemCache[D+B]:e.each(D.split(" "),function(G,F){delete E._elemCache[F+B]})}else{this._elemCache={}}return this},containsDomElem:function(A){return A.parents().andSelf().index(this.domElem)>-1},buildSelector:function(B,C,A){return this.__self.buildSelector(B,C,A)},destruct:function(B){var C=this,A=C.__self;C._needSpecialUnbind&&A.doc.add(A.win).unbind("."+C._uniqId);C.__base();C.dropElemCache().domElem.each(function(D,E){e.each(r(E),function(F,G){var H=v[G.uniqId];H&&H._removeDomElem(E)});l(E)});B||C.domElem.remove();delete C.domElem;delete C._elemCache}},{doc:x,win:d,_processLive:function(B){var D=this,C=D._liveInitable;if("live" in D){var A=typeof C=="undefined";if(A^B){if(e.isFunction(D.live)){C=D.live()!==false;D.live=function(){}}else{C=D.live}}}return C},init:function(B,D,C){if(!B||e.isFunction(B)){C=D;D=B;B=x}var A=e.identify();w(B,".i-bem").each(function(){q(e(this),A)});D&&this.afterCurrentEvent(D,C)},destruct:function(B,A,C){if(typeof B!="boolean"){C=A;A=B;B=h}w(A,".i-bem",C).each(function(){e.each(r(this),function(D,E){if(E.uniqId){var F=v[E.uniqId];F&&F.destruct(true)}});l(this)});B||(C?A.empty():A.remove())},update:function(A,B,D,C){this.destruct(A,true);this.init(A.html(B),D,C)},_buildCtxEventName:function(A){return this._name+":"+A},_liveClassBind:function(C,D,H,A){var G=this;if(D.indexOf(" ")>-1){e.each(D.split(" "),function(I,J){G._liveClassBind(C,J,H,A)})}else{var B=G._buildCtxEventName(D),F=p[B],E=e.identify(H);if(!F){F=p[B]={};x.bind(D,G.changeThis(G._liveClassTrigger,G))}F=F[C]||(F[C]={uniqIds:{},fns:[]});if(!(E in F.uniqIds)){F.fns.push({uniqId:E,fn:G._buildLiveEventFn(H,A)});F.uniqIds[E]=F.fns.length-1}}return this},_liveClassUnbind:function(D,E,H){var C=this._buildCtxEventName(E),G=p[C];if(G){if(H){if(G=G[D]){var F=e.identify(H);if(F in G.uniqIds){var B=G.uniqIds[F],A=G.fns.length-1;G.fns.splice(B,1);while(B<A){G.uniqIds[G.fns[B++].uniqId]=B-1}delete G.uniqIds[F]}}}else{delete G[D]}}return this},_liveClassTrigger:function(G){var F=p[this._buildCtxEventName(G.type)];if(F){var C=G.target,A=[];for(var H in F){F.hasOwnProperty(H)&&A.push(H)}do{var B=" "+C.className+" ",E=0;while(H=A[E++]){if(B.indexOf(" "+H+" ")>-1){var D=0,J=F[H].fns,I;while(I=J[D++]){I.fn.call(e(C),G)}A.splice(--E,1)}}}while(A.length&&(C=C.parentNode))}},_buildLiveEventFn:function(C,A){var B=this;return function(E){var D=[B._name,((E.data||(E.data={})).domElem=e(this)).closest(B.buildSelector()),true],F=a.apply(null,A?D.concat([C,E]):D);F&&(A||C.apply(F,arguments))}},liveInitOnEvent:function(B,A,C){return this.liveBindTo(B,A,C,true)},liveBindTo:function(E,B,D,A){if(!D){D=B;B=E;E=h}if(!E||typeof E=="string"){E={elemName:E}}var C=this;if(E.elemName&&E.elemName.indexOf(" ")>1){e.each(E.elemName.split(" "),function(F,G){C._liveClassBind(s(C._name,G,E.modName,E.modVal),B,D,A)});return C}return C._liveClassBind(s(C._name,E.elemName,E.modName,E.modVal),B,D,A)},liveUnbindFrom:function(B,A,D){var C=this;if(B.indexOf(" ")>1){e.each(B.split(" "),function(E,F){C._liveClassUnbind(s(C._name,F),A,D)});return C}return C._liveClassUnbind(s(C._name,B),A,D)},_liveInitOnBlockInit:function(B,D,C){var A=this._name;u[B].on("init",function(E){var F=E.block[C](A);D&&e.each(F,function(){D.call(this)})});return this},liveInitOnBlockInit:function(A,B){return this._liveInitOnBlockInit(A,B,"findBlocksOn")},liveInitOnBlockInsideInit:function(A,B){return this._liveInitOnBlockInit(A,B,"findBlocksOutside")},on:function(A,E,D,C,B){return A.jquery?this._liveCtxBind(A,E,D,C,B):this.__base(A,E,D,C)},un:function(A,D,C,B){return A.jquery?this._liveCtxUnbind(A,D,C,B):this.__base(A,D,C)},liveCtxBind:function(A,E,D,C,B){return this._liveCtxBind(A,E,D,C,B)},_liveCtxBind:function(A,F,E,D,C){if(e.isFunction(E)){C=D;D=E;E=h}var H=this;if(F.indexOf(" ")>-1){e.each(F.split(" "),function(I,J){H._liveCtxBind(A,J,E,D,C)})}else{var B=H._buildCtxEventName(F),G=f[B]||(f[B]={counter:0,ctxs:{}});A.each(function(){var J=e.identify(this),I=G.ctxs[J];if(!I){I=G.ctxs[J]={};++G.counter}I[e.identify(D)+(C?e.identify(C):"")]={fn:D,data:E,ctx:C}})}return H},liveCtxUnbind:function(A,D,C,B){return this._liveCtxBind(A,D,C,B)},_liveCtxUnbind:function(A,D,C,B){var F=this,E=f[D=F.buildEventName(D)];if(E){A.each(function(){var H=e.identify(this,true),G;if(H&&(G=E.ctxs[H])){C&&delete G[e.identify(C)+(B?e.identify(B):"")];if(!C||e.isEmptyObject(G)){E.counter--;delete E.ctxs[H]}}});E.counter||delete f[D]}return F},_extractElemNameFrom:function(A){var B=A[0].className.match(this._buildElemNameRE());return B?B[1]:h},extractParams:g,_buildModClassPrefix:function(B,A){return s(this._name)+(A?j+(typeof A==="string"?A:this._extractElemNameFrom(A)):"")+o+B+o},_buildModValRE:function(B,A,C){return new RegExp("(\\s?)"+this._buildModClassPrefix(B,A)+"("+k+")(\\s|$)",C)},_buildElemNameRE:function(){return new RegExp(this._name+j+"("+k+")(?:\\s|$)")},buildSelector:function(B,C,A){return"."+s(this._name,B,C,A)},getWindowSize:function(){var A=d[0];if(typeof A.innerWidth!="undefined"){return{width:A.innerWidth,height:A.innerHeight}}var B=n();return{width:B.clientWidth,height:B.clientHeight}},buildClass:function(C,A){var B={};A?B[C]=A:B=C;return b.buildClasses(this._name,null,B)},buildElemClass:function(B,D,A){var C={};A?C[D]=A:C=D;return b.buildClasses(this._name,B,C)},buildHtml:function(E){E=E||{};var B=E.tag||"div",F=this,A=["<",B,' class="'],D={};e.each([{name:E.name,elem:E.elem,mods:E.mods,params:E.params}].concat(E.mix||[]),function(G,I){var H=I.name?i.blocks[I.name]:F;G&&A.push(" ");A.push(I.elem?H.buildElemClass(I.elem,I.mods):H.buildClass(I.mods));I.elem||(D[H.getName()]=I.params||{})});var C=!e.isEmptyObject(D);A.push(C?" i-bem":"",'"');C&&A.push(' onclick="return ',e.stringify(D).replace(/"/g,"'"),'"');A.push(">",this.buildHtmls(E.content),"</",B,">");return A.join("")},buildHtmls:function(A){if(!e.isArray(A)){return A||""}var B=this;return e.map(A,function(C){return B.buildHtml(C)}).join("")}})})(BEM,jQuery);$(function(){BEM.DOM.init()});BEM.DOM.decl("b-autocomplete-item",{val:function(){return this.params.val||this.domElem.text()},enter:function(){},select:function(a){}},{live:function(){this.liveBindTo("mouseover mouseout mousedown",function(a){this.trigger(a.type)})}});BEM.HTML.decl("b-autocomplete-item",{onBlock:function(a){a.tag("li").content(a.param("data")).js(true)}});jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};(function(d){var c,g=[],a=d.browser;function f(){return g.length?g.shift():c?c.clone():c=b()}function e(h){g.push(h)}function b(){return d((a.safari||a.webkit)&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1?"<div/>":"<iframe"+(a.msie&&a.version<9?' frameborder="0"':"")+"/>")}BEM.DOM.decl("i-popup",{onSetMod:{visibility:{visible:function(){var h=this._getUnder(),i=h.parent();this.hasMod(h,"type","paranja")?i.is("body")||h.appendTo("body"):(i[0]!==this.domElem[0])&&h.prependTo(this.domElem);this._inBody||(this._inBody=!!this.domElem.appendTo("body"));this.trigger("show")},"":function(){var h=this._getUnder();this.hasMod(h,"type","paranja")&&h.remove();this._putUnder();this.trigger("hide")}}},_getUnder:function(){return this._under||(this._under=f().attr("class",this._underClass||(this._underClass=this.findElem("under").remove().attr("class"))))},_putUnder:function(){e(this._under);delete this._under},show:function(h){h&&this.domElem.css(h);return this.setMod("visibility","visible")},hide:function(){return this.delMod("visibility")}},{live:true})})(jQuery);BEM.HTML.decl("i-popup",{onBlock:function(a){a.mod("autoclosable","yes").js(true).wrapContent({elem:"content"}).afterContent({elem:"under",mods:a.param("underMods"),mix:a.param("underMix")}).param("zIndex")&&a.attr("style","z-index:"+(32700+a.param("zIndex")))}});(function(a){BEM.DOM.decl({name:"i-popup",modName:"autoclosable",modVal:"yes"},{onSetMod:{visibility:{visible:function(){var b=a.browser.opera?"keypress":"keydown";this.afterCurrentEvent(function(){this.bindToDoc("leftclick",function(c){this.containsDomElem(a(c.target))||this._onOutClick(c)}).bindToDoc(b,function(c){c.keyCode==27&&this.hide()})});this.__base.apply(this,arguments)},"":function(){return this.unbindFromDoc("leftclick keypress").__base.apply(this,arguments)}}},_onOutClick:function(b){var c=a.Event("outside-click");this.trigger(c,{domEvent:b});c.isDefaultPrevented()||this.hide()}})})(jQuery);(function(d){BEM.DOM.decl("b-popupa",{onSetMod:{js:function(){this._owner=null;this._isShowed=false;this._direction=this.getMod("direction")||"down"}},show:function(k){if(!this._isShowed||this._owner!==k){this._getUnder().show({left:-10000,top:-10000});this._owner=k;this.pos()}return this},hide:function(){this._isShowed&&this._getUnder().hide();return this},toggle:function(k){return this.isShowed()?this.hide():this.show(k)},pos:function(){var k=this._calcParams(this._owner);this.elem("tail").css(k.tailOffsets);this.setMod("direction",k.direction)._getUnder().show(k.offsets);return this},isShowed:function(){return this._isShowed},setDirection:function(k){if(this._direction!=k){this._direction=k;this.isShowed()&&this.pos()}},setContent:function(k,m,l){BEM.DOM.update(this.elem("content"),k,m,l);return this.isShowed()?this.pos():this},_calcDimensions:function(o){var l=this._under.domElem,t=this.__self.doc,u=!!o.jquery,r=u?o.offset():o,m=u?o.outerWidth():e,n=u?o.outerHeight():e,q=t.scrollLeft(),p=t.scrollTop(),s=this.__self.getWindowSize(),k=parseInt(this.elem("content").css("border-top-width"),10);return{ownerLeft:r.left,ownerTop:r.top,ownerRight:r.left+m,ownerBottom:r.top+n,ownerMiddle:r.left+m/2,underWidth:l.outerWidth(),underHeight:l.outerHeight(),borderWidth:isNaN(k)?0:k,windowLeft:q,windowRight:q+s.width,windowTop:p,windowBottom:p+s.height}},_calcParams:function(k){var q=this._calcDimensions(k);if(this.hasMod("adjustable","no")){return f(this._direction,q)}var l={},n=d.inArray(this._direction,a),m=n,p,o;do{p=a[n];o=l[p]=f(p,q);if(!o.factor){return o}++n==a.length&&(n=0)}while(n!==m);return l["down-right"]},destruct:function(){var k=this._under;k&&k.destruct.apply(k.hide(),arguments);this.__base.apply(this,arguments)},_getUnder:function(){var l=this;if(!l._under){var k=d(BEM.HTML.build({block:"i-popup",zIndex:this.params.zIndex,mods:{autoclosable:l.getMod("autoclosable")||"yes",fixed:l.hasMod("direction","fixed")&&"yes"},underMods:l.params.underMods,underMix:[{block:"b-popupa",elem:"under"}]}));(l._under=l.findBlockOn(k,"i-popup")).on({show:function(){l._isShowed=true;l.hasMod("adjustable","no")||l.bindToWin("resize",function(){l.isShowed()&&l.pos()});l.trigger("show")},hide:function(){l._isShowed=false;l.hasMod("adjustable","no")||l.unbindFromWin("resize");l.trigger("hide")},"outside-click":function(){l.trigger.apply(l,arguments)}},l).elem("content").append(l.domElem)}return l._under}},{live:function(){this.liveBindTo("close","leftclick",function(){this.hide()})}});var e=19,b=7,i=15,g=15,h=7,j=8,a=["up","up-right","up-left","down","down-right","down-left","right","right-up","left","left-up"];function f(o,p){var l,m,k,n;switch(o){case"down":case"up":l=c(m={left:p.ownerMiddle-p.underWidth/2,top:o=="down"?p.ownerBottom+h:p.ownerTop-p.underHeight-h},p);k={marginLeft:(p.ownerRight-p.ownerLeft)/2+p.ownerLeft-m.left-i/2,marginTop:(o=="down"?-h+p.borderWidth:-p.borderWidth)};break;case"down-right":case"down-left":case"up-right":case"up-left":n=o=="down-right"||o=="down-left"?"down":"up";l=c(m={left:(o=="down-right"||o=="up-right"?p.ownerLeft:p.ownerRight-p.underWidth),top:n=="down"?p.ownerBottom+h:p.ownerTop-p.underHeight-h},p);k={marginLeft:(p.ownerRight-p.ownerLeft)/2+p.ownerLeft-m.left-i/2,marginTop:(n=="down"?-h+p.borderWidth:-p.borderWidth)};break;case"left":case"right":l=c(m={left:(o=="left"?p.ownerLeft-p.underWidth-b:p.ownerRight+b),top:p.ownerTop-e+g/2},p);k={marginLeft:o=="left"?-p.borderWidth:-b+p.borderWidth,marginTop:e-g/2};break;case"left-up":case"right-up":l=c(m={left:(o=="left-up"?p.ownerLeft-p.underWidth-b:p.ownerRight+b),top:p.ownerTop+g/2+e-p.underHeight},p);n=o=="left-up"?"left":"right";k={marginLeft:n=="left"?-p.borderWidth:-b+p.borderWidth,marginTop:p.ownerTop-m.top+j-g/2}}return{direction:n||o,factor:l,offsets:m,tailOffsets:k}}function c(m,l){var k=0;l.windowTop>m.top&&(k+=l.windowTop-m.top);m.top+l.underHeight>l.windowBottom&&(k+=m.top+l.underHeight-l.windowBottom);l.windowLeft>m.left&&(k+=l.windowLeft-m.left);m.left+l.underWidth>l.windowRight&&(k+=m.left+l.underWidth-l.windowRight);return k}BEM.HTML.decl("b-popupa",{onBlock:function(k){var l=false;d.each(k.param("content"),function(m,n){return !(l=n.elem=="close")});k.mods({theme:"ffffff",direction:"down","has-close":l&&"yes"}).js(true).afterContent({elem:"shadow"})},onElem:{content:function(k){k.wrap({elem:"wrap-cell",tag:"td"}).wrap({tag:"tr"}).wrap({elem:"wrap",tag:"table"})},close:function(k){k.tag("i")},shadow:function(k){k.tag("i")},tail:function(k){k.tag("i").wrapContent({elem:"tail-i",tag:"i"})}}})})(jQuery);BEM.DOM.decl("b-form-button",{onSetMod:{js:function(){(this._href=this.domElem.attr("href"))&&this.isDisabled()&&this.domElem.removeAttr("href")},focused:{yes:function(){if(this.isDisabled()){return false}this.bindTo("keydown",this._onKeyDown).elem("input").focus()},"":function(){this.unbindFrom("keydown").elem("input").blur()}},disabled:function(c,a){var b=a=="yes";this.domElem.attr("aria-disabled",b);this.elem("input").attr("disabled",b);this._href&&(b?this.domElem.removeAttr("href"):this.domElem.attr("href",this._href));b&&this.domElem.keyup()},pressed:function(b,a){this.isDisabled()||this.trigger(a=="yes"?"press":"release")},"*":function(b,a){if(this.isDisabled()&&"hovered pressed".indexOf(b)>-1){return false}"hovered focused".indexOf(b)>-1&&a==""&&this.delMod("pressed")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(a){if(typeof a=="undefined"){return this._href}else{this._href=a;this.isDisabled()||this.domElem.attr("href",a);return this}},_onKeyDown:function(a){if(a.keyCode==13&&!this._keyDowned){this._keyDowned=true;this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup");delete this._keyDowned})}},_onClick:function(a){this.isDisabled()?a.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){var a={mouseover:{name:"hovered",val:"yes"},mouseout:{name:"hovered"},mousedown:{name:"pressed",val:"yes"},mouseup:{name:"pressed"},focusin:{name:"focused",val:"yes"},focusout:{name:"focused"}};this.liveBindTo("leftclick",function(b){this._onClick(b)}).liveBindTo("mouseover mouseout mouseup focusin focusout",function(c){var b=a[c.type];this.setMod(b.name,b.val||"")}).liveBindTo("mousedown",function(c){var b=a[c.type];c.which==1&&this.setMod(b.name,b.val||"")})}});BEM.DOM.decl("b-form-checkbox",{onSetMod:{js:function(){var b=this,a=b.elem("checkbox");b.setMod("checked",a.attr("checked")?"yes":"");b.__self.doc[0].activeElement===a[0]&&b.setMod("focused","yes")},focused:{yes:function(){if(this.isDisabled()){return false}this.elem("checkbox").focus()},"":function(){this.elem("checkbox").blur()}},checked:function(b,a){this.elem("checkbox").attr("checked",a=="yes");this.afterCurrentEvent(function(){this.trigger("change")})},disabled:function(b,a){this.elem("checkbox").attr("disabled",a=="yes")}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return this.hasMod("checked","yes")},toggle:function(){this.toggleMod("checked","yes","")},val:function(b){var a=this.elem("checkbox");return b==undefined?a.val():a.val(b)},_onClick:function(a){if(a.button!==0){return}this.isDisabled()||this.setMod("focused","yes").toggle()}},{live:function(){this.liveBindTo("checkbox","click",function(a){this._onClick(a)}).liveBindTo("checkbox","focusin focusout",function(a){this.setMod("focused",a.type=="focusin"?"yes":"")});return false}});(function(c,a){var b=a.block["b-head-tabs"]=function(u){var e=c(this),g=c.decodeURIComponent?c.decodeURIComponent:function(z){var y="";try{y=decodeURIComponent(z)}catch(A){y=z}return y},x=c(".b-head-search"),w=x.find(".b-search .b-form-input input:first"),o=a.params.id,k=q(document.location.search),j={www:505,search:521,images:526}[o]||527,f={market:{cvredirect:1,clid:j}},m={news:{rpt:"nnews",grhow:"clutop"},haber:{rpt:"nnews2",grhow:"clutop"},yaca:{rpt:"rs2"},market:{cvredirect:1,clid:j},blogs:{ft:"blog"}},v=(function(){var y={};c.each(["news","yaca","market","blogs","maps","adresa","video","fotki","slovari","auto","images","music","www","aile","yandex","haber","gorsel"],function(){y[this]=["family"]});return y})(),r=(function(){var y={};c.each(["news","yaca","market","blogs","maps","adresa","video","fotki","slovari","auto","images","music","www","aile","yandex","haber","gorsel"],function(){y[this]=["noreask","family"]});return y})(),s=e.find(':not(strong)>a.b-head-tabs__link:not([href$="/all"])').map(function(){var z=this.host.split(".")[0],A=q(this.search),B=A.clid,y=c.param(c.extend(A,h(z,B)),true);return{node:this,clid:B,toServiceId:z,path:b.getHostToUrlMap()[z],host:this.host,searchHost:b.getHostMap()[z],noSearchParamsUrl:y?"?"+y:"",searchParams:c.extend(A,p(z,B))}}).filter(function(){return typeof this.path!=="undefined"}),n,t=x.find(".b-search__advanced")[0];if(t){var i=q(t.search),l=t.pathname.replace(/^\/?(.*)/,"$1");i.text="";s.push({node:t,clid:i.clid,toServiceId:o,path:l,host:t.host,noSearchParamsUrl:l+"?"+c.param(i,true),searchParams:i})}(function(){var y=c.trim(w.val())||u["default"];if(n!=y){n=y;c.each(s,function(){y&&(this.searchParams[b.getSearchParamName(this.toServiceId)]=y);this.node.href=[this.node.protocol+"/",y&&this.searchHost?this.searchHost:this.host,y?this.path+"?"+c.param(this.searchParams,true):this.noSearchParamsUrl].join("/")})}setTimeout(arguments.callee,200)})();function h(y,z){var A=f[y]||{};!A.clid&&z&&(A.clid=z);c.each(v[y]||[],function(){k[this]&&(A[this]=k[this])});return A}function p(z,A){var C=[].concat(r[z]),y=z+o;(y=="imageswww"||y=="wwwimages")&&C.push("site");var B=m[z]||{};c.each(C,function(){k[this]&&(B[this]=k[this])});!B.clid&&A&&z!=="www"&&(B.clid=A);return B}function q(y){var z={};c.each(y.substr(1).split("&"),function(D){var E=this.split("="),A=E[0],C=E[1];if(A){if(z.hasOwnProperty(A)){var B=z[A];c.isArray(B)?B.push(C):z[A]=[B,C]}else{z[A]=C}}});return d(z)}function d(z){var y=["site"];c.each(z,function(A,B){if(c.inArray(A,y)>-1){z[A]=c.isArray(B)?B.map(function(C){return g(C)}):g(B)}});return z}};c.extend(b,{getHostToUrlMap:function(){var d={www:"yandsearch",market:"search.xml",maps:"",music:"#!/search",video:"#search"};d.harita=d.maps;d.blogs=d.adresa=d.fotki=d.slovari=d.auto=d.market;d.news=d.yaca=d.images=d.gorsel=d.haber=d.aile=d.yandex=d.www;return d},getHostMap:function(){return{}},getSearchParamName:function(d){return"text"}})})(jQuery,window.Lego);(function(a){BEM.DOM.decl("b-dropdowna",{onSetMod:{js:function(){this._getSwitcher().on("click",this._toggle,this)},disabled:function(c,b){this._getSwitcher().setMod(c,b);b=="yes"&&this.getPopup().hide()}},_getSwitcher:function(){return this._switcher||(this._switcher=this.findBlockInside("b-"+(this.getMod(this.elem("switcher"),"type")||"pseudo-link")))},_toggle:function(){this.getPopup().toggle(this.elem("switcher"))},getPopup:function(){return this._popup||(this._popup=this.findBlockInside("b-popupa")).on("outside-click",function(c,b){this._getSwitcher().containsDomElem(a(b.domEvent.target))&&c.preventDefault()},this)},destruct:function(){var b=this._popup;b&&b.destruct.apply(b,arguments);this.__base.apply(this,arguments)}},{live:function(){this.liveInitOnEvent("switcher","leftclick",function(){})}})})(jQuery);BEM.DOM.decl({name:"b-pseudo-link",modName:"isBEM",modVal:"yes"},{_onClick:function(a){a.preventDefault();this.hasMod("disabled","yes")||this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){this.liveBindTo({modName:"isBEM",modVal:"yes"},"leftclick",function(a){this._onClick(a)})}});BEM.HTML.decl("b-pseudo-link",{onBlock:function(a){var b=a.param("url");a.tag(b?"a":"span").js(true);b&&a.attr("href",b)}});(function(c,a){var b=a.block["b-head-user"]=function(){var d=c(this);if(a.params.login!=""||a.params.displayName){c.getJSON(b.getApiUrl(),{locale:a.params.locale,login:"yes","current-login":a.params.login,yu:a.getCookie("yandexuid")},function(e){b.buildHtml(e,d)})}};b.buildHtml=function(i,f){if(!i||!i.services){return}var j=i.displayName&&i.displayName.social,e=c("<div/>").text(b.getUserLogin(i)).html(),d=j?'<b class="b-user b-user_social_yes"><span class="b-user__provider-ico" style="background:url(http://static.yandex.st/social/current/icons/16/'+j.provider+'.png)"></span>'+e+"</b>":'<b class="b-user"><b class="b-user__first-letter">'+e.substring(0,1)+"</b>"+e.substring(1)+"</b>",h="<a class=\"b-pseudo-link b-pseudo-link_isBEM_yes i-bem\" onclick=\"return {'b-pseudo-link':{name:'b-pseudo-link'}}\""+(!j&&f.hasClass("b-head-user_type_com")?"":' href="'+(j?a.params["social-host"]:"http://i.yandex.ru")+'"')+">"+d+"</a>",g='<div class="b-dropdowna b-dropdowna_isBEM_yes i-bem" onclick="return {\'b-dropdowna\':{name:\'b-dropdowna\'}}"><span class="b-dropdowna__switcher">'+h+'</span><div class="i-popup i-popup_autoclosable_yes i-popup_isBEM_yes i-bem" onclick="return {\'i-popup\':{name:\'i-popup\'}}"><div class="i-popup__content"><div class="i-popup__under b-popupa__under"></div><div class="b-popupa b-popupa_theme_ffffff b-popupa_direction_down b-popupa_isBEM_yes i-bem b-dropdowna__popup" onclick="return {\'b-popupa\':{name:\'b-popupa\'}}"><i class="b-popupa__shadow"></i><i class="b-popupa__tail"><i class="b-popupa__tail-i"></i></i><table cellpadding="0" cellspasing="0" class="b-popupa__wrap"><tr><td class="b-popupa__wrap-cell"><div class="b-popupa__content"><div class="b-menu b-menu_layout_vert b-menu_preset_vmenu"><ul class="b-menu_layout_vert__layout">';j&&f.addClass("b-head-user_social_yes");c.each(i.services,function(k){g+='<li class="b-menu__layout-cell b-menu_layout_vert__layout-cell"><div class="b-menu__item">';if(a.params.id==this.id&&a.params.index){g+="<strong>"+this.title+"</strong>"}else{g+='<a class="b-link b-head-user__link" href="'+this.url+'" onmousedown="Lego.ch(\''+a.params.id+".login.myservices."+this.id+"',this)\">"+this.title+"</a>"}g+="</div></li>"});if(i.services.length){g+='<li class="b-menu_layout_vert__layout-separator"><i class="b-menu__separator"></i></li>'}g+=b.getUserItems(i,f);g+="</ul></div></div></td></tr></table></div></div></div></div>";f.find(".b-user").replaceWith(g);BEM.DOM.init(f)};b.getApiUrl=function(){return a.params["pass-host"]+"/services?callback=?"};b.getUserItems=function(f){var e=f.displayName&&f.displayName.social?[{name:a.message("b-head-userinfo.user:profile","Мои профили"),url:a.params["social-host"]}]:[{name:a.message("b-head-userinfo.user:passport","Паспорт"),url:a.params["passport-host"]},{name:a.message("b-head-userinfo.user:change-password","Сменить пароль"),url:a.params["passport-host"]+"/passport?mode=changepass&retpath="+encodeURIComponent(a.params.retpath)+"/"}];var d="";c.each(e,function(h,g){d+='<li class="b-menu__layout-cell b-menu_layout_vert__layout-cell'+(h==e.length-1?" b-menu_layout_vert__layout-cell_last":"")+'"><div class="b-menu__item"><a class="b-link b-head-user__link" href="'+g.url+'">'+g.name+"</a></div></li>"});return d};b.getUserLogin=function(d){return a.params.displayName&&a.params.displayName.social&&a.params.displayName.name||d.displayName&&d.displayName.name||a.params.login||d.login}})(jQuery,window.Lego);(function(a){window.Lego||(window.Lego={block:{}});Lego.block["i-social"]=function(d){function e(j){var i=this,g={};this.url=j.startUrl+"?";delete j.startUrl;this.popupName=j.popupName;this.yaWindow=null;this.wTimer=null;this.paramsDefault=j;function l(){var m;if(!i.yaWindow){return true}try{m=i.yaWindow.closed}catch(n){m=true}return m}function k(){if(l()){i.wTimer=clearInterval(i.wTimer);i.onFailure({status:"error"})}}function f(v){var y=i.popupName,q=500,z=280,s=Math.round(((window.opera?window.innerWidth:screen.availWidth)-q)/2),w=Math.round(((window.opera?window.innerHeight:screen.availHeight)-z)/2),n="scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0, left="+s+", top="+w+", width="+q+", height="+z;var r={};for(var u in i.paramsDefault){r[u]=i.paramsDefault[u]}for(var u in v){r[u]=v[u]}if(r.display&&r.display!="popup"){r.retpath=r.retnopopup||window.location.href}else{var x="ddom="+(r.ddom||(location.hostname==document.domain?"":document.domain));if("retnopopup" in r){delete r.retnopopup}r.retpath+=(r.retpath.match("#")?"&":"#")+x}var m=i.url;var o=[];for(var t in r){o.push(encodeURIComponent(t)+"="+encodeURIComponent(r[t]))}m+=o.join("&");if(r.display&&r.display!="popup"){window.location.href=m;return}i.yaWindow=window.open(m,y,n);i.yaWindow.focus();if(i.yaWindow){i.wTimer=setInterval(k,500)}}function h(){this.handlers={onSuccess:null,onFailure:null};i.wTimer=clearInterval(i.wTimer);l()||i.yaWindow.close();i.yaWindow=false}this.start=function(n,m,o){h();i.handlers={onSuccess:n,onFailure:m};f(o)};this.onSuccess=function(n){h();var m=i.handlers.onSuccess;m&&m()};this.onFailure=function(n){h();var m=i.handlers.onFailure;m&&m()}}arguments.callee.Broker=e;var c=arguments.callee.defaultParams={startUrl:Lego.params["social-startUrl"]||Lego.params["social-host"]+"/broker/start",retpath:Lego.params["social-retpath"]||location.protocol+"//"+location.host+Lego.params["lego-path"]+"/blocks/i-social/closer/i-social__closer.html",retnopopup:Lego.params["social-retnopopup"]||false,consumer:Lego.params.id||"morda",popupName:"social_"+(Lego.params.id||"morda"),application:"",action_if_anonymous:"authorize",result_location:"fragment"};var b=arguments.callee.broker=new e(a.extend(c,d));return b}})(jQuery);(function(b,a){a.block["b-domik"]=function(z){var d=this,t=d.find(".b-domik__lock"),v=d.find(".b-domik__social"),x=v[0]?v[0].onclick()["size"]:0,l=arguments.callee,o=b('<input type="hidden" name="timestamp"/>'),k=false,w=this.attr("class").match(/\bb-domik_type_(\w+)\b/)[1];if(v.length&&a.params["social-host"]){if(a.params["social-providers"]){A(a.params["social-providers"])}else{b.getJSON(a.params["social-host"]+"/providers2.jsonp?callback=?",function(E){A(E.providers,E.icon_sprites[x])})}var D=new a.block["i-social"];b(".b-domik__social-link").live("click",function(E){j();b(".b-domik__social-popup").each(function(){b(this).bem("b-popupa").hide()});D.start(function(){if(!a.params.retpath||top.location.href==a.params.retpath){top.location.reload()}else{top.location.href=a.params.retpath}},function(){v.removeClass("b-domik__social_loading_yes").css("height","")},{provider:this.onclick()["b-domik"].provider});E.preventDefault()})}function A(G,F){if(!G.length){v.remove();return}v.html(n(G,F));var H=v.find(".b-dropdowna");if(!H.length){return}BEM.DOM.init(H);var I=H.bem("b-dropdowna").getPopup();function E(){I.pos()}I.on("show",function(){b(window).scroll(E)}).on("hide",function(){b(window).unbind("scroll",E)})}function n(H,G){var I=[{block:"b-domik",elem:"social-title",content:a.message("b-domik:enter-with","Войти при помощи")}];H=b.grep(H,function(J){return J.enabled});var F=b.grep(H,function(J){return J.primary});F=b.map(F,function(J){return{block:"b-domik",tag:"a",elem:"social-link",content:{tag:"i",elem:"social-icon",attrs:{style:'background-image:url("'+G+'");background-position: 0px -'+(J.id-1)*32+"px;"}},js:{provider:J.code},attrs:{tabIndex:103}}});[].push.apply(I,F);function E(M){var L=b.map(M,function(O){return{block:"b-domik",tag:"a",elem:"social-link",mods:{},attrs:{tabIndex:103},js:{provider:O.code},content:[{tag:"i",elem:"social-icon",attrs:{style:'background-image:url("'+G+'");background-position: 0px -'+(O.id-1)*32+"px;"}},O.display_name]}});L.length%2&&(L[L.length]="");var K=[],N;for(var J=0;J<L.length;J++){J%2||K.push(N={tag:"tr",content:[]});N.content.push({tag:"td",elem:"provider",content:L[J]})}return K}if(F.length<H.length){I.push({tag:"div",block:"b-dropdowna",js:true,content:[{elem:"switcher",tag:"span",content:{tag:"a",block:"b-pseudo-link",mods:{isBEM:"yes"},js:true,attrs:{href:a.message("b-domik:passport-link","http://passport.yandex.ru/"),tabIndex:103}}},{block:"b-popupa",js:true,tag:"div",mix:[{block:"b-dropdowna",elem:"popup"},{block:"b-domik",elem:"social-popup",mods:{type:w}}],content:[{elem:"tail",tag:"i"},{elem:"content",content:[{elem:"providers",tag:"table",content:E(H)}]}]}]})}I.push({block:"b-spin",mods:{theme:w=="bigform"?"blue-50":"blue-16"}});return BEM.HTML.build(I)}function j(){v.css("height",v.height()).addClass("b-domik__social_loading_yes")}l.isHTTPSSupported=false;d.append(o).submit(function(){o.val(+new Date);a.block["b-domik"].isHTTPSSupported&&d.attr("action",d.attr("action").replace(/^http\:/,"https:"))});var r=d.find("input[name=login]"),s=d.find("input[type=submit]");r.change(function(){var E=r.val();E.indexOf("@")==-1&&/[а-яçğıöşü]/i.test(E)?i(z&&z.err_msg||a.message("b-domik:wrong-keyboard-layout","смените раскладку")):p()});r.change();var h;function i(E){!h&&(h=b('<div class="b-domik__error"/>').insertAfter(d.find(".b-domik__password")));h.text(E).show()}function p(){h&&h.hide()}function C(){var E=a.params["lego-static-host"];if(E){if(E.indexOf("https:")==0){return E}if(E.indexOf("http:")==0){return"https"+E.substr(4)}if(E.indexOf("//")==0){return"https:"+E}else{return"https://"+location.host+E}}else{return"https://"+location.host}}l.enableHTTPS=function(){l.isHTTPSSupported=true;t.addClass("b-domik__lock_visibility_visible")};function c(){if(k){return}k=true;b.ajax({url:C()+"/blocks/b-domik/check-https.js",cache:true,dataType:"script"})}c();l.checkForHTTPS=c;var y=l.getLockBaloonContent||function(){var F=/\(\(([^\)]+)\)\)/g;function E(I,H){return I.replace(F,'<a class="b-link" href="'+H+'">$1</a>')}var G=a.message("b-domik.lock-balloon:content","Логин и пароль будут передаваться в&#160;((безопасном режиме))");return E(G,a.message("b-domik.lock-balloon:linkHref","http://help.yandex.ru/mail/?id=1113446"))},e=b(BEM.HTML.build({block:"b-popupa",mods:{direction:"right",theme:"feffd6"},mix:[{block:"b-domik",elem:"lock-balloon"}],content:[{elem:"tail",tag:"i"},{elem:"content",content:y()}]}));d.append(e);var m=e.bem("b-popupa"),g=300,q;function f(){q=setTimeout(function(){m.hide()},g)}var B;function u(){q&&clearTimeout(q);q=null;m.show(t);if(!B){B=true;e.hover(u,f)}}t.hover(u,f)}})(jQuery,window.Lego);(function(b,a){a.block["b-hint-input"]=function(){var i=b(this),e=b("#"+i.attr("for")),g=function(){i.hide()},d=function(){i.show()},c=function(){h||e.val()?g():d()},h=false;e.bind("focus blur",function(j){h=j.type=="focus";c()}).bind("change mouseover",c);i.click(function(){e.focus()});e.change();var f=e.val();(function(){if(e.val()!=f){b(e).trigger("change");f=e.val()}setTimeout(arguments.callee,200)})()}})(jQuery,window.Lego);(function(b,a){a.block["b-domik_type_popup"]=function(h){var e=b(this),d;b(".b-head-userinfo__entry .b-pseudo-link").click(function(i){i.preventDefault();setTimeout(function(){c()},0)});function c(j){if(!d){g()}if(j){a.params.retpath=j}var i="&from="+a.params["passport-msg"]+"&retpath="+encodeURIComponent(a.params.retpath);e.attr("action",a.params["passport-host"]+"/passport?mode=auth"+i);d.find(".b-domik__register .b-domik__link").attr("href",a.params["passport-host"]+"/passport?mode="+(h.regMode||"register")+i);b(document).bind("keyup.b-domik",function(k){if(k.keyCode==27){f()}}).bind("click.b-domik",function(m){var l=b(m.target),k=l.parents().andSelf();if(l.is("input[type=button]")||k.index(d)==-1&&!k.is(".b-popupa")){f()}});!d.hasClass("b-domik_position_popup-50-50")&&window.scrollTo(0,0);d.show().find("input[name=login]").focus();b(document).trigger("show.b-domik_type_popup")}function f(){b(document).unbind(".b-domik");d.hide()}function g(){d=b('<form class="'+e.attr("class").replace("g-hidden","")+'" method="POST"><i class="b-domik__roof"></i><table class="b-domik__shadow"><tr><td class="b-domik__shadow__lt">&nbsp;</td><td class="b-domik__shadow__t"></td><td class="b-domik__shadow__rt">&nbsp;</td></tr><tr><td class="b-domik__shadow__l">&nbsp;</td><td class="b-domik__shadow__m"><div class="b-domik__form"><div class="b-domik__title">'+(h.title||a.message("b-domik:title","Вход"))+'</div><div class="b-domik__username"><label for="b-domik_popup-username" class="b-hint-input g-js" onclick="return {name:\'b-hint-input\'}">'+a.message("b-domik:login","логин")+'</label><div class="b-input"><input class="b-input__text" id="b-domik_popup-username" name="login" value="'+e.find("input[name=login]").val()+'" tabindex="11"/></div></div><div class="b-domik__password"><label for="b-domik_popup-password" class="b-hint-input g-js" onclick="return {name:\'b-hint-input\'}">'+a.message("b-domik:password","пароль")+'</label><div class="b-domik__lock"></div><div class="b-input"><input class="b-input__text" id="b-domik_popup-password" name="passwd" value="'+e.find("input[name=passwd]").val()+'" type="password" tabindex="11"/></div></div><div class="b-domik__permanent"><input class="b-domik__check" id="b-domik_popup-permanent" name="twoweeks" type="checkbox" value="yes" tabindex="11"/><label for="b-domik_popup-permanent" class="b-domik__permanent-label">'+a.message("b-domik:permanent","запомнить меня")+'</label> <span class="b-domik__help">(<a class="b-domik__link" href="'+a.message("b-domik:help-link","http://help.yandex.ru/passport/?id=922493")+'" tabindex="12">'+a.message("b-domik:help","что&nbsp;это")+'</a>)</span></div><div class="b-domik__button"><input class="b-domik__submit" type="submit" value="'+a.message("b-domik:logon","Войти")+'" tabindex="11"/><input class="b-domik__submit" type="button" value="'+a.message("b-domik:cancel","Отмена")+'" tabindex="11"/></div><div class="b-domik__social" onclick="return { size: 16 }"></div><div class="b-domik__register"><a class="b-domik__link" href="" tabindex="11">'+(h.register||a.message("b-domik:register","Зарегистрироваться"))+'</a></div><div class="b-domik__remember"><a class="b-domik__remind" href="'+a.params["passport-host"]+'/passport?mode=restore" tabindex="11">'+a.message("b-domik:remember","Напомнить пароль")+'</a></div></div></td><td class="b-domik__shadow__r">&nbsp;</td></tr><tr><td class="b-domik__shadow__lb">&nbsp;</td><td class="b-domik__shadow__b"></td><td class="b-domik__shadow__rb">&nbsp;</td></tr></table><iframe class="b-popup-under" frameborder="0"></iframe></form>').submit(function(i){i.preventDefault();e.find("input[name=login]").val(d.find("input[name=login]").change().val()).end().find("input[name=passwd]").val(d.find("input[name=passwd]").change().val()).end().find("input[name=twoweeks]").attr("checked",d.find("input[name=twoweeks]").attr("checked")||false).end().append('<input type="hidden" name="timestamp" value="'+ +new Date+'"/>').attr("action",a.block["b-domik"].isHTTPSSupported?e.attr("action").replace(/^http:/,"https:"):e.attr("action")).submit()});if(a.block["b-domik"]){a.block["b-domik"].call(d)}b("body").append(d);a.blockInit(d)}arguments.callee.login=function(){var i=arguments;setTimeout(function(){c.apply(this,i)},0)}}})(jQuery,window.Lego);(function(){var a;BEM.DOM.decl("b-form-input",{onSetMod:{js:function(){var d=this,b=d.elem("input"),c=d.__self.doc[0].activeElement;d._val=b.val();d._focused=c===b[0];if(!a){a=[];(function(){var e,f=0;while(e=a[f++]){e.val(e.elem("input").val())}setTimeout(arguments.callee,50)})()}d._focused&&d.setMod("focused","yes");if(d.params.autoFocus&&!d._focused&&!(c&&"input textarea".indexOf(c.tagName.toLowerCase())>-1)){d.setMod("focused","yes")._focused=true}d._instanceIndex=a.push(d.bindTo(b,{focus:d._onFocus,blur:d._onBlur}))-1;d.params.shortcut&&this.bindToDoc("keydown",function(f){if(f.ctrlKey&&f.keyCode==38&&!$(f.target).is("input, textarea")){this.setMod("focused","yes")}})},disabled:function(c,b){this.elem("input").attr("disabled",b=="yes")},focused:function(c,b){if(this.hasMod("disabled","yes")){return false}var d=b=="yes";d?this._focused||this._focus():this._focused&&this._blur();this.afterCurrentEvent(function(){this.trigger(d?"focus":"blur")})}},onElemSetMod:{message:{visibility:function(e,f,b){var g=this,d=g.getMod(e,"type");if(d){var c=true;b||g.elem("message","type",d).each(function(){this!=e[0]&&g.hasMod($(this),"visibility","visible")&&(c=false)});c&&g.toggleMod("message-"+d,"yes","",b==="visible")}d=="error"&&e.attr("aria-hidden",b!=="visible")}}},val:function(d,c){if(typeof d=="undefined"){return this._val}if(this._val!=d){var b=this.elem("input");b.val()!=d&&b.val(d);this._val=d;this.trigger("change",c)}return this},_onFocus:function(){this._focused=true;return this.setMod("focused","yes")},_onBlur:function(){this._focused=false;return this.delMod("focused")},_focus:function(){var c=this.elem("input")[0];if(c.createTextRange&&!c.selectionStart){var b=c.createTextRange();b.move("character",c.value.length);b.select()}else{c.focus()}},_blur:function(){this.elem("input").blur()},destruct:function(){this.__base.apply(this,arguments);this.params.shortcut&&this.unbindFromDoc("keydown");a.splice(this._instanceIndex,1);var c=this._instanceIndex,b;while(b=a[c++]){--b._instanceIndex}}})})();BEM.DOM.decl("b-form-input",{onSetMod:{js:function(){this.__base.apply(this,arguments);(this._hasHint=!!this.elem("hint")[0])&&this.on("change",this._updateHint)._updateHint()},focused:function(){this.__base.apply(this,arguments);this._hasHint&&this._updateHint()}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!(this._focused||this.val()))}});jQuery.fn.sortElements=(function(){var a=[].sort;return function(d,e,b){if(!b){b=function(g,f){a.call(g,f)}}e=e||function(){return this};var c=this.map(function(){var g=e.call(this),f=g.parentNode,h=f.insertBefore(document.createTextNode(""),g.nextSibling);return function(){if(f===this){throw new Error("You can't sort elements if any one is a descendant of another.")}f.insertBefore(this,h);f.removeChild(h)}});jQuery.extend(this,b(this,d));this.each(function(f){c[f].call(e.call(this))});return this}})();$.plural=function(b,e,d,c){function a(f){if(f%10==1&&f%100!=11){return 0}else{if(f%10>=2&&f%10<=4&&(f%100<10||f%100>=20)){return 1}else{return 2}}}switch(a(b)){case 0:return e;case 1:return d;default:return c}};
/*!
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,p){var i,m=Array.prototype.slice,r=decodeURIComponent,a=$.param,c,l,v,b=$.bbq=$.bbq||{},q,u,j,e=$.event.special,d="hashchange",A="querystring",D="fragment",y="elemUrlAttr",g="location",k="href",t="src",x=/^.*\?|#.*$/g,w=/^.*\#/,h,C={};function E(F){return typeof F==="string"}function B(G){var F=m.call(arguments,1);return function(){return G.apply(this,F.concat(m.call(arguments)))}}function n(F){return F.replace(/^[^#]*#?(.*)$/,"$1")}function o(F){return F.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function f(H,M,F,I,G){var O,L,K,N,J;if(I!==i){K=F.match(H?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/);J=K[3]||"";if(G===2&&E(I)){L=I.replace(H?w:x,"")}else{N=l(K[2]);I=E(I)?l[H?D:A](I):I;L=G===2?I:G===1?$.extend({},I,N):$.extend({},N,I);L=a(L);if(H){L=L.replace(h,r)}}O=K[1]+(H?"#":L||!K[1]?"?":"")+L+J}else{O=M(F!==i?F:p[g][k])}return O}a[A]=B(f,0,o);a[D]=c=B(f,1,n);c.noEscape=function(G){G=G||"";var F=$.map(G.split(""),encodeURIComponent);h=new RegExp(F.join("|"),"g")};c.noEscape(",/");$.deparam=l=function(I,F){var H={},G={"true":!0,"false":!1,"null":null};$.each(I.replace(/\+/g," ").split("&"),function(L,Q){var K=Q.split("="),P=r(K[0]),J,O=H,M=0,R=P.split("]["),N=R.length-1;if(/\[/.test(R[0])&&/\]$/.test(R[N])){R[N]=R[N].replace(/\]$/,"");R=R.shift().split("[").concat(R);N=R.length-1}else{N=0}if(K.length===2){J=r(K[1]);if(F){J=J&&!isNaN(J)?+J:J==="undefined"?i:G[J]!==i?G[J]:J}if(N){for(;M<=N;M++){P=R[M]===""?O.length:R[M];O=O[P]=M<N?O[P]||(R[M+1]&&isNaN(R[M+1])?{}:[]):J}}else{if($.isArray(H[P])){H[P].push(J)}else{if(H[P]!==i){H[P]=[H[P],J]}else{H[P]=J}}}}else{if(P){H[P]=F?i:""}}});return H};function z(H,F,G){if(F===i||typeof F==="boolean"){G=F;F=a[H?D:A]()}else{F=E(F)?F.replace(H?w:x,""):F}return l(F,G)}l[A]=B(z,0);l[D]=v=B(z,1);$[y]||($[y]=function(F){return $.extend(C,F)})({a:k,base:k,iframe:t,img:t,input:t,form:"action",link:k,script:t});j=$[y];function s(I,G,H,F){if(!E(H)&&typeof H!=="object"){F=H;H=G;G=i}return this.each(function(){var L=$(this),J=G||j()[(this.nodeName||"").toLowerCase()]||"",K=J&&L.attr(J)||"";L.attr(J,a[I](K,H,F))})}$.fn[A]=B(s,A);$.fn[D]=B(s,D);b.pushState=q=function(I,F){if(E(I)&&/^#/.test(I)&&F===i){F=2}var H=I!==i,G=c(p[g][k],H?I:{},H?F:2);p[g][k]=G+(/#/.test(G)?"":"#")};b.getState=u=function(F,G){return F===i||typeof F==="boolean"?v(F):v(G)[F]};b.removeState=function(F){var G={};if(F!==i){G=u();$.each($.isArray(F)?F:arguments,function(I,H){delete G[H]})}q(G,2)};e[d]=$.extend(e[d],{add:function(F){var H;function G(J){var I=J[D]=c();J.getState=function(K,L){return K===i||typeof K==="boolean"?l(I,K):l(I,L)[K]};H.apply(this,arguments)}if($.isFunction(F)){H=F;return G}else{H=F.handler;F.handler=G}}})})(jQuery,this);
/*!
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,i,b){var j,k=$.event.special,c="location",d="hashchange",l="href",f=$.browser,g=document.documentMode,h=f.msie&&(g===b||g<8),e="on"+d in i&&!h;function a(m){m=m||i[c][l];return m.replace(/^[^#]*#?(.*)$/,"$1")}$[d+"Delay"]=100;k[d]=$.extend(k[d],{setup:function(){if(e){return false}$(j.start)},teardown:function(){if(e){return false}$(j.stop)}});j=(function(){var m={},r,n,o,q;function p(){o=q=function(s){return s};if(h){n=$('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow;q=function(){return a(n.document[c][l])};o=function(u,s){if(u!==s){var t=n.document;t.open().close();t[c].hash="#"+u}};o(a())}}m.start=function(){if(r){return}var t=a();o||p();(function s(){var v=a(),u=q(t);if(v!==t){o(t=v,u);$(i).trigger(d)}else{if(u!==t){i[c][l]=i[c][l].replace(/#.*/,"")+"#"+u}}r=setTimeout(s,$[d+"Delay"])})()};m.stop=function(){if(!n){r&&clearTimeout(r);r=0}};return m})()})(jQuery,this);
/*!
 * jQuery Form Plugin
 * version: 3.28.0-2013.02.06
 * @requires jQuery v1.5 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses:
 *    http://malsup.github.com/mit-license.txt
 *    http://malsup.github.com/gpl-license-v2.txt
 */
(function(e){var c={};c.fileapi=e("<input type='file'/>").get(0).files!==undefined;c.formdata=window.FormData!==undefined;e.fn.ajaxSubmit=function(h){if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");return this}var g,y,j,m=this;if(typeof h=="function"){h={success:h}}g=this.attr("method");y=this.attr("action");j=(typeof y==="string")?e.trim(y):"";j=j||window.location.href||"";if(j){j=(j.match(/^([^#]+)/)||[])[1]}h=e.extend(true,{url:j,success:e.ajaxSettings.success,type:g||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},h);var s={};this.trigger("form-pre-serialize",[this,h,s]);if(s.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(h.beforeSerialize&&h.beforeSerialize(this,h)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var l=h.traditional;if(l===undefined){l=e.ajaxSettings.traditional}var p=[];var B,C=this.formToArray(h.semantic,p);if(h.data){h.extraData=h.data;B=e.param(h.data,l)}if(h.beforeSubmit&&h.beforeSubmit(C,this,h)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[C,this,h,s]);if(s.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var w=e.param(C,l);if(B){w=(w?(w+"&"+B):B)}if(h.type.toUpperCase()=="GET"){h.url+=(h.url.indexOf("?")>=0?"&":"?")+w;h.data=null}else{h.data=w}var E=[];if(h.resetForm){E.push(function(){m.resetForm()})}if(h.clearForm){E.push(function(){m.clearForm(h.includeHidden)})}if(!h.dataType&&h.target){var i=h.success||function(){};E.push(function(q){var k=h.replaceTarget?"replaceWith":"html";e(h.target)[k](q).each(i,arguments)})}else{if(h.success){E.push(h.success)}}h.success=function(H,q,I){var G=h.context||this;for(var F=0,k=E.length;F<k;F++){E[F].apply(G,[H,q,I||m,m])}};var A=e('input[type=file]:enabled[value!=""]',this);var n=A.length>0;var z="multipart/form-data";var v=(m.attr("enctype")==z||m.attr("encoding")==z);var u=c.fileapi&&c.formdata;d("fileAPI :"+u);var o=(n||v)&&!u;var t;if(h.iframe!==false&&(h.iframe||o)){if(h.closeKeepAlive){e.get(h.closeKeepAlive,function(){t=D(C)})}else{t=D(C)}}else{if((n||v)&&u){t=r(C)}else{t=e.ajax(h)}}m.removeData("jqxhr").data("jqxhr",t);for(var x=0;x<p.length;x++){p[x]=null}this.trigger("form-submit-notify",[this,h]);return this;function f(H){var I=e.param(H).split("&");var q=I.length;var k=[];var G,F;for(G=0;G<q;G++){I[G]=I[G].replace(/\+/g," ");F=I[G].split("=");k.push([decodeURIComponent(F[0]),decodeURIComponent(F[1])])}return k}function r(q){var k=new FormData();for(var F=0;F<q.length;F++){k.append(q[F].name,q[F].value)}if(h.extraData){var I=f(h.extraData);for(F=0;F<I.length;F++){if(I[F]){k.append(I[F][0],I[F][1])}}}h.data=null;var H=e.extend(true,{},e.ajaxSettings,h,{contentType:false,processData:false,cache:false,type:g||"POST"});if(h.uploadProgress){H.xhr=function(){var J=jQuery.ajaxSettings.xhr();if(J.upload){J.upload.addEventListener("progress",function(N){var M=0;var K=N.loaded||N.position;var L=N.total;if(N.lengthComputable){M=Math.ceil(K/L*100)}h.uploadProgress(N,K,L,M)},false)}return J}}H.data=null;var G=H.beforeSend;H.beforeSend=function(K,J){J.data=k;if(G){G.call(this,K,J)}};return e.ajax(H)}function D(ad){var I=m[0],H,Z,T,ab,W,K,O,M,N,X,aa,R;var L=!!e.fn.prop;var ag=e.Deferred();if(ad){for(Z=0;Z<p.length;Z++){H=e(p[Z]);if(L){H.prop("disabled",false)}else{H.removeAttr("disabled")}}}T=e.extend(true,{},e.ajaxSettings,h);T.context=T.context||T;W="jqFormIO"+(new Date().getTime());if(T.iframeTarget){K=e(T.iframeTarget);X=K.attr("name");if(!X){K.attr("name",W)}else{W=X}}else{K=e('<iframe name="'+W+'" src="'+T.iframeSrc+'" />');K.css({position:"absolute",top:"-1000px",left:"-1000px"})}O=K[0];M={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(ah){var ai=(ah==="timeout"?"timeout":"aborted");d("aborting upload... "+ai);this.aborted=1;try{if(O.contentWindow.document.execCommand){O.contentWindow.document.execCommand("Stop")}}catch(aj){}K.attr("src",T.iframeSrc);M.error=ai;if(T.error){T.error.call(T.context,M,ai,ah)}if(ab){e.event.trigger("ajaxError",[M,T,ai])}if(T.complete){T.complete.call(T.context,M,ai)}}};ab=T.global;if(ab&&0===e.active++){e.event.trigger("ajaxStart")}if(ab){e.event.trigger("ajaxSend",[M,T])}if(T.beforeSend&&T.beforeSend.call(T.context,M,T)===false){if(T.global){e.active--}ag.reject();return ag}if(M.aborted){ag.reject();return ag}N=I.clk;if(N){X=N.name;if(X&&!N.disabled){T.extraData=T.extraData||{};T.extraData[X]=N.value;if(N.type=="image"){T.extraData[X+".x"]=I.clk_x;T.extraData[X+".y"]=I.clk_y}}}var S=1;var P=2;function Q(ai){var ah=ai.contentWindow?ai.contentWindow.document:ai.contentDocument?ai.contentDocument:ai.document;return ah}var G=e("meta[name=csrf-token]").attr("content");var F=e("meta[name=csrf-param]").attr("content");if(F&&G){T.extraData=T.extraData||{};T.extraData[F]=G}function Y(){var aj=m.attr("target"),ah=m.attr("action");I.setAttribute("target",W);if(!g){I.setAttribute("method","POST")}if(ah!=T.url){I.setAttribute("action",T.url)}if(!T.skipEncodingOverride&&(!g||/post/i.test(g))){m.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(T.timeout){R=setTimeout(function(){aa=true;V(S)},T.timeout)}function ak(){try{var ao=Q(O).readyState;d("state = "+ao);if(ao&&ao.toLowerCase()=="uninitialized"){setTimeout(ak,50)}}catch(ap){d("Server abort: ",ap," (",ap.name,")");V(P);if(R){clearTimeout(R)}R=undefined}}var ai=[];try{if(T.extraData){for(var an in T.extraData){if(T.extraData.hasOwnProperty(an)){if(e.isPlainObject(T.extraData[an])&&T.extraData[an].hasOwnProperty("name")&&T.extraData[an].hasOwnProperty("value")){ai.push(e('<input type="hidden" name="'+T.extraData[an].name+'">').val(T.extraData[an].value).appendTo(I)[0])}else{ai.push(e('<input type="hidden" name="'+an+'">').val(T.extraData[an]).appendTo(I)[0])}}}}if(!T.iframeTarget){K.appendTo("body");if(O.attachEvent){O.attachEvent("onload",V)}else{O.addEventListener("load",V,false)}}setTimeout(ak,15);try{I.submit()}catch(al){var am=document.createElement("form").submit;am.apply(I)}}finally{I.setAttribute("action",ah);if(aj){I.setAttribute("target",aj)}else{m.removeAttr("target")}e(ai).remove()}}if(T.forceSync){Y()}else{setTimeout(Y,10)}var ae,af,ac=50,J;function V(an){if(M.aborted||J){return}try{af=Q(O)}catch(aq){d("cannot access response document: ",aq);an=P}if(an===S&&M){M.abort("timeout");ag.reject(M,"timeout");return}else{if(an==P&&M){M.abort("server abort");ag.reject(M,"error","server abort");return}}if(!af||af.location.href==T.iframeSrc){if(!aa){return}}if(O.detachEvent){O.detachEvent("onload",V)}else{O.removeEventListener("load",V,false)}var al="success",ap;try{if(aa){throw"timeout"}var ak=T.dataType=="xml"||af.XMLDocument||e.isXMLDoc(af);d("isXml="+ak);if(!ak&&window.opera&&(af.body===null||!af.body.innerHTML)){if(--ac){d("requeing onLoad callback, DOM not available");setTimeout(V,250);return}}var ar=af.body?af.body:af.documentElement;M.responseText=ar?ar.innerHTML:null;M.responseXML=af.XMLDocument?af.XMLDocument:af;if(ak){T.dataType="xml"}M.getResponseHeader=function(av){var au={"content-type":T.dataType};return au[av]};if(ar){M.status=Number(ar.getAttribute("status"))||M.status;M.statusText=ar.getAttribute("statusText")||M.statusText}var ah=(T.dataType||"").toLowerCase();var ao=/(json|script|text)/.test(ah);if(ao||T.textarea){var am=af.getElementsByTagName("textarea")[0];if(am){M.responseText=am.value;M.status=Number(am.getAttribute("status"))||M.status;M.statusText=am.getAttribute("statusText")||M.statusText}else{if(ao){var ai=af.getElementsByTagName("pre")[0];var at=af.getElementsByTagName("body")[0];if(ai){M.responseText=ai.textContent?ai.textContent:ai.innerText}else{if(at){M.responseText=at.textContent?at.textContent:at.innerText}}}}}else{if(ah=="xml"&&!M.responseXML&&M.responseText){M.responseXML=U(M.responseText)}}try{ae=k(M,ah,T)}catch(aj){al="parsererror";M.error=ap=(aj||al)}}catch(aj){d("error caught: ",aj);al="error";M.error=ap=(aj||al)}if(M.aborted){d("upload aborted");al=null}if(M.status){al=(M.status>=200&&M.status<300||M.status===304)?"success":"error"}if(al==="success"){if(T.success){T.success.call(T.context,ae,"success",M)}ag.resolve(M.responseText,"success",M);if(ab){e.event.trigger("ajaxSuccess",[M,T])}}else{if(al){if(ap===undefined){ap=M.statusText}if(T.error){T.error.call(T.context,M,al,ap)}ag.reject(M,"error",ap);if(ab){e.event.trigger("ajaxError",[M,T,ap])}}}if(ab){e.event.trigger("ajaxComplete",[M,T])}if(ab&&!--e.active){e.event.trigger("ajaxStop")}if(T.complete){T.complete.call(T.context,M,al)}J=true;if(T.timeout){clearTimeout(R)}setTimeout(function(){if(!T.iframeTarget){K.remove()}M.responseXML=null},100)}var U=e.parseXML||function(ah,ai){if(window.ActiveXObject){ai=new ActiveXObject("Microsoft.XMLDOM");ai.async="false";ai.loadXML(ah)}else{ai=(new DOMParser()).parseFromString(ah,"text/xml")}return(ai&&ai.documentElement&&ai.documentElement.nodeName!="parsererror")?ai:null};var q=e.parseJSON||function(ah){return window["eval"]("("+ah+")")};var k=function(am,ak,aj){var ai=am.getResponseHeader("content-type")||"",ah=ak==="xml"||!ak&&ai.indexOf("xml")>=0,al=ah?am.responseXML:am.responseText;if(ah&&al.documentElement.nodeName==="parsererror"){if(e.error){e.error("parsererror")}}if(aj&&aj.dataFilter){al=aj.dataFilter(al,ak)}if(typeof al==="string"){if(ak==="json"||!ak&&ai.indexOf("json")>=0){al=q(al)}else{if(ak==="script"||!ak&&ai.indexOf("javascript")>=0){e.globalEval(al)}}}return al};return ag}};e.fn.ajaxForm=function(f){f=f||{};f.delegation=f.delegation&&e.isFunction(e.fn.on);if(!f.delegation&&this.length===0){var g={s:this.selector,c:this.context};if(!e.isReady&&g.s){d("DOM not ready, queuing ajaxForm");e(function(){e(g.s,g.c).ajaxForm(f)});return this}d("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)"));return this}if(f.delegation){e(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,f,b).on("click.form-plugin",this.selector,f,a);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",f,b).bind("click.form-plugin",f,a)};function b(g){var f=g.data;if(!g.isDefaultPrevented()){g.preventDefault();e(this).ajaxSubmit(f)}}function a(j){var i=j.target;var g=e(i);if(!(g.is("[type=submit],[type=image]"))){var f=g.closest("[type=submit]");if(f.length===0){return}i=f[0]}var h=this;h.clk=i;if(i.type=="image"){if(j.offsetX!==undefined){h.clk_x=j.offsetX;h.clk_y=j.offsetY}else{if(typeof e.fn.offset=="function"){var k=g.offset();h.clk_x=j.pageX-k.left;h.clk_y=j.pageY-k.top}else{h.clk_x=j.pageX-i.offsetLeft;h.clk_y=j.pageY-i.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)}e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};e.fn.formToArray=function(w,f){var u=[];if(this.length===0){return u}var k=this[0];var o=w?k.getElementsByTagName("*"):k.elements;if(!o){return u}var q,p,m,x,l,s,h;for(q=0,s=o.length;q<s;q++){l=o[q];m=l.name;if(!m){continue}if(w&&k.clk&&l.type=="image"){if(!l.disabled&&k.clk==l){u.push({name:m,value:e(l).val(),type:l.type});u.push({name:m+".x",value:k.clk_x},{name:m+".y",value:k.clk_y})}continue}x=e.fieldValue(l,true);if(x&&x.constructor==Array){if(f){f.push(l)}for(p=0,h=x.length;p<h;p++){u.push({name:m,value:x[p]})}}else{if(c.fileapi&&l.type=="file"&&!l.disabled){if(f){f.push(l)}var g=l.files;if(g.length){for(p=0;p<g.length;p++){u.push({name:m,value:g[p],type:l.type})}}else{u.push({name:m,value:"",type:l.type})}}else{if(x!==null&&typeof x!="undefined"){if(f){f.push(l)}u.push({name:m,value:x,type:l.type,required:l.required})}}}}if(!w&&k.clk){var r=e(k.clk),t=r[0];m=t.name;if(m&&!t.disabled&&t.type=="image"){u.push({name:m,value:r.val()});u.push({name:m+".x",value:k.clk_x},{name:m+".y",value:k.clk_y})}}return u};e.fn.formSerialize=function(f){return e.param(this.formToArray(f))};e.fn.fieldSerialize=function(g){var f=[];this.each(function(){var l=this.name;if(!l){return}var j=e.fieldValue(this,g);if(j&&j.constructor==Array){for(var k=0,h=j.length;k<h;k++){f.push({name:l,value:j[k]})}}else{if(j!==null&&typeof j!="undefined"){f.push({name:this.name,value:j})}}});return e.param(f)};e.fn.fieldValue=function(l){for(var k=[],h=0,f=this.length;h<f;h++){var j=this[h];var g=e.fieldValue(j,l);if(g===null||typeof g=="undefined"||(g.constructor==Array&&!g.length)){continue}if(g.constructor==Array){e.merge(k,g)}else{k.push(g)}}return k};e.fieldValue=function(f,m){var h=f.name,s=f.type,u=f.tagName.toLowerCase();if(m===undefined){m=true}if(m&&(!h||f.disabled||s=="reset"||s=="button"||(s=="checkbox"||s=="radio")&&!f.checked||(s=="submit"||s=="image")&&f.form&&f.form.clk!=f||u=="select"&&f.selectedIndex==-1)){return null}if(u=="select"){var o=f.selectedIndex;if(o<0){return null}var q=[],g=f.options;var k=(s=="select-one");var p=(k?o+1:g.length);for(var j=(k?o:0);j<p;j++){var l=g[j];if(l.selected){var r=l.value;if(!r){r=(l.attributes&&l.attributes.value&&!(l.attributes.value.specified))?l.text:l.value}if(k){return r}q.push(r)}}return q}return e(f).val()};e.fn.clearForm=function(f){return this.each(function(){e("input,select,textarea",this).clearFields(f)})};e.fn.clearFields=e.fn.clearInputs=function(f){var g=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,h=this.tagName.toLowerCase();if(g.test(i)||h=="textarea"){this.value=""}else{if(i=="checkbox"||i=="radio"){this.checked=false}else{if(h=="select"){this.selectedIndex=-1}else{if(i=="file"){if(/MSIE/.test(navigator.userAgent)){e(this).replaceWith(e(this).clone())}else{e(this).val("")}}else{if(f){if((f===true&&/hidden/.test(i))||(typeof f=="string"&&e(this).is(f))){this.value=""}}}}}}})};e.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};e.fn.enable=function(f){if(f===undefined){f=true}return this.each(function(){this.disabled=!f})};e.fn.selected=function(f){if(f===undefined){f=true}return this.each(function(){var g=this.type;if(g=="checkbox"||g=="radio"){this.checked=f}else{if(this.tagName.toLowerCase()=="option"){var h=e(this).parent("select");if(f&&h[0]&&h[0].type=="select-one"){h.find("option").selected(false)}this.selected=f}}})};e.fn.ajaxSubmit.debug=false;function d(){if(!e.fn.ajaxSubmit.debug){return}var f="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(f)}else{if(window.opera&&window.opera.postError){window.opera.postError(f)}}}})(jQuery);$(function(){$(".i-bem-auto").each(function(){var b=$(this);var a=b.attr("class").split(/\s+/);$.each(a,function(c,d){if(d!="i-bem-auto"&&d!="i-bem"&&BEM.blocks[d]){b.bem(d)}})})});
/*!
 * jQuery UI Core 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
(function(b,f){var a=0,e=/^ui-id-\d+$/;b.ui=b.ui||{};if(b.ui.version){return}b.extend(b.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({_focus:b.fn.focus,focus:function(g,h){return typeof g==="number"?this.each(function(){var i=this;setTimeout(function(){b(i).focus();if(h){h.call(i)}},g)}):this._focus.apply(this,arguments)},scrollParent:function(){var g;if((b.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){g=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(b.css(this,"position"))&&(/(auto|scroll)/).test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0)}else{g=this.parents().filter(function(){return(/(auto|scroll)/).test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0)}return(/fixed/).test(this.css("position"))||!g.length?b(document):g},zIndex:function(j){if(j!==f){return this.css("zIndex",j)}if(this.length){var h=b(this[0]),g,i;while(h.length&&h[0]!==document){g=h.css("position");if(g==="absolute"||g==="relative"||g==="fixed"){i=parseInt(h.css("zIndex"),10);if(!isNaN(i)&&i!==0){return i}}h=h.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++a)}})},removeUniqueId:function(){return this.each(function(){if(e.test(this.id)){b(this).removeAttr("id")}})}});function d(i,g){var k,j,h,l=i.nodeName.toLowerCase();if("area"===l){k=i.parentNode;j=k.name;if(!i.href||!j||k.nodeName.toLowerCase()!=="map"){return false}h=b("img[usemap=#"+j+"]")[0];return !!h&&c(h)}return(/input|select|textarea|button|object/.test(l)?!i.disabled:"a"===l?i.href||g:g)&&c(i)}function c(g){return b.expr.filters.visible(g)&&!b(g).parents().addBack().filter(function(){return b.css(this,"visibility")==="hidden"}).length}b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(g){return function(h){return !!b.data(h,g)}}):function(j,h,g){return !!b.data(j,g[3])},focusable:function(g){return d(g,!isNaN(b.attr(g,"tabindex")))},tabbable:function(i){var g=b.attr(i,"tabindex"),h=isNaN(g);return(h||g>=0)&&d(i,!h)}});if(!b("<a>").outerWidth(1).jquery){b.each(["Width","Height"],function(j,g){var h=g==="Width"?["Left","Right"]:["Top","Bottom"],k=g.toLowerCase(),m={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};function l(o,n,i,p){b.each(h,function(){n-=parseFloat(b.css(o,"padding"+this))||0;if(i){n-=parseFloat(b.css(o,"border"+this+"Width"))||0}if(p){n-=parseFloat(b.css(o,"margin"+this))||0}});return n}b.fn["inner"+g]=function(i){if(i===f){return m["inner"+g].call(this)}return this.each(function(){b(this).css(k,l(this,i)+"px")})};b.fn["outer"+g]=function(i,n){if(typeof i!=="number"){return m["outer"+g].call(this,i)}return this.each(function(){b(this).css(k,l(this,i,true,n)+"px")})}})}if(!b.fn.addBack){b.fn.addBack=function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}}if(b("<a>").data("a-b","a").removeData("a-b").data("a-b")){b.fn.removeData=(function(g){return function(h){if(arguments.length){return g.call(this,b.camelCase(h))}else{return g.call(this)}}})(b.fn.removeData)}b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.support.selectstart="onselectstart" in document.createElement("div");b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.extend(b.ui,{plugin:{add:function(h,j,l){var g,k=b.ui[h].prototype;for(g in l){k.plugins[g]=k.plugins[g]||[];k.plugins[g].push([j,l[g]])}},call:function(g,j,h){var k,l=g.plugins[j];if(!l||!g.element[0].parentNode||g.element[0].parentNode.nodeType===11){return}for(k=0;k<l.length;k++){if(g.options[l[k][0]]){l[k][1].apply(g.element,h)}}}},hasScroll:function(j,h){if(b(j).css("overflow")==="hidden"){return false}var g=(h&&h==="left")?"scrollLeft":"scrollTop",i=false;if(j[g]>0){return true}j[g]=1;i=(j[g]>0);j[g]=0;return i}})})(jQuery);
/*!
 * jQuery UI Widget 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
(function(b,e){var a=0,d=Array.prototype.slice,c=b.cleanData;b.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){try{b(h).triggerHandler("remove")}catch(j){}}c(f)};b.widget=function(f,g,n){var k,l,i,m,h={},j=f.split(".")[0];f=f.split(".")[1];k=j+"-"+f;if(!n){n=g;g=b.Widget}b.expr[":"][k.toLowerCase()]=function(o){return !!b.data(o,k)};b[j]=b[j]||{};l=b[j][f];i=b[j][f]=function(o,p){if(!this._createWidget){return new i(o,p)}if(arguments.length){this._createWidget(o,p)}};b.extend(i,l,{version:n.version,_proto:b.extend({},n),_childConstructors:[]});m=new g();m.options=b.widget.extend({},m.options);b.each(n,function(p,o){if(!b.isFunction(o)){h[p]=o;return}h[p]=(function(){var q=function(){return g.prototype[p].apply(this,arguments)},r=function(s){return g.prototype[p].apply(this,s)};return function(){var u=this._super,s=this._superApply,t;this._super=q;this._superApply=r;t=o.apply(this,arguments);this._super=u;this._superApply=s;return t}})()});i.prototype=b.widget.extend(m,{widgetEventPrefix:l?m.widgetEventPrefix:f},h,{constructor:i,namespace:j,widgetName:f,widgetFullName:k});if(l){b.each(l._childConstructors,function(p,q){var o=q.prototype;b.widget(o.namespace+"."+o.widgetName,i,q._proto)});delete l._childConstructors}else{g._childConstructors.push(i)}b.widget.bridge(f,i)};b.widget.extend=function(k){var g=d.call(arguments,1),j=0,f=g.length,h,i;for(;j<f;j++){for(h in g[j]){i=g[j][h];if(g[j].hasOwnProperty(h)&&i!==e){if(b.isPlainObject(i)){k[h]=b.isPlainObject(k[h])?b.widget.extend({},k[h],i):b.widget.extend({},i)}else{k[h]=i}}}}return k};b.widget.bridge=function(g,f){var h=f.prototype.widgetFullName||g;b.fn[g]=function(k){var i=typeof k==="string",j=d.call(arguments,1),l=this;k=!i&&j.length?b.widget.extend.apply(null,[k].concat(j)):k;if(i){this.each(function(){var n,m=b.data(this,h);if(!m){return b.error("cannot call methods on "+g+" prior to initialization; attempted to call method '"+k+"'")}if(!b.isFunction(m[k])||k.charAt(0)==="_"){return b.error("no such method '"+k+"' for "+g+" widget instance")}n=m[k].apply(m,j);if(n!==m&&n!==e){l=n&&n.jquery?l.pushStack(n.get()):n;return false}})}else{this.each(function(){var m=b.data(this,h);if(m){m.option(k||{})._init()}else{b.data(this,h,new f(k,this))}})}return l}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(f,g){g=b(g||this.defaultElement||this)[0];this.element=b(g);this.uuid=a++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),f);this.bindings=b();this.hoverable=b();this.focusable=b();if(g!==this){b.data(g,this.widgetFullName,this);this._on(true,this.element,{remove:function(h){if(h.target===g){this.destroy()}}});this.document=b(g.style?g.ownerDocument:g.document||g);this.window=b(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(j,k){var f=j,l,h,g;if(arguments.length===0){return b.widget.extend({},this.options)}if(typeof j==="string"){f={};l=j.split(".");j=l.shift();if(l.length){h=f[j]=b.widget.extend({},this.options[j]);for(g=0;g<l.length-1;g++){h[l[g]]=h[l[g]]||{};h=h[l[g]]}j=l.pop();if(k===e){return h[j]===e?null:h[j]}h[j]=k}else{if(k===e){return this.options[j]===e?null:this.options[j]}f[j]=k}}this._setOptions(f);return this},_setOptions:function(f){var g;for(g in f){this._setOption(g,f[g])}return this},_setOption:function(f,g){this.options[f]=g;if(f==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!g).attr("aria-disabled",g);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(i,h,g){var j,f=this;if(typeof i!=="boolean"){g=h;h=i;i=false}if(!g){g=h;h=this.element;j=this.widget()}else{h=j=b(h);this.bindings=this.bindings.add(h)}b.each(g,function(p,o){function m(){if(!i&&(f.options.disabled===true||b(this).hasClass("ui-state-disabled"))){return}return(typeof o==="string"?f[o]:o).apply(f,arguments)}if(typeof o!=="string"){m.guid=o.guid=o.guid||m.guid||b.guid++}var n=p.match(/^(\w+)\s*(.*)$/),l=n[1]+f.eventNamespace,k=n[2];if(k){j.delegate(k,l,m)}else{h.bind(l,m)}})},_off:function(g,f){f=(f||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;g.unbind(f).undelegate(f)},_delay:function(i,h){function g(){return(typeof i==="string"?f[i]:i).apply(f,arguments)}var f=this;return setTimeout(g,h||0)},_hoverable:function(f){this.hoverable=this.hoverable.add(f);this._on(f,{mouseenter:function(g){b(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){b(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(f){this.focusable=this.focusable.add(f);this._on(f,{focusin:function(g){b(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){b(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(f,g,h){var k,j,i=this.options[f];h=h||{};g=b.Event(g);g.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase();g.target=this.element[0];j=g.originalEvent;if(j){for(k in j){if(!(k in g)){g[k]=j[k]}}}this.element.trigger(g,h);return !(b.isFunction(i)&&i.apply(this.element[0],[g].concat(h))===false||g.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(g,f){b.Widget.prototype["_"+g]=function(j,i,l){if(typeof i==="string"){i={effect:i}}var k,h=!i?g:i===true||typeof i==="number"?f:i.effect||f;i=i||{};if(typeof i==="number"){i={duration:i}}k=!b.isEmptyObject(i);i.complete=l;if(i.delay){j.delay(i.delay)}if(k&&b.effects&&b.effects.effect[h]){j[g](i)}else{if(h!==g&&j[h]){j[h](i.duration,i.easing,l)}else{j.queue(function(m){b(this)[g]();if(l){l.call(j[0])}m()})}}}})})(jQuery);
/*!
 * jQuery UI Mouse 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(b,c){var a=false;b(document).mouseup(function(){a=false});b.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var d=this;this.element.bind("mousedown."+this.widgetName,function(e){return d._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(true===b.data(e.target,d.widgetName+".preventClickEvent")){b.removeData(e.target,d.widgetName+".preventClickEvent");e.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(f){if(a){return}(this._mouseStarted&&this._mouseUp(f));this._mouseDownEvent=f;var e=this,g=(f.which===1),d=(typeof this.options.cancel==="string"&&f.target.nodeName?b(f.target).closest(this.options.cancel).length:false);if(!g||d||!this._mouseCapture(f)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(f)&&this._mouseDelayMet(f)){this._mouseStarted=(this._mouseStart(f)!==false);if(!this._mouseStarted){f.preventDefault();return true}}if(true===b.data(f.target,this.widgetName+".preventClickEvent")){b.removeData(f.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(h){return e._mouseMove(h)};this._mouseUpDelegate=function(h){return e._mouseUp(h)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);f.preventDefault();a=true;return true},_mouseMove:function(d){if(b.ui.ie&&(!document.documentMode||document.documentMode<9)&&!d.button){return this._mouseUp(d)}if(this._mouseStarted){this._mouseDrag(d);return d.preventDefault()}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,d)!==false);(this._mouseStarted?this._mouseDrag(d):this._mouseUp(d))}return !this._mouseStarted},_mouseUp:function(d){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(d.target===this._mouseDownEvent.target){b.data(d.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(d)}return false},_mouseDistanceMet:function(d){return(Math.max(Math.abs(this._mouseDownEvent.pageX-d.pageX),Math.abs(this._mouseDownEvent.pageY-d.pageY))>=this.options.distance)},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
/*!
 * jQuery UI Position 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(e,c){e.ui=e.ui||{};var j,k=Math.max,o=Math.abs,m=Math.round,d=/left|center|right/,h=/top|center|bottom/,a=/[\+\-]\d+%?/,l=/^\w+/,b=/%$/,g=e.fn.position;function n(r,q,p){return[parseInt(r[0],10)*(b.test(r[0])?q/100:1),parseInt(r[1],10)*(b.test(r[1])?p/100:1)]}function i(p,q){return parseInt(e.css(p,q),10)||0}function f(q){var p=q[0];if(p.nodeType===9){return{width:q.width(),height:q.height(),offset:{top:0,left:0}}}if(e.isWindow(p)){return{width:q.width(),height:q.height(),offset:{top:q.scrollTop(),left:q.scrollLeft()}}}if(p.preventDefault){return{width:0,height:0,offset:{top:p.pageY,left:p.pageX}}}return{width:q.outerWidth(),height:q.outerHeight(),offset:q.offset()}}e.position={scrollbarWidth:function(){if(j!==c){return j}var q,p,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=s.children()[0];e("body").append(s);q=r.offsetWidth;s.css("overflow","scroll");p=r.offsetWidth;if(q===p){p=s[0].clientWidth}s.remove();return(j=q-p)},getScrollInfo:function(t){var s=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),q=s==="scroll"||(s==="auto"&&t.width<t.element[0].scrollWidth),p=r==="scroll"||(r==="auto"&&t.height<t.element[0].scrollHeight);return{width:q?e.position.scrollbarWidth():0,height:p?e.position.scrollbarWidth():0}},getWithinInfo:function(q){var r=e(q||window),p=e.isWindow(r[0]);return{element:r,isWindow:p,offset:r.offset()||{left:0,top:0},scrollLeft:r.scrollLeft(),scrollTop:r.scrollTop(),width:p?r.width():r.outerWidth(),height:p?r.height():r.outerHeight()}}};e.fn.position=function(z){if(!z||!z.of){return g.apply(this,arguments)}z=e.extend({},z);var A,w,u,y,t,p,v=e(z.of),s=e.position.getWithinInfo(z.within),q=e.position.getScrollInfo(s),x=(z.collision||"flip").split(" "),r={};p=f(v);if(v[0].preventDefault){z.at="left top"}w=p.width;u=p.height;y=p.offset;t=e.extend({},y);e.each(["my","at"],function(){var D=(z[this]||"").split(" "),C,B;if(D.length===1){D=d.test(D[0])?D.concat(["center"]):h.test(D[0])?["center"].concat(D):["center","center"]}D[0]=d.test(D[0])?D[0]:"center";D[1]=h.test(D[1])?D[1]:"center";C=a.exec(D[0]);B=a.exec(D[1]);r[this]=[C?C[0]:0,B?B[0]:0];z[this]=[l.exec(D[0])[0],l.exec(D[1])[0]]});if(x.length===1){x[1]=x[0]}if(z.at[0]==="right"){t.left+=w}else{if(z.at[0]==="center"){t.left+=w/2}}if(z.at[1]==="bottom"){t.top+=u}else{if(z.at[1]==="center"){t.top+=u/2}}A=n(r.at,w,u);t.left+=A[0];t.top+=A[1];return this.each(function(){var C,L,E=e(this),G=E.outerWidth(),D=E.outerHeight(),F=i(this,"marginLeft"),B=i(this,"marginTop"),K=G+F+i(this,"marginRight")+q.width,J=D+B+i(this,"marginBottom")+q.height,H=e.extend({},t),I=n(r.my,E.outerWidth(),E.outerHeight());if(z.my[0]==="right"){H.left-=G}else{if(z.my[0]==="center"){H.left-=G/2}}if(z.my[1]==="bottom"){H.top-=D}else{if(z.my[1]==="center"){H.top-=D/2}}H.left+=I[0];H.top+=I[1];if(!e.support.offsetFractions){H.left=m(H.left);H.top=m(H.top)}C={marginLeft:F,marginTop:B};e.each(["left","top"],function(N,M){if(e.ui.position[x[N]]){e.ui.position[x[N]][M](H,{targetWidth:w,targetHeight:u,elemWidth:G,elemHeight:D,collisionPosition:C,collisionWidth:K,collisionHeight:J,offset:[A[0]+I[0],A[1]+I[1]],my:z.my,at:z.at,within:s,elem:E})}});if(z.using){L=function(P){var R=y.left-H.left,O=R+w-G,Q=y.top-H.top,N=Q+u-D,M={target:{element:v,left:y.left,top:y.top,width:w,height:u},element:{element:E,left:H.left,top:H.top,width:G,height:D},horizontal:O<0?"left":R>0?"right":"center",vertical:N<0?"top":Q>0?"bottom":"middle"};if(w<G&&o(R+O)<w){M.horizontal="center"}if(u<D&&o(Q+N)<u){M.vertical="middle"}if(k(o(R),o(O))>k(o(Q),o(N))){M.important="horizontal"}else{M.important="vertical"}z.using.call(this,P,M)}}E.offset(e.extend(H,{using:L}))})};e.ui.position={fit:{left:function(t,s){var r=s.within,v=r.isWindow?r.scrollLeft:r.offset.left,x=r.width,u=t.left-s.collisionPosition.marginLeft,w=v-u,q=u+s.collisionWidth-x-v,p;if(s.collisionWidth>x){if(w>0&&q<=0){p=t.left+w+s.collisionWidth-x-v;t.left+=w-p}else{if(q>0&&w<=0){t.left=v}else{if(w>q){t.left=v+x-s.collisionWidth}else{t.left=v}}}}else{if(w>0){t.left+=w}else{if(q>0){t.left-=q}else{t.left=k(t.left-u,t.left)}}}},top:function(s,r){var q=r.within,w=q.isWindow?q.scrollTop:q.offset.top,x=r.within.height,u=s.top-r.collisionPosition.marginTop,v=w-u,t=u+r.collisionHeight-x-w,p;if(r.collisionHeight>x){if(v>0&&t<=0){p=s.top+v+r.collisionHeight-x-w;s.top+=v-p}else{if(t>0&&v<=0){s.top=w}else{if(v>t){s.top=w+x-r.collisionHeight}else{s.top=w}}}}else{if(v>0){s.top+=v}else{if(t>0){s.top-=t}else{s.top=k(s.top-u,s.top)}}}}},flip:{left:function(v,u){var t=u.within,z=t.offset.left+t.scrollLeft,C=t.width,r=t.isWindow?t.scrollLeft:t.offset.left,w=v.left-u.collisionPosition.marginLeft,A=w-r,q=w+u.collisionWidth-C-r,y=u.my[0]==="left"?-u.elemWidth:u.my[0]==="right"?u.elemWidth:0,B=u.at[0]==="left"?u.targetWidth:u.at[0]==="right"?-u.targetWidth:0,s=-2*u.offset[0],p,x;if(A<0){p=v.left+y+B+s+u.collisionWidth-C-z;if(p<0||p<o(A)){v.left+=y+B+s}}else{if(q>0){x=v.left-u.collisionPosition.marginLeft+y+B+s-r;if(x>0||o(x)<q){v.left+=y+B+s}}}},top:function(u,t){var s=t.within,B=s.offset.top+s.scrollTop,C=s.height,p=s.isWindow?s.scrollTop:s.offset.top,w=u.top-t.collisionPosition.marginTop,y=w-p,v=w+t.collisionHeight-C-p,z=t.my[1]==="top",x=z?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,D=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,r=-2*t.offset[1],A,q;if(y<0){q=u.top+x+D+r+t.collisionHeight-C-B;if((u.top+x+D+r)>y&&(q<0||q<o(y))){u.top+=x+D+r}}else{if(v>0){A=u.top-t.collisionPosition.marginTop+x+D+r-p;if((u.top+x+D+r)>v&&(A>0||o(A)<v)){u.top+=x+D+r}}}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments);e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}};(function(){var t,v,q,s,r,p=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(p?"div":"body");q={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(p){e.extend(q,{position:"absolute",left:"-1000px",top:"-1000px"})}for(r in q){t.style[r]=q[r]}t.appendChild(u);v=p||document.documentElement;v.insertBefore(t,v.firstChild);u.style.cssText="position: absolute; left: 10.7432222px;";s=e(u).offset().left;e.support.offsetFractions=s>10&&s<11;t.innerHTML="";v.removeChild(t)})()}(jQuery));
/*!
 * jQuery UI Draggable 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(a,b){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}if(this.options.addClasses){this.element.addClass("ui-draggable")}if(this.options.disabled){this.element.addClass("ui-draggable-disabled")}this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(c){var d=this.options;if(this.helper||d.disabled||a(c.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(c);if(!this.handle){return false}a(d.iframeFix===true?"iframe":d.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(c){var d=this.options;this.helper=this._createHelper(c);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(c);this.originalPageX=c.pageX;this.originalPageY=c.pageY;(d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt));if(d.containment){this._setContainment()}if(this._trigger("start",c)===false){this._clear();return false}this._cacheHelperProportions();if(a.ui.ddmanager&&!d.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,c)}this._mouseDrag(c,true);if(a.ui.ddmanager){a.ui.ddmanager.dragStart(this,c)}return true},_mouseDrag:function(c,e){this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");if(!e){var d=this._uiHash();if(this._trigger("drag",c,d)===false){this._mouseUp({});return false}this.position=d.position}if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}if(a.ui.ddmanager){a.ui.ddmanager.drag(this,c)}return false},_mouseStop:function(e){var c,d=this,g=false,f=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){f=a.ui.ddmanager.drop(this,e)}if(this.dropped){f=this.dropped;this.dropped=false}c=this.element[0];while(c&&(c=c.parentNode)){if(c===document){g=true}}if(!g&&this.options.helper==="original"){return false}if((this.options.revert==="invalid"&&!f)||(this.options.revert==="valid"&&f)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,f))){a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(d._trigger("stop",e)!==false){d._clear()}})}else{if(this._trigger("stop",e)!==false){this._clear()}}return false},_mouseUp:function(c){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});if(a.ui.ddmanager){a.ui.ddmanager.dragStop(this,c)}return a.ui.mouse.prototype._mouseUp.call(this,c)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(c){var d=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").addBack().each(function(){if(this===c.target){d=true}});return d},_createHelper:function(d){var e=this.options,c=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[d])):(e.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!c.parents("body").length){c.appendTo((e.appendTo==="parent"?this.element[0].parentNode:e.appendTo))}if(c[0]!==this.element[0]&&!(/(fixed|absolute)/).test(c.css("position"))){c.css("position","absolute")}return c},_adjustOffsetFromHelper:function(c){if(typeof c==="string"){c=c.split(" ")}if(a.isArray(c)){c={left:+c[0],top:+c[1]||0}}if("left" in c){this.offset.click.left=c.left+this.margins.left}if("right" in c){this.offset.click.left=this.helperProportions.width-c.right+this.margins.left}if("top" in c){this.offset.click.top=c.top+this.margins.top}if("bottom" in c){this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])){c.left+=this.scrollParent.scrollLeft();c.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]===document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&a.ui.ie)){c={top:0,left:0}}return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var c=this.element.position();return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,g,d,f=this.options;if(f.containment==="parent"){f.containment=this.helper[0].parentNode}if(f.containment==="document"||f.containment==="window"){this.containment=[f.containment==="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,f.containment==="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(f.containment==="document"?0:a(window).scrollLeft())+a(f.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(f.containment==="document"?0:a(window).scrollTop())+(a(f.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(f.containment)&&f.containment.constructor!==Array){g=a(f.containment);d=g[0];if(!d){return}e=(a(d).css("overflow")!=="hidden");this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=g}else{if(f.containment.constructor===Array){this.containment=f.containment}}},_convertPositionTo:function(f,h){if(!h){h=this.position}var e=f==="absolute"?1:-1,c=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=(/(html|body)/i).test(c[0].tagName);return{top:(h.top+this.offset.relative.top*e+this.offset.parent.top*e-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(g?0:c.scrollTop()))*e)),left:(h.left+this.offset.relative.left*e+this.offset.parent.left*e-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():g?0:c.scrollLeft())*e))}},_generatePosition:function(d){var c,j,k,f,e=this.options,l=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=(/(html|body)/i).test(l[0].tagName),h=d.pageX,g=d.pageY;if(this.originalPosition){if(this.containment){if(this.relative_container){j=this.relative_container.offset();c=[this.containment[0]+j.left,this.containment[1]+j.top,this.containment[2]+j.left,this.containment[3]+j.top]}else{c=this.containment}if(d.pageX-this.offset.click.left<c[0]){h=c[0]+this.offset.click.left}if(d.pageY-this.offset.click.top<c[1]){g=c[1]+this.offset.click.top}if(d.pageX-this.offset.click.left>c[2]){h=c[2]+this.offset.click.left}if(d.pageY-this.offset.click.top>c[3]){g=c[3]+this.offset.click.top}}if(e.grid){k=e.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY;g=c?((k-this.offset.click.top>=c[1]||k-this.offset.click.top>c[3])?k:((k-this.offset.click.top>=c[1])?k-e.grid[1]:k+e.grid[1])):k;f=e.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/e.grid[0])*e.grid[0]:this.originalPageX;h=c?((f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2])?f:((f-this.offset.click.left>=c[0])?f-e.grid[0]:f+e.grid[0])):f}}return{top:(g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(i?0:l.scrollTop())))),left:(h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():i?0:l.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(c,d,e){e=e||this._uiHash();a.ui.plugin.call(this,c,[d,e]);if(c==="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.Widget.prototype._trigger.call(this,c,d,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(d,f){var e=a(this).data("ui-draggable"),g=e.options,c=a.extend({},f,{item:e.element});e.sortables=[];a(g.connectToSortable).each(function(){var h=a.data(this,"ui-sortable");if(h&&!h.options.disabled){e.sortables.push({instance:h,shouldRevert:h.options.revert});h.refreshPositions();h._trigger("activate",d,c)}})},stop:function(d,f){var e=a(this).data("ui-draggable"),c=a.extend({},f,{item:e.element});a.each(e.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;e.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(d);this.instance.options.helper=this.instance.options._helper;if(e.options.helper==="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",d,c)}})},drag:function(d,f){var e=a(this).data("ui-draggable"),c=this;a.each(e.sortables,function(){var g=false,h=this;this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){g=true;a.each(e.sortables,function(){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this!==h&&this.instance._intersectsWith(this.instance.containerCache)&&a.ui.contains(h.instance.element[0],this.instance.element[0])){g=false}return g})}if(g){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(c).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return f.helper[0]};d.target=this.instance.currentItem[0];this.instance._mouseCapture(d,true);this.instance._mouseStart(d,true,true);this.instance.offset.click.top=e.offset.click.top;this.instance.offset.click.left=e.offset.click.left;this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top;e._trigger("toSortable",d);e.dropped=this.instance.element;e.currentItem=e.element;this.instance.fromOutside=e}if(this.instance.currentItem){this.instance._mouseDrag(d)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",d,this.instance._uiHash(this.instance));this.instance._mouseStop(d,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}e._trigger("fromSortable",d);e.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var c=a("body"),d=a(this).data("ui-draggable").options;if(c.css("cursor")){d._cursor=c.css("cursor")}c.css("cursor",d.cursor)},stop:function(){var c=a(this).data("ui-draggable").options;if(c._cursor){a("body").css("cursor",c._cursor)}}});a.ui.plugin.add("draggable","opacity",{start:function(d,e){var c=a(e.helper),f=a(this).data("ui-draggable").options;if(c.css("opacity")){f._opacity=c.css("opacity")}c.css("opacity",f.opacity)},stop:function(c,d){var e=a(this).data("ui-draggable").options;if(e._opacity){a(d.helper).css("opacity",e._opacity)}}});a.ui.plugin.add("draggable","scroll",{start:function(){var c=a(this).data("ui-draggable");if(c.scrollParent[0]!==document&&c.scrollParent[0].tagName!=="HTML"){c.overflowOffset=c.scrollParent.offset()}},drag:function(e){var d=a(this).data("ui-draggable"),f=d.options,c=false;if(d.scrollParent[0]!==document&&d.scrollParent[0].tagName!=="HTML"){if(!f.axis||f.axis!=="x"){if((d.overflowOffset.top+d.scrollParent[0].offsetHeight)-e.pageY<f.scrollSensitivity){d.scrollParent[0].scrollTop=c=d.scrollParent[0].scrollTop+f.scrollSpeed}else{if(e.pageY-d.overflowOffset.top<f.scrollSensitivity){d.scrollParent[0].scrollTop=c=d.scrollParent[0].scrollTop-f.scrollSpeed}}}if(!f.axis||f.axis!=="y"){if((d.overflowOffset.left+d.scrollParent[0].offsetWidth)-e.pageX<f.scrollSensitivity){d.scrollParent[0].scrollLeft=c=d.scrollParent[0].scrollLeft+f.scrollSpeed}else{if(e.pageX-d.overflowOffset.left<f.scrollSensitivity){d.scrollParent[0].scrollLeft=c=d.scrollParent[0].scrollLeft-f.scrollSpeed}}}}else{if(!f.axis||f.axis!=="x"){if(e.pageY-a(document).scrollTop()<f.scrollSensitivity){c=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed)}else{if(a(window).height()-(e.pageY-a(document).scrollTop())<f.scrollSensitivity){c=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed)}}}if(!f.axis||f.axis!=="y"){if(e.pageX-a(document).scrollLeft()<f.scrollSensitivity){c=a(document).scrollLeft(a(document).scrollLeft()-f.scrollSpeed)}else{if(a(window).width()-(e.pageX-a(document).scrollLeft())<f.scrollSensitivity){c=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed)}}}}if(c!==false&&a.ui.ddmanager&&!f.dropBehaviour){a.ui.ddmanager.prepareOffsets(d,e)}}});a.ui.plugin.add("draggable","snap",{start:function(){var c=a(this).data("ui-draggable"),d=c.options;c.snapElements=[];a(d.snap.constructor!==String?(d.snap.items||":data(ui-draggable)"):d.snap).each(function(){var f=a(this),e=f.offset();if(this!==c.element[0]){c.snapElements.push({item:this,width:f.outerWidth(),height:f.outerHeight(),top:e.top,left:e.left})}})},drag:function(u,p){var c,z,j,k,s,n,m,A,v,h,g=a(this).data("ui-draggable"),q=g.options,y=q.snapTolerance,x=p.offset.left,w=x+g.helperProportions.width,f=p.offset.top,e=f+g.helperProportions.height;for(v=g.snapElements.length-1;v>=0;v--){s=g.snapElements[v].left;n=s+g.snapElements[v].width;m=g.snapElements[v].top;A=m+g.snapElements[v].height;if(!((s-y<x&&x<n+y&&m-y<f&&f<A+y)||(s-y<x&&x<n+y&&m-y<e&&e<A+y)||(s-y<w&&w<n+y&&m-y<f&&f<A+y)||(s-y<w&&w<n+y&&m-y<e&&e<A+y))){if(g.snapElements[v].snapping){(g.options.snap.release&&g.options.snap.release.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})))}g.snapElements[v].snapping=false;continue}if(q.snapMode!=="inner"){c=Math.abs(m-e)<=y;z=Math.abs(A-f)<=y;j=Math.abs(s-w)<=y;k=Math.abs(n-x)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m-g.helperProportions.height,left:0}).top-g.margins.top}if(z){p.position.top=g._convertPositionTo("relative",{top:A,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s-g.helperProportions.width}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n}).left-g.margins.left}}h=(c||z||j||k);if(q.snapMode!=="outer"){c=Math.abs(m-f)<=y;z=Math.abs(A-e)<=y;j=Math.abs(s-x)<=y;k=Math.abs(n-w)<=y;if(c){p.position.top=g._convertPositionTo("relative",{top:m,left:0}).top-g.margins.top}if(z){p.position.top=g._convertPositionTo("relative",{top:A-g.helperProportions.height,left:0}).top-g.margins.top}if(j){p.position.left=g._convertPositionTo("relative",{top:0,left:s}).left-g.margins.left}if(k){p.position.left=g._convertPositionTo("relative",{top:0,left:n-g.helperProportions.width}).left-g.margins.left}}if(!g.snapElements[v].snapping&&(c||z||j||k||h)){(g.options.snap.snap&&g.options.snap.snap.call(g.element,u,a.extend(g._uiHash(),{snapItem:g.snapElements[v].item})))}g.snapElements[v].snapping=(c||z||j||k||h)}}});a.ui.plugin.add("draggable","stack",{start:function(){var c,e=a(this).data("ui-draggable").options,d=a.makeArray(a(e.stack)).sort(function(g,f){return(parseInt(a(g).css("zIndex"),10)||0)-(parseInt(a(f).css("zIndex"),10)||0)});if(!d.length){return}c=parseInt(d[0].style.zIndex,10)||0;a(d).each(function(f){this.style.zIndex=c+f});this[0].style.zIndex=c+d.length}});a.ui.plugin.add("draggable","zIndex",{start:function(d,e){var c=a(e.helper),f=a(this).data("ui-draggable").options;if(c.css("zIndex")){f._zIndex=c.css("zIndex")}c.css("zIndex",f.zIndex)},stop:function(c,d){var e=a(this).data("ui-draggable").options;if(e._zIndex){a(d.helper).css("zIndex",e._zIndex)}}})})(jQuery);
/*!
 * jQuery UI Droppable 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
(function(b,c){function a(e,d,f){return(e>d)&&(e<(d+f))}b.widget("ui.droppable",{version:"1.10.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e=this.options,d=e.accept;this.isover=false;this.isout=true;this.accept=b.isFunction(d)?d:function(f){return f.is(d)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};b.ui.ddmanager.droppables[e.scope]=b.ui.ddmanager.droppables[e.scope]||[];b.ui.ddmanager.droppables[e.scope].push(this);(e.addClasses&&this.element.addClass("ui-droppable"))},_destroy:function(){var e=0,d=b.ui.ddmanager.droppables[this.options.scope];for(;e<d.length;e++){if(d[e]===this){d.splice(e,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(d,e){if(d==="accept"){this.accept=b.isFunction(e)?e:function(f){return f.is(e)}}b.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var d=b.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}if(d){this._trigger("activate",e,this.ui(d))}},_deactivate:function(e){var d=b.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(d){this._trigger("deactivate",e,this.ui(d))}},_over:function(e){var d=b.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],(d.currentItem||d.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",e,this.ui(d))}},_out:function(e){var d=b.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]===this.element[0]){return}if(this.accept.call(this.element[0],(d.currentItem||d.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",e,this.ui(d))}},_drop:function(e,f){var d=f||b.ui.ddmanager.current,g=false;if(!d||(d.currentItem||d.element)[0]===this.element[0]){return false}this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var h=b.data(this,"ui-droppable");if(h.options.greedy&&!h.options.disabled&&h.options.scope===d.options.scope&&h.accept.call(h.element[0],(d.currentItem||d.element))&&b.ui.intersect(d,b.extend(h,{offset:h.element.offset()}),h.options.tolerance)){g=true;return false}});if(g){return false}if(this.accept.call(this.element[0],(d.currentItem||d.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",e,this.ui(d));return this.element}return false},ui:function(d){return{draggable:(d.currentItem||d.element),helper:d.helper,position:d.position,offset:d.positionAbs}}});b.ui.intersect=function(q,j,o){if(!j.offset){return false}var h,i,f=(q.positionAbs||q.position.absolute).left,e=f+q.helperProportions.width,n=(q.positionAbs||q.position.absolute).top,m=n+q.helperProportions.height,g=j.offset.left,d=g+j.proportions.width,p=j.offset.top,k=p+j.proportions.height;switch(o){case"fit":return(g<=f&&e<=d&&p<=n&&m<=k);case"intersect":return(g<f+(q.helperProportions.width/2)&&e-(q.helperProportions.width/2)<d&&p<n+(q.helperProportions.height/2)&&m-(q.helperProportions.height/2)<k);case"pointer":h=((q.positionAbs||q.position.absolute).left+(q.clickOffset||q.offset.click).left);i=((q.positionAbs||q.position.absolute).top+(q.clickOffset||q.offset.click).top);return a(i,p,j.proportions.height)&&a(h,g,j.proportions.width);case"touch":return((n>=p&&n<=k)||(m>=p&&m<=k)||(n<p&&m>k))&&((f>=g&&f<=d)||(e>=g&&e<=d)||(f<g&&e>d));default:return false}};b.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(g,k){var f,e,d=b.ui.ddmanager.droppables[g.options.scope]||[],h=k?k.type:null,l=(g.currentItem||g.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(f=0;f<d.length;f++){if(d[f].options.disabled||(g&&!d[f].accept.call(d[f].element[0],(g.currentItem||g.element)))){continue}for(e=0;e<l.length;e++){if(l[e]===d[f].element[0]){d[f].proportions.height=0;continue droppablesLoop}}d[f].visible=d[f].element.css("display")!=="none";if(!d[f].visible){continue}if(h==="mousedown"){d[f]._activate.call(d[f],k)}d[f].offset=d[f].element.offset();d[f].proportions={width:d[f].element[0].offsetWidth,height:d[f].element[0].offsetHeight}}},drop:function(d,e){var f=false;b.each(b.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&b.ui.intersect(d,this,this.options.tolerance)){f=this._drop.call(this,e)||f}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(d.currentItem||d.element))){this.isout=true;this.isover=false;this._deactivate.call(this,e)}});return f},dragStart:function(d,e){d.element.parentsUntil("body").bind("scroll.droppable",function(){if(!d.options.refreshPositions){b.ui.ddmanager.prepareOffsets(d,e)}})},drag:function(d,e){if(d.options.refreshPositions){b.ui.ddmanager.prepareOffsets(d,e)}b.each(b.ui.ddmanager.droppables[d.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var i,g,f,h=b.ui.intersect(d,this,this.options.tolerance),j=!h&&this.isover?"isout":(h&&!this.isover?"isover":null);if(!j){return}if(this.options.greedy){g=this.options.scope;f=this.element.parents(":data(ui-droppable)").filter(function(){return b.data(this,"ui-droppable").options.scope===g});if(f.length){i=b.data(f[0],"ui-droppable");i.greedyChild=(j==="isover")}}if(i&&j==="isover"){i.isover=false;i.isout=true;i._out.call(i,e)}this[j]=true;this[j==="isout"?"isover":"isout"]=false;this[j==="isover"?"_over":"_out"].call(this,e);if(i&&j==="isout"){i.isout=false;i.isover=true;i._over.call(i,e)}})},dragStop:function(d,e){d.element.parentsUntil("body").unbind("scroll.droppable");if(!d.options.refreshPositions){b.ui.ddmanager.prepareOffsets(d,e)}}}})(jQuery);
/*!
 * jQuery UI Sortable 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(b,c){function a(e,d,f){return(e>d)&&(e<(d+f))}b.widget("ui.sortable",b.ui.mouse,{version:"1.10.0",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var d=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?d.axis==="x"||(/left|right/).test(this.items[0].item.css("float"))||(/inline|table-cell/).test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit();this.ready=true},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var d=this.items.length-1;d>=0;d--){this.items[d].item.removeData(this.widgetName+"-item")}return this},_setOption:function(d,e){if(d==="disabled"){this.options[d]=e;this.widget().toggleClass("ui-sortable-disabled",!!e)}else{b.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(f,g){var d=null,h=false,e=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(f);b(f.target).parents().each(function(){if(b.data(this,e.widgetName+"-item")===e){d=b(this);return false}});if(b.data(f.target,e.widgetName+"-item")===e){d=b(f.target)}if(!d){return false}if(this.options.handle&&!g){b(this.options.handle,d).find("*").addBack().each(function(){if(this===f.target){h=true}});if(!h){return false}}this.currentItem=d;this._removeCurrentsFromItems();return true},_mouseStart:function(f,g,d){var e,h=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(f);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:f.pageX-this.offset.left,top:f.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(f);this.originalPageX=f.pageX;this.originalPageY=f.pageY;(h.cursorAt&&this._adjustOffsetFromHelper(h.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(h.containment){this._setContainment()}if(h.cursor){if(b("body").css("cursor")){this._storedCursor=b("body").css("cursor")}b("body").css("cursor",h.cursor)}if(h.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",h.opacity)}if(h.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",h.zIndex)}if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",f,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!d){for(e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("activate",f,this._uiHash(this))}}if(b.ui.ddmanager){b.ui.ddmanager.current=this}if(b.ui.ddmanager&&!h.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,f)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(f);return true},_mouseDrag:function(h){var f,g,e,k,j=this.options,d=false;this.position=this._generatePosition(h);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-h.pageY<j.scrollSensitivity){this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+j.scrollSpeed}else{if(h.pageY-this.overflowOffset.top<j.scrollSensitivity){this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-j.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-h.pageX<j.scrollSensitivity){this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+j.scrollSpeed}else{if(h.pageX-this.overflowOffset.left<j.scrollSensitivity){this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-j.scrollSpeed}}}else{if(h.pageY-b(document).scrollTop()<j.scrollSensitivity){d=b(document).scrollTop(b(document).scrollTop()-j.scrollSpeed)}else{if(b(window).height()-(h.pageY-b(document).scrollTop())<j.scrollSensitivity){d=b(document).scrollTop(b(document).scrollTop()+j.scrollSpeed)}}if(h.pageX-b(document).scrollLeft()<j.scrollSensitivity){d=b(document).scrollLeft(b(document).scrollLeft()-j.scrollSpeed)}else{if(b(window).width()-(h.pageX-b(document).scrollLeft())<j.scrollSensitivity){d=b(document).scrollLeft(b(document).scrollLeft()+j.scrollSpeed)}}}if(d!==false&&b.ui.ddmanager&&!j.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,h)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(f=this.items.length-1;f>=0;f--){g=this.items[f];e=g.item[0];k=this._intersectsWithPointer(g);if(!k){continue}if(g.instance!==this.currentContainer){continue}if(e!==this.currentItem[0]&&this.placeholder[k===1?"next":"prev"]()[0]!==e&&!b.contains(this.placeholder[0],e)&&(this.options.type==="semi-dynamic"?!b.contains(this.element[0],e):true)){this.direction=k===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(g)){this._rearrange(h,g)}else{break}this._trigger("change",h,this._uiHash());break}}this._contactContainers(h);if(b.ui.ddmanager){b.ui.ddmanager.drag(this,h)}this._trigger("sort",h,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(e,f){if(!e){return}if(b.ui.ddmanager&&!this.options.dropBehaviour){b.ui.ddmanager.drop(this,e)}if(this.options.revert){var d=this,g=this.placeholder.offset();this.reverting=true;b(this.helper).animate({left:g.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:g.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(e)})}else{this._clear(e,f)}return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var d=this.containers.length-1;d>=0;d--){this.containers[d]._trigger("deactivate",null,this._uiHash(this));if(this.containers[d].containerCache.over){this.containers[d]._trigger("out",null,this._uiHash(this));this.containers[d].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}b.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){b(this.domPosition.prev).after(this.currentItem)}else{b(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(f){var d=this._getItemsAsjQuery(f&&f.connected),e=[];f=f||{};b(d).each(function(){var g=(b(f.item||this).attr(f.attribute||"id")||"").match(f.expression||(/(.+)[\-=_](.+)/));if(g){e.push((f.key||g[1]+"[]")+"="+(f.key&&f.expression?g[1]:g[2]))}});if(!e.length&&f.key){e.push(f.key+"=")}return e.join("&")},toArray:function(f){var d=this._getItemsAsjQuery(f&&f.connected),e=[];f=f||{};d.each(function(){e.push(b(f.item||this).attr(f.attribute||"id")||"")});return e},_intersectsWith:function(n){var f=this.positionAbs.left,e=f+this.helperProportions.width,m=this.positionAbs.top,k=m+this.helperProportions.height,g=n.left,d=g+n.width,o=n.top,j=o+n.height,p=this.offset.click.top,i=this.offset.click.left,h=(m+p)>o&&(m+p)<j&&(f+i)>g&&(f+i)<d;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>n[this.floating?"width":"height"])){return h}else{return(g<f+(this.helperProportions.width/2)&&e-(this.helperProportions.width/2)<d&&o<m+(this.helperProportions.height/2)&&k-(this.helperProportions.height/2)<j)}},_intersectsWithPointer:function(f){var g=(this.options.axis==="x")||a(this.positionAbs.top+this.offset.click.top,f.top,f.height),e=(this.options.axis==="y")||a(this.positionAbs.left+this.offset.click.left,f.left,f.width),i=g&&e,d=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();if(!i){return false}return this.floating?(((h&&h==="right")||d==="down")?2:1):(d&&(d==="down"?2:1))},_intersectsWithSides:function(g){var e=a(this.positionAbs.top+this.offset.click.top,g.top+(g.height/2),g.height),f=a(this.positionAbs.left+this.offset.click.left,g.left+(g.width/2),g.width),d=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();if(this.floating&&h){return((h==="right"&&f)||(h==="left"&&!f))}else{return d&&((d==="down"&&e)||(d==="up"&&!e))}},_getDragVerticalDirection:function(){var d=this.positionAbs.top-this.lastPositionAbs.top;return d!==0&&(d>0?"down":"up")},_getDragHorizontalDirection:function(){var d=this.positionAbs.left-this.lastPositionAbs.left;return d!==0&&(d>0?"right":"left")},refresh:function(d){this._refreshItems(d);this.refreshPositions();return this},_connectWith:function(){var d=this.options;return d.connectWith.constructor===String?[d.connectWith]:d.connectWith},_getItemsAsjQuery:function(k){var g,f,m,l,d=[],e=[],h=this._connectWith();if(h&&k){for(g=h.length-1;g>=0;g--){m=b(h[g]);for(f=m.length-1;f>=0;f--){l=b.data(m[f],this.widgetFullName);if(l&&l!==this&&!l.options.disabled){e.push([b.isFunction(l.options.items)?l.options.items.call(l.element):b(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}}}}e.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(g=e.length-1;g>=0;g--){e[g][0].each(function(){d.push(this)})}return b(d)},_removeCurrentsFromItems:function(){var d=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=b.grep(this.items,function(f){for(var e=0;e<d.length;e++){if(d[e]===f.item[0]){return false}}return true})},_refreshItems:function(d){this.items=[];this.containers=[this];var h,f,o,k,n,e,q,p,l=this.items,g=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],d,{item:this.currentItem}):b(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready){for(h=m.length-1;h>=0;h--){o=b(m[h]);for(f=o.length-1;f>=0;f--){k=b.data(o[f],this.widgetFullName);if(k&&k!==this&&!k.options.disabled){g.push([b.isFunction(k.options.items)?k.options.items.call(k.element[0],d,{item:this.currentItem}):b(k.options.items,k.element),k]);this.containers.push(k)}}}}for(h=g.length-1;h>=0;h--){n=g[h][1];e=g[h][0];for(f=0,p=e.length;f<p;f++){q=b(e[f]);q.data(this.widgetName+"-item",n);l.push({item:q,instance:n,width:0,height:0,left:0,top:0})}}},refreshPositions:function(d){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var f,g,e,h;for(f=this.items.length-1;f>=0;f--){g=this.items[f];if(g.instance!==this.currentContainer&&this.currentContainer&&g.item[0]!==this.currentItem[0]){continue}e=this.options.toleranceElement?b(this.options.toleranceElement,g.item):g.item;if(!d){g.width=e.outerWidth();g.height=e.outerHeight()}h=e.offset();g.left=h.left;g.top=h.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(f=this.containers.length-1;f>=0;f--){h=this.containers[f].element.offset();this.containers[f].containerCache.left=h.left;this.containers[f].containerCache.top=h.top;this.containers[f].containerCache.width=this.containers[f].element.outerWidth();this.containers[f].containerCache.height=this.containers[f].element.outerHeight()}}return this},_createPlaceholder:function(e){e=e||this;var d,f=e.options;if(!f.placeholder||f.placeholder.constructor===String){d=f.placeholder;f.placeholder={element:function(){var g=b(document.createElement(e.currentItem[0].nodeName)).addClass(d||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!d){g.style.visibility="hidden"}return g},update:function(g,h){if(d&&!f.forcePlaceholderSize){return}if(!h.height()){h.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10))}if(!h.width()){h.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}}}}e.placeholder=b(f.placeholder.element.call(e.element,e.currentItem));e.currentItem.after(e.placeholder);f.placeholder.update(e,e.placeholder)},_contactContainers:function(d){var k,g,n,l,m,p,e,q,h,f=null,o=null;for(k=this.containers.length-1;k>=0;k--){if(b.contains(this.currentItem[0],this.containers[k].element[0])){continue}if(this._intersectsWith(this.containers[k].containerCache)){if(f&&b.contains(this.containers[k].element[0],f.element[0])){continue}f=this.containers[k];o=k}else{if(this.containers[k].containerCache.over){this.containers[k]._trigger("out",d,this._uiHash(this));this.containers[k].containerCache.over=0}}}if(!f){return}if(this.containers.length===1){this.containers[o]._trigger("over",d,this._uiHash(this));this.containers[o].containerCache.over=1}else{n=10000;l=null;m=this.containers[o].floating?"left":"top";p=this.containers[o].floating?"width":"height";e=this.positionAbs[m]+this.offset.click[m];for(g=this.items.length-1;g>=0;g--){if(!b.contains(this.containers[o].element[0],this.items[g].item[0])){continue}if(this.items[g].item[0]===this.currentItem[0]){continue}q=this.items[g].item.offset()[m];h=false;if(Math.abs(q-e)>Math.abs(q+this.items[g][p]-e)){h=true;q+=this.items[g][p]}if(Math.abs(q-e)<n){n=Math.abs(q-e);l=this.items[g];this.direction=h?"up":"down"}}if(!l&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[o];l?this._rearrange(d,l,null,true):this._rearrange(d,null,this.containers[o].element,true);this._trigger("change",d,this._uiHash());this.containers[o]._trigger("change",d,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[o]._trigger("over",d,this._uiHash(this));this.containers[o].containerCache.over=1}},_createHelper:function(e){var f=this.options,d=b.isFunction(f.helper)?b(f.helper.apply(this.element[0],[e,this.currentItem])):(f.helper==="clone"?this.currentItem.clone():this.currentItem);if(!d.parents("body").length){b(f.appendTo!=="parent"?f.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0])}if(d[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!d[0].style.width||f.forceHelperSize){d.width(this.currentItem.width())}if(!d[0].style.height||f.forceHelperSize){d.height(this.currentItem.height())}return d},_adjustOffsetFromHelper:function(d){if(typeof d==="string"){d=d.split(" ")}if(b.isArray(d)){d={left:+d[0],top:+d[1]||0}}if("left" in d){this.offset.click.left=d.left+this.margins.left}if("right" in d){this.offset.click.left=this.helperProportions.width-d.right+this.margins.left}if("top" in d){this.offset.click.top=d.top+this.margins.top}if("bottom" in d){this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===document.body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&b.ui.ie)){d={top:0,left:0}}return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var d=this.currentItem.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,g,d,f=this.options;if(f.containment==="parent"){f.containment=this.helper[0].parentNode}if(f.containment==="document"||f.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b(f.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b(f.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(f.containment)){e=b(f.containment)[0];g=b(f.containment).offset();d=(b(e).css("overflow")!=="hidden");this.containment=[g.left+(parseInt(b(e).css("borderLeftWidth"),10)||0)+(parseInt(b(e).css("paddingLeft"),10)||0)-this.margins.left,g.top+(parseInt(b(e).css("borderTopWidth"),10)||0)+(parseInt(b(e).css("paddingTop"),10)||0)-this.margins.top,g.left+(d?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(b(e).css("borderLeftWidth"),10)||0)-(parseInt(b(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,g.top+(d?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(b(e).css("borderTopWidth"),10)||0)-(parseInt(b(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(g,i){if(!i){i=this.position}var f=g==="absolute"?1:-1,e=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(e[0].tagName);return{top:(i.top+this.offset.relative.top*f+this.offset.parent.top*f-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(h?0:e.scrollTop()))*f)),left:(i.left+this.offset.relative.left*f+this.offset.parent.left*f-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():h?0:e.scrollLeft())*f))}},_generatePosition:function(g){var i,h,j=this.options,f=g.pageX,e=g.pageY,d=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,k=(/(html|body)/i).test(d[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(g.pageX-this.offset.click.left<this.containment[0]){f=this.containment[0]+this.offset.click.left}if(g.pageY-this.offset.click.top<this.containment[1]){e=this.containment[1]+this.offset.click.top}if(g.pageX-this.offset.click.left>this.containment[2]){f=this.containment[2]+this.offset.click.left}if(g.pageY-this.offset.click.top>this.containment[3]){e=this.containment[3]+this.offset.click.top}}if(j.grid){i=this.originalPageY+Math.round((e-this.originalPageY)/j.grid[1])*j.grid[1];e=this.containment?((i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3])?i:((i-this.offset.click.top>=this.containment[1])?i-j.grid[1]:i+j.grid[1])):i;h=this.originalPageX+Math.round((f-this.originalPageX)/j.grid[0])*j.grid[0];f=this.containment?((h-this.offset.click.left>=this.containment[0]&&h-this.offset.click.left<=this.containment[2])?h:((h-this.offset.click.left>=this.containment[0])?h-j.grid[0]:h+j.grid[0])):h}}return{top:(e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(k?0:d.scrollTop())))),left:(f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():k?0:d.scrollLeft())))}},_rearrange:function(h,g,e,f){e?e[0].appendChild(this.placeholder[0]):g.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?g.item[0]:g.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var d=this.counter;this._delay(function(){if(d===this.counter){this.refreshPositions(!f)}})},_clear:function(e,f){this.reverting=false;var d,g=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(d in this._storedCSS){if(this._storedCSS[d]==="auto"||this._storedCSS[d]==="static"){this._storedCSS[d]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!f){g.push(function(h){this._trigger("receive",h,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!f){g.push(function(h){this._trigger("update",h,this._uiHash())})}if(this!==this.currentContainer){if(!f){g.push(function(h){this._trigger("remove",h,this._uiHash())});g.push((function(h){return function(i){h._trigger("receive",i,this._uiHash(this))}}).call(this,this.currentContainer));g.push((function(h){return function(i){h._trigger("update",i,this._uiHash(this))}}).call(this,this.currentContainer))}}for(d=this.containers.length-1;d>=0;d--){if(!f){g.push((function(h){return function(i){h._trigger("deactivate",i,this._uiHash(this))}}).call(this,this.containers[d]))}if(this.containers[d].containerCache.over){g.push((function(h){return function(i){h._trigger("out",i,this._uiHash(this))}}).call(this,this.containers[d]));this.containers[d].containerCache.over=0}}if(this._storedCursor){b("body").css("cursor",this._storedCursor)}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!f){this._trigger("beforeStop",e,this._uiHash());for(d=0;d<g.length;d++){g[d].call(this,e)}this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return false}if(!f){this._trigger("beforeStop",e,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null;if(!f){for(d=0;d<g.length;d++){g[d].call(this,e)}this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if(b.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(d){var e=d||this;return{helper:e.helper,placeholder:e.placeholder||b([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:d?d.element:null}}})})(jQuery);
/*!
 * jQuery UI Effects 1.10.0
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/effects-core/
 */
(jQuery.effects||(function(a,c){var b="ui-effects-";a.effects={effect:{}};
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
(function(r,g){var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",k=/^([\-+])=\s*(\d+\.?\d*)/,j=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(s){return[s[1],s[2],s[3],s[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(s){return[s[1]*2.55,s[2]*2.55,s[3]*2.55,s[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(s){return[parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(s){return[parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(s){return[s[1],s[2]/100,s[3]/100,s[4]]}}],h=r.Color=function(t,u,s,v){return new r.Color.fn.parse(t,u,s,v)},m={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},q={"byte":{floor:true,max:255},percent:{max:1},degrees:{mod:360,floor:true}},p=h.support={},e=r("<p>")[0],d,o=r.each;e.style.cssText="background-color:rgba(1,1,1,.5)";p.rgba=e.style.backgroundColor.indexOf("rgba")>-1;o(m,function(s,t){t.cache="_"+s;t.props.alpha={idx:3,type:"percent",def:1}});function l(t,v,u){var s=q[v.type]||{};if(t==null){return(u||!v.def)?null:v.def}t=s.floor?~~t:parseFloat(t);if(isNaN(t)){return v.def}if(s.mod){return(t+s.mod)%s.mod}return 0>t?0:s.max<t?s.max:t}function i(s){var u=h(),t=u._rgba=[];s=s.toLowerCase();o(j,function(z,A){var x,y=A.re.exec(s),w=y&&A.parse(y),v=A.space||"rgba";if(w){x=u[v](w);u[m[v].cache]=x[m[v].cache];t=u._rgba=x._rgba;return false}});if(t.length){if(t.join()==="0,0,0,0"){r.extend(t,d.transparent)}return u}return d[s]}h.fn=r.extend(h.prototype,{parse:function(y,w,s,x){if(y===g){this._rgba=[null,null,null,null];return this}if(y.jquery||y.nodeType){y=r(y).css(w);w=g}var v=this,u=r.type(y),t=this._rgba=[];if(w!==g){y=[y,w,s,x];u="array"}if(u==="string"){return this.parse(i(y)||d._default)}if(u==="array"){o(m.rgba.props,function(z,A){t[A.idx]=l(y[A.idx],A)});return this}if(u==="object"){if(y instanceof h){o(m,function(z,A){if(y[A.cache]){v[A.cache]=y[A.cache].slice()}})}else{o(m,function(A,B){var z=B.cache;o(B.props,function(C,D){if(!v[z]&&B.to){if(C==="alpha"||y[C]==null){return}v[z]=B.to(v._rgba)}v[z][D.idx]=l(y[C],D,true)});if(v[z]&&r.inArray(null,v[z].slice(0,3))<0){v[z][3]=1;if(B.from){v._rgba=B.from(v[z])}}})}return this}},is:function(u){var s=h(u),v=true,t=this;o(m,function(w,y){var z,x=s[y.cache];if(x){z=t[y.cache]||y.to&&y.to(t._rgba)||[];o(y.props,function(A,B){if(x[B.idx]!=null){v=(x[B.idx]===z[B.idx]);return v}})}return v});return v},_space:function(){var s=[],t=this;o(m,function(u,v){if(t[v.cache]){s.push(u)}});return s.pop()},transition:function(t,z){var u=h(t),v=u._space(),w=m[v],x=this.alpha()===0?h("transparent"):this,y=x[w.cache]||w.to(x._rgba),s=y.slice();u=u[w.cache];o(w.props,function(D,F){var C=F.idx,B=y[C],A=u[C],E=q[F.type]||{};if(A===null){return}if(B===null){s[C]=A}else{if(E.mod){if(A-B>E.mod/2){B+=E.mod}else{if(B-A>E.mod/2){B-=E.mod}}}s[C]=l((A-B)*z+B,F)}});return this[v](s)},blend:function(v){if(this._rgba[3]===1){return this}var u=this._rgba.slice(),t=u.pop(),s=h(v)._rgba;return h(r.map(u,function(w,x){return(1-t)*s[x]+t*w}))},toRgbaString:function(){var t="rgba(",s=r.map(this._rgba,function(u,w){return u==null?(w>2?1:0):u});if(s[3]===1){s.pop();t="rgb("}return t+s.join()+")"},toHslaString:function(){var t="hsla(",s=r.map(this.hsla(),function(u,w){if(u==null){u=w>2?1:0}if(w&&w<3){u=Math.round(u*100)+"%"}return u});if(s[3]===1){s.pop();t="hsl("}return t+s.join()+")"},toHexString:function(s){var t=this._rgba.slice(),u=t.pop();if(s){t.push(~~(u*255))}return"#"+r.map(t,function(w){w=(w||0).toString(16);return w.length===1?"0"+w:w}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});h.fn.parse.prototype=h.fn;function f(u,t,s){s=(s+1)%1;if(s*6<1){return u+(t-u)*s*6}if(s*2<1){return t}if(s*3<2){return u+(t-u)*((2/3)-s)*6}return u}m.hsla.to=function(v){if(v[0]==null||v[1]==null||v[2]==null){return[null,null,null,v[3]]}var t=v[0]/255,y=v[1]/255,z=v[2]/255,B=v[3],A=Math.max(t,y,z),w=Math.min(t,y,z),C=A-w,D=A+w,u=D*0.5,x,E;if(w===A){x=0}else{if(t===A){x=(60*(y-z)/C)+360}else{if(y===A){x=(60*(z-t)/C)+120}else{x=(60*(t-y)/C)+240}}}if(C===0){E=0}else{if(u<=0.5){E=C/D}else{E=C/(2-D)}}return[Math.round(x)%360,E,u,B==null?1:B]};m.hsla.from=function(x){if(x[0]==null||x[1]==null||x[2]==null){return[null,null,null,x[3]]}var w=x[0]/360,v=x[1],u=x[2],t=x[3],y=u<=0.5?u*(1+v):u+v-u*v,z=2*u-y;return[Math.round(f(z,y,w+(1/3))*255),Math.round(f(z,y,w)*255),Math.round(f(z,y,w-(1/3))*255),t]};o(m,function(t,v){var u=v.props,s=v.cache,x=v.to,w=v.from;h.fn[t]=function(C){if(x&&!this[s]){this[s]=x(this._rgba)}if(C===g){return this[s].slice()}var z,B=r.type(C),y=(B==="array"||B==="object")?C:arguments,A=this[s].slice();o(u,function(D,F){var E=y[B==="object"?D:F.idx];if(E==null){E=A[F.idx]}A[F.idx]=l(E,F)});if(w){z=h(w(A));z[s]=A;return z}else{return h(A)}};o(u,function(y,z){if(h.fn[y]){return}h.fn[y]=function(D){var F=r.type(D),C=(y==="alpha"?(this._hsla?"hsla":"rgba"):t),B=this[C](),E=B[z.idx],A;if(F==="undefined"){return E}if(F==="function"){D=D.call(this,E);F=r.type(D)}if(D==null&&z.empty){return this}if(F==="string"){A=k.exec(D);if(A){D=E+parseFloat(A[2])*(A[1]==="+"?1:-1)}}B[z.idx]=D;return this[C](B)}})});h.hook=function(t){var s=t.split(" ");o(s,function(u,v){r.cssHooks[v]={set:function(z,A){var x,y,w="";if(A!=="transparent"&&(r.type(A)!=="string"||(x=i(A)))){A=h(x||A);if(!p.rgba&&A._rgba[3]!==1){y=v==="backgroundColor"?z.parentNode:z;while((w===""||w==="transparent")&&y&&y.style){try{w=r.css(y,"backgroundColor");y=y.parentNode}catch(B){}}A=A.blend(w&&w!=="transparent"?w:"_default")}A=A.toRgbaString()}try{z.style[v]=A}catch(B){}}};r.fx.step[v]=function(w){if(!w.colorInit){w.start=h(w.elem,v);w.end=h(w.end);w.colorInit=true}r.cssHooks[v].set(w.elem,w.start.transition(w.end,w.pos))}})};h.hook(n);r.cssHooks.borderColor={expand:function(t){var s={};o(["Top","Right","Bottom","Left"],function(v,u){s["border"+u+"Color"]=t});return s}};d=r.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){var e=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(h,i){a.fx.step[i]=function(j){if(j.end!=="none"&&!j.setAttr||j.pos===1&&!j.setAttr){jQuery.style(j.elem,i,j.end);j.setAttr=true}}});function g(l){var i,h,j=l.ownerDocument.defaultView?l.ownerDocument.defaultView.getComputedStyle(l,null):l.currentStyle,k={};if(j&&j.length&&j[0]&&j[j[0]]){h=j.length;while(h--){i=j[h];if(typeof j[i]==="string"){k[a.camelCase(i)]=j[i]}}}else{for(i in j){if(typeof j[i]==="string"){k[i]=j[i]}}}return k}function d(h,j){var l={},i,k;for(i in j){k=j[i];if(h[i]!==k){if(!f[i]){if(a.fx.step[i]||!isNaN(parseFloat(k))){l[i]=k}}}}return l}if(!a.fn.addBack){a.fn.addBack=function(h){return this.add(h==null?this.prevObject:this.prevObject.filter(h))}}a.effects.animateClass=function(h,i,l,k){var j=a.speed(i,l,k);return this.queue(function(){var o=a(this),m=o.attr("class")||"",n,p=j.children?o.find("*").addBack():o;p=p.map(function(){var q=a(this);return{el:q,start:g(this)}});n=function(){a.each(e,function(q,r){if(h[r]){o[r+"Class"](h[r])}})};n();p=p.map(function(){this.end=g(this.el[0]);this.diff=d(this.start,this.end);return this});o.attr("class",m);p=p.map(function(){var s=this,q=a.Deferred(),r=a.extend({},j,{queue:false,complete:function(){q.resolve(s)}});this.el.animate(this.diff,r);return q.promise()});a.when.apply(a,p.get()).done(function(){n();a.each(arguments,function(){var q=this.el;a.each(this.diff,function(r){q.css(r,"")})});j.complete.call(o[0])})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(i,h,k,j){return h?a.effects.animateClass.call(this,{add:i},h,k,j):this._addClass(i)},_removeClass:a.fn.removeClass,removeClass:function(i,h,k,j){return h?a.effects.animateClass.call(this,{remove:i},h,k,j):this._removeClass(i)},_toggleClass:a.fn.toggleClass,toggleClass:function(j,i,h,l,k){if(typeof i==="boolean"||i===c){if(!h){return this._toggleClass(j,i)}else{return a.effects.animateClass.call(this,(i?{add:j}:{remove:j}),h,l,k)}}else{return a.effects.animateClass.call(this,{toggle:j},i,h,l)}},switchClass:function(h,j,i,l,k){return a.effects.animateClass.call(this,{add:j,remove:h},i,l,k)}})})();(function(){a.extend(a.effects,{version:"1.10.0",save:function(g,h){for(var f=0;f<h.length;f++){if(h[f]!==null){g.data(b+h[f],g[0].style[h[f]])}}},restore:function(g,j){var h,f;for(f=0;f<j.length;f++){if(j[f]!==null){h=g.data(b+j[f]);if(h===c){h=""}g.css(j[f],h)}}},setMode:function(f,g){if(g==="toggle"){g=f.is(":hidden")?"show":"hide"}return g},getBaseline:function(g,h){var i,f;switch(g[0]){case"top":i=0;break;case"middle":i=0.5;break;case"bottom":i=1;break;default:i=g[0]/h.height}switch(g[1]){case"left":f=0;break;case"center":f=0.5;break;case"right":f=1;break;default:f=g[1]/h.width}return{x:f,y:i}},createWrapper:function(g){if(g.parent().is(".ui-effects-wrapper")){return g.parent()}var h={width:g.outerWidth(true),height:g.outerHeight(true),"float":g.css("float")},k=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:g.width(),height:g.height()},j=document.activeElement;try{j.id}catch(i){j=document.body}g.wrap(k);if(g[0]===j||a.contains(g[0],j)){a(j).focus()}k=g.parent();if(g.css("position")==="static"){k.css({position:"relative"});g.css({position:"relative"})}else{a.extend(h,{position:g.css("position"),zIndex:g.css("z-index")});a.each(["top","left","bottom","right"],function(l,m){h[m]=g.css(m);if(isNaN(parseInt(h[m],10))){h[m]="auto"}});g.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}g.css(f);return k.css(h).show()},removeWrapper:function(f){var g=document.activeElement;if(f.parent().is(".ui-effects-wrapper")){f.parent().replaceWith(f);if(f[0]===g||a.contains(f[0],g)){a(g).focus()}}return f},setTransition:function(g,i,f,h){h=h||{};a.each(i,function(k,j){var l=g.cssUnit(j);if(l[0]>0){h[j]=l[0]*f+l[1]}});return h}});function d(g,f,h,i){if(a.isPlainObject(g)){f=g;g=g.effect}g={effect:g};if(f==null){f={}}if(a.isFunction(f)){i=f;h=null;f={}}if(typeof f==="number"||a.fx.speeds[f]){i=h;h=f;f={}}if(a.isFunction(h)){i=h;h=null}if(f){a.extend(g,f)}h=h||f.duration;g.duration=a.fx.off?0:typeof h==="number"?h:h in a.fx.speeds?a.fx.speeds[h]:a.fx.speeds._default;g.complete=i||f.complete;return g}function e(f){if(!f||typeof f==="number"||a.fx.speeds[f]){return true}return typeof f==="string"&&!a.effects.effect[f]}a.fn.extend({effect:function(){var h=d.apply(this,arguments),j=h.mode,f=h.queue,g=a.effects.effect[h.effect];if(a.fx.off||!g){if(j){return this[j](h.duration,h.complete)}else{return this.each(function(){if(h.complete){h.complete.call(this)}})}}function i(m){var n=a(this),l=h.complete,o=h.mode;function k(){if(a.isFunction(l)){l.call(n[0])}if(a.isFunction(m)){m()}}if(n.is(":hidden")?o==="hide":o==="show"){k()}else{g.call(n[0],h,k)}}return f===false?this.each(i):this.queue(f||"fx",i)},_show:a.fn.show,show:function(g){if(e(g)){return this._show.apply(this,arguments)}else{var f=d.apply(this,arguments);f.mode="show";return this.effect.call(this,f)}},_hide:a.fn.hide,hide:function(g){if(e(g)){return this._hide.apply(this,arguments)}else{var f=d.apply(this,arguments);f.mode="hide";return this.effect.call(this,f)}},__toggle:a.fn.toggle,toggle:function(g){if(e(g)||typeof g==="boolean"||a.isFunction(g)){return this.__toggle.apply(this,arguments)}else{var f=d.apply(this,arguments);f.mode="toggle";return this.effect.call(this,f)}},cssUnit:function(f){var g=this.css(f),h=[];a.each(["em","px","%","pt"],function(j,k){if(g.indexOf(k)>0){h=[parseFloat(g),k]}});return h}})})();(function(){var d={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(f,e){d[e]=function(g){return Math.pow(g,f+2)}});a.extend(d,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(g){var e,f=4;while(g<((e=Math.pow(2,--f))-1)/11){}return 1/Math.pow(4,3-f)-7.5625*Math.pow((e*3-2)/22-g,2)}});a.each(d,function(f,e){a.easing["easeIn"+f]=e;a.easing["easeOut"+f]=function(g){return 1-e(1-g)};a.easing["easeInOut"+f]=function(g){return g<0.5?e(g*2)/2:1-e(g*-2+2)/2}})})()})(jQuery));
/*!
 * Smooth Scroll - v1.4.10 - 2013-03-02
 * https://github.com/kswedberg/jquery-smooth-scroll
 * Copyright (c) 2013 Karl Swedberg
 * Licensed MIT (https://github.com/kswedberg/jquery-smooth-scroll/blob/master/LICENSE-MIT)
 */
(function(e){var c="1.4.10",f={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficent:2},a=function(i){var j=[],h=false,g=i.dir&&i.dir=="left"?"scrollLeft":"scrollTop";this.each(function(){if(this==document||this==window){return}var k=e(this);if(k[g]()>0){j.push(this)}else{k[g](1);h=k[g]()>0;if(h){j.push(this)}k[g](0)}});if(!j.length){this.each(function(k){if(this.nodeName==="BODY"){j=[this]}})}if(i.el==="first"&&j.length>1){j=[j[0]]}return j},b="ontouchend" in document;e.fn.extend({scrollable:function(g){var h=a.call(this,{dir:g});return this.pushStack(h)},firstScrollable:function(g){var h=a.call(this,{el:"first",dir:g});return this.pushStack(h)},smoothScroll:function(g){g=g||{};var h=e.extend({},e.fn.smoothScroll.defaults,g),i=e.smoothScroll.filterPath(location.pathname);this.unbind("click.smoothscroll").bind("click.smoothscroll",function(k){var s=this,r=e(this),m=h.exclude,p=h.excludeWithin,t=0,o=0,l=true,u={},n=((location.hostname===s.hostname)||!s.hostname),j=h.scrollTarget||(e.smoothScroll.filterPath(s.pathname)||i)===i,q=d(s.hash);if(!h.scrollTarget&&(!n||!j||!q)){l=false}else{while(l&&t<m.length){if(r.is(d(m[t++]))){l=false}}while(l&&o<p.length){if(r.closest(p[o++]).length){l=false}}}if(l){k.preventDefault();e.extend(u,h,{scrollTarget:h.scrollTarget||q,link:s});e.smoothScroll(u)}});return this}});e.smoothScroll=function(r,n){var g,h,q,j,p=0,k="offset",m="scrollTop",o={},l={},i=[];if(typeof r==="number"){g=e.fn.smoothScroll.defaults;q=r}else{g=e.extend({},e.fn.smoothScroll.defaults,r||{});if(g.scrollElement){k="position";if(g.scrollElement.css("position")=="static"){g.scrollElement.css("position","relative")}}}g=e.extend({link:null},g);m=g.direction=="left"?"scrollLeft":m;if(g.scrollElement){h=g.scrollElement;p=h[m]()}else{h=e("html, body").firstScrollable()}g.beforeScroll.call(h,g);q=(typeof r==="number")?r:n||(e(g.scrollTarget)[k]()&&e(g.scrollTarget)[k]()[g.direction])||0;o[m]=q+p+g.offset;j=g.speed;if(j==="auto"){j=o[m]||h.scrollTop();j=j/g.autoCoefficent}l={duration:j,easing:g.easing,complete:function(){g.afterScroll.call(g.link,g)}};if(g.step){l.step=g.step}if(h.length){h.stop().animate(o,l)}else{g.afterScroll.call(g.link,g)}};e.smoothScroll.version=c;e.smoothScroll.filterPath=function(g){return g.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")};e.fn.smoothScroll.defaults=f;function d(g){return g.replace(/(:|\.)/g,"\\$1")}})(jQuery);$(function(){$(".i-smooth-scroll a").smoothScroll()});BEM.DOM.decl("b-table",{onElemSetMod:{sort:function(b,a,c){b.nextAll(this.buildSelector("sort-arrow")).remove();if(c){b.after(BEM.HTML.build({block:"b-table",elem:"sort-arrow",content:(c=="desc")?"↓":"↑"}))}}},_readCellSort:function(a){var b=a.attr("data-sort");b===undefined&&(b=a.html());if(!isNaN(b)){b=Number(b)}return b},_cellSortDisabled:function(a){return a.attr("data-disable-sort")=="yes"}},{live:function(){this.liveBindTo("sort","click",function(f){var b=this;var a=$(f.target).closest("th");var c=a.index();var d=this.getMod($(f.target),"type");d=(d=="desc")?"asc":"desc";this.delMod(this.findElem("sort"),"type");this.setMod($(f.target),"type",d);this.domElem.find("tr:has(td)").sortElements(function(g,e){var i=$(g).find("td").eq(c);var h=$(e).find("td").eq(c);if(b._cellSortDisabled(i)){if(b._cellSortDisabled(h)){return 0}else{return 1}}if(d=="desc"){var j=i;i=h;h=j}i=b._readCellSort(i);h=b._readCellSort(h);if(i==h){return 0}else{if(i>h){return 1}else{return -1}}})});return false}});BEM.DOM.decl({block:"b-table",modName:"scrollable",modVal:"yes"},{onSetMod:{js:function(){var a=this;this.__base();this._updateWidth();$(window).resize($.proxy(this._updateWidth,this));this.domElem.delegate("td","mouseenter mouseleave",function(c){var b=$(this).closest("tr").index()+1;a.domElem.find("tr:nth-child("+b+")")[c.type=="mouseenter"?"addClass":"removeClass"]("hover")})}},_updateWidth:function(){var a=this;this.elem("container").hide();this.elem("columns").css($.browser.msie?"width":"max-width",this.domElem.parent().width());this.elem("container").show();this.elem("table").css("margin-left",this.elem("fixed-column").width()-1)}});BEM.DOM.decl("b-notif",{},{live:function(){this.liveBindTo("close","click",function(){this.domElem.hide()})}});BEM.DOM.decl("b-teaser",{onSetMod:{js:function(){$.ajax({url:"http://yabs.yandex.ru/page/181?user-group="+this.params.num+"&callback=?",dataType:"json",success:function(b){var a=b.teaser;if(!a){return}this.domElem.attr("href",a.url);this.domElem.html(BEM.HTML.build([{block:"b-teaser",elem:"img",tag:"img",attrs:{src:a.img.url,alt:a.img.alt}},{block:"b-teaser",elem:"title",content:a.title},{block:"b-teaser",elem:"text",content:a.text}]))},context:this})}}});BEM.DOM.decl("b-question",{onSetMod:{additional:function(a,b){this.findElem("tool","type","solution").html(b=="solution"?"Скрыть пояснение":"Посмотреть пояснение")}},toggleSolution:function(){this.toggleMod("additional","solution","")}});BEM.DOM.decl({block:"b-question",modName:"testing",modVal:"yes"},{onSetMod:{js:function(){var a=this;this.input=this.findBlockInside("b-form-input");this.input&&this.input.on("change",function(){a.update()});this.domElem.bind("submit",function(c){c.preventDefault();a.submit()});$(document).bind("keydown."+this._uniqId,$.proxy(this.keyDown,this));if("progress" in this.params){this.progress(this.params.progress)}if(this.params.num){if(!BEM.blocks["b-question"].notFirst){BEM.blocks["b-question"].notFirst=true;this.readQuestionFromHash()}else{if(this.params.order!=1){$.bbq.pushState({question:this.params.num})}}}$(window).bind("hashchange."+this._uniqId,$.proxy(this.readQuestionFromHash,this));var b;this.elem("map").mouseleave(function(){b=setTimeout(function(){a.elem("map").slideUp("fast")},300)}).mouseenter(function(){clearTimeout(b)});this.update();this.findBlockInside({blockName:"b-form-button",modName:"type",modVal:"skip"}).delMod("disabled");this.findBlockInside({blockName:"b-form-button",modName:"type",modVal:"answer"}).delMod("disabled")}},destruct:function(){$(window).unbind("."+this._uniqId);$(document).unbind("."+this._uniqId);this.__base()},replace:function(a){var b=$(a);this.domElem.replaceWith(b);MathJax&&MathJax.Hub.Typeset();BEM.DOM.init(b);this.destruct()},readQuestionFromHash:function(){var a=$.bbq.getState("question");if((a&&this.params.num!=a)||(!a&&this.params.order!=1&&this.params.order!==undefined)){this.domElem.children(":not(.b-question__map)").css("visibility","hidden");$.ajax({url:"/get_question_ajax/",data:{slug:this.params.slug,variant:this.params.variant,ege_num:a},type:"GET",success:this.replace,error:function(){this.domElem.append(BEM.HTML.build({block:"b-question",elem:"error",content:["Не удалось загрузить вопрос"]}))},context:this})}},keyDown:function(c){if(!$(c.target).is("input:text, input[type=password]")&&c.keyCode>48&&c.keyCode<58){var b=c.keyCode-49;var a=this.elem("choice").eq(b);if(this.hasMod(a,"selected","yes")){this.domElem.submit()}else{this.elem("choice").eq(b).click()}}},update:function(){this.delMod(this.elem("choice"),"selected");this.setMod(this.elem("radio").filter(":checked").closest(this.buildSelector("choice")),"selected","yes");this.toggleMod("answered","yes","",this.isAnswered())},submit:function(){this.domElem.css("height",this.domElem.height());this.domElem.find("*").fadeOut("fast");$.ajax({url:this.domElem.attr("action"),data:this.domElem.serialize(),type:"POST",timeout:10000,success:function(b,c,a){if(a.status==201){this.progress(100);if(b){this.domElem.css("height","");BEM.DOM.update(this.domElem,b);this.params.order=undefined;this.params.num=undefined;$.bbq.removeState("question")}else{location.href=this.params.results}}else{this.replace(b)}},error:function(){this.domElem.append(BEM.HTML.build({block:"b-question",elem:"error",content:["Не удалось загрузить следующий вопрос.",{elem:"error-try-again",content:"Попробуйте еще раз"}]}))},context:this})},isAnswered:function(){if(this.input){return Boolean($.trim(this.input.val()))}else{return this.findElem("choice","selected","yes").length>0}},appendStatus:function(c,b){var a=BEM.HTML.build({block:"b-question",elem:"status",mods:{type:b},content:[{elem:"status-icon"},c]});this.elem("answer").before(a)},displayCorrect:function(a){this.appendStatus(a,"right")},progress:function(a){var b=this.findBlockOutside("b-page").findBlockInside("b-progress-bar");b&&b.elem("i").css("width",a+"%")}},{live:function(){this.liveBindTo("radio","change",function(b){var a=$(b.target).closest(this.buildSelector("choice"));if(this.getMod(a,"type")!=""){b.preventDefault();return}this.update()});this.liveBindTo("choice","dblclick",function(){this.domElem.submit()});this.liveBindTo("tool","click",function(b){var a=this.getMod($(b.target),"type");if(a=="solution"){this.toggleSolution()}else{if(a=="giveup"){location.href=this.params.results}}});this.liveBindTo("error-try-again","click",function(){this.findElem("error").remove();this.domElem.submit()});this.liveBindTo("total","click",function(){this.elem("map").slideDown("fast")});return false}});BEM.DOM.decl({block:"b-question",modName:"type",modVal:"radio"},{displayCorrect:function(a){this.setMod(this.elem("choice").eq(a-1),"type","right")}});BEM.DOM.decl({block:"b-question",modName:"training",modVal:"yes"},{attemptsLeft:3,submit:function(a){if(a){this.attemptsLeft=1}if(this.hasMod("testing","yes")&&(a||this.hasMod("answered","yes"))){$.ajax({url:this.domElem.attr("action"),data:this.domElem.serialize(),type:"POST",dataType:"json",success:function(d){this.attemptsLeft--;var c=BEM.HTML.build({block:"b-question",elem:"attempts-left",content:"Еще "+this.attemptsLeft+$.plural(this.attemptsLeft," попытка"," попытки"," попыток")});if(this.attemptsLeft==0){c=""}if(this.hasMod("type","radio")){var b=this.findElem("choice","selected","yes");this.setMod(b,"type",d.correct?"right":"wrong");this.findElem(b,"radio").prop("checked",false).attr("disabled",1);this.update();!d.correct&&b.append(c)}else{if(!a){!d.correct&&this.appendStatus(d.answer+c,"wrong");this.doBlocksMethodInside("b-form-input","val",[""])}}var e=this.findBlockInside("b-question-map");if(d.correct){e.setMod(e.findElem("question","current","yes"),"type","right")}if(this.attemptsLeft==0&&d.correct===false){this.setMod("additional","solution");e.setMod(e.findElem("question","current","yes"),"type","wrong")}if(this.attemptsLeft==0||d.correct){this.displayCorrect(d.correct_answer);this.delMod("testing")}},error:function(){this.domElem.append(BEM.HTML.build({block:"b-question",elem:"error",content:["Произошла серверная ошибка.",{elem:"error-try-again",content:"Попробуйте еще раз"}]}))},context:this})}else{location.href=this.params.next}},toggleSolution:function(){this.__base();this.hasMod("testing","yes")&&this.submit(true)}});BEM.DOM.decl({block:"b-question",modName:"print",modVal:"yes"},{onSetMod:{js:function(){}}});BEM.DOM.decl("b-timer",{onSetMod:{js:function(){var a=this;if($.cookie("timer_hidden")){this.setMod("hidden","yes")}this.bindTo("click",function(){a.toggleMod("hidden","yes","");$.cookie("timer_hidden",a.hasMod("hidden","yes")?"yes":null,{path:"/"})});this.startTimestamp=(new Date).valueOf();this.update();this.timer=window.setInterval($.proxy(this.update,this),50)}},setSeconds:function(a){this.params.seconds=a;this.update()},update:function(){var f=(new Date).valueOf();var b=this.params.seconds*1000+(f-this.startTimestamp);var c=new Date(b);var e=c.getUTCHours(),a=c.getUTCMinutes(),d=c.getUTCSeconds();var g="";if(e){g+=e+" "+$.plural(e,"час","часа","часов")+" "}if(a){g+=a+" "+$.plural(a,"минута","минуты","минут")}if(!g){g+=d+" "+$.plural(d,"секунда","секунды","секунд")}this.elem("timer").html($.trim(g));this.domElem.attr("title",this.hasMod("hidden","yes")?"Показать таймер":"Скрыть таймер")}});BEM.DOM.decl("b-disable-button",{onSetMod:{js:function(){this.testControl=this.findBlockOutside("b-test-control");this.tests=this.testControl.findBlocksInside("b-form-button");this.orig=this.domElem.html()}}},{live:function(){this.liveBindTo("click",function(){var a=this;this.toggleMod("enable","yes");this.domElem.html(this.hasMod("enable","yes")?this.params.alter:this.orig);$.each(this.tests,function(c,b){var d=a.hasMod("enable","yes")?!b.hasMod("answer","yes"):false;b.toggleMod("disabled","yes","",d)})})}});(function(b,a){a.block["b-result"]=function(e){var c=b(this).find(".b-result__trigger .b-pseudo-link"),d=b(this).find(".b-result__helptext");c.click(function(){c.toggle();d.toggle()});b(this).delegate(".b-result__book-chapters","click",function(f){b(this).closest(".b-result").find(".b-result__chapters-list").toggle()})}})(jQuery,window.Lego);BEM.DOM.decl("b-book",{onSetMod:{js:function(){var a=this;this.domElem.find("p").filter(function(){return $(this).html()[0]=="$"}).addClass("b-book__formula")}}});BEM.DOM.decl("b-tool",{onSetMod:{disabled:{yes:function(){this._cover=$(BEM.HTML.build({block:"b-tool",elem:"cover"}));this._updateCoverPosition();this._cover.appendTo("body").fadeIn("fast");$(window).resize($.proxy(this._updateCoverPosition,this))}}},_updateCoverPosition:function(){this._cover.css({top:this.domElem.position().top+parseInt(this.domElem.css("margin-top")),left:this.domElem.position().left+parseInt(this.domElem.css("margin-left")),width:this.domElem.outerWidth(),height:this.domElem.outerHeight()})},isScrolledIntoView:function(c){var e=$(window).scrollTop();var d=e+$(window).height();var a=$(c).offset().top;var b=a+$(c).height();return((b<=d)&&(a>=e))}});BEM.DOM.decl({block:"b-tool",modName:"type",modVal:"distribute"},{onSetMod:{js:function(){var a=this;this.domElem.css("height",this.domElem.height());this.elem("group").sortable({connectWith:this.elem("cards").add(this.elem("group")),stop:$.proxy(this.sorted,this)});this.elem("cards").sortable({connectWith:this.elem("group"),stop:$.proxy(this.sorted,this)});$(document).bind("keypress."+this._uniqId,$.proxy(this._keyPress,this))},disabled:{yes:function(){this.__base();$(document).unbind("keypress."+this._uniqId)}}},sorted:function(){var a=this;this.delMod(this.elem("card"),"focus");this.setMod(this.findElem(this.elem("cards"),"card").eq(0),"focus","yes");if(!this.findElem(this.elem("cards"),"card").length){this.findElem("card").each(function(){var b=$(this);a.setMod(b,"type",b.attr("data-group")==b.parent().attr("data-group")?"right":"wrong")});a.findElem("card","type","wrong").appendTo(a.elem("cards")).length&&a.sorted();if(this.findElem("card","type","wrong").length){this.elem("card").removeClass("b-tool__card_type_right","slow").removeClass("b-tool__card_type_wrong","slow")}else{this.setMod("disabled","yes")}}},_keyPress:function(b){var a=this.findElem("card","focus","yes");if(!this.isScrolledIntoView(a)){return}if(b.keyCode==37){a.appendTo(this.elem("group").eq(0));this.sorted();b.stopImmediatePropagation()}else{if(b.keyCode==39){a.appendTo(this.elem("group").eq(1));this.sorted();b.stopImmediatePropagation()}}}});BEM.DOM.decl("b-access-edit",{onSetMod:{js:function(){var a=this;this.users=this.findBlockInside("b-user-list");this.submit=this.findBlockInside("b-form-button");this.bindTo("form","submit",function(b){a.elem("error").hide();a.submit.setMod("disabled","yes");$.ajax({url:"/stats/add_viewer/",type:"POST",data:this.elem("form").serialize(),success:function(c){a.users.domElem.append(c)[0].scrollTop=a.users.domElem[0].scrollHeight;a.elem("form").get(0).reset();a.updateState()},error:function(c){var d=c.responseText;if(c.status>499&&c.status<600){d="Ошибка сервера. Попробуйте позднее."}a.elem("error").html(d).show()},complete:function(){a.submit.delMod("disabled")}});b.preventDefault()});this.users&&this.users.on("remove-user",function(c,b){$.ajax({url:"/stats/remove_viewer/",type:"POST",data:{login:b.login,subject:"all"},success:function(){b.user.remove();a.updateState()},error:function(){}});a.updateState()})}},updateState:function(){this.toggleMod("state","empty","full",this.users.isEmpty())}},{live:function(){this.liveBindTo("show-domik","click",function(){this.findBlockOutside("b-popupa").hide();Lego.block["b-domik_type_popup"].login()})}});BEM.DOM.decl("b-user-list",{onSetMod:{js:function(){var b=this;var a=this.buildSelector("user");this.domElem.delegate(this.buildSelector("remove"),"click",function(d){var c=$(d.target).closest(a);b.trigger("remove-user",{user:c,login:c.attr("data-login")})})}},isEmpty:function(){return this.domElem.is(":empty")}},{live:function(){}});BEM.DOM.decl({block:"b-form-button",modName:"type",modVal:"access"},{onSetMod:{js:function(){this.__base();var a=this;this.domElem.bind("leftclick",function(){a.getPopup().toggle(a.domElem)})}},getPopup:function(){if(!this._popup){this._popup=$(BEM.HTML.build({block:"b-popupa",mods:{theme:"ffffff",padding:"m"},content:[{elem:"tail"},{elem:"content"}]})).bem("b-popupa");this.findBlockOutside("b-page").findBlockInside("b-access-edit").domElem.show().appendTo(this._popup.elem("content"))}return this._popup}});BEM.DOM.decl("b-abstract-switcher",{},{live:function(){this.liveBindTo("switcher","click",function(){this.elem("switchable").toggle();$(window).resize()})}});BEM.DOM.decl("b-group-manager",{onSetMod:{js:function(){var a=this;this.domElem.find(".b-user-list__user").draggable({helper:function(c){a.findBlockInside($(c.target).closest(".b-user-list__user"),"b-form-checkbox").setMod("checked","yes");var b=a.getSelectedUsers().length;return BEM.HTML.build({block:"b-group-manager",elem:"helper",content:b+" "+$.plural(b,"ученик","ученика","учеников")})},cursorAt:{left:0,top:0},start:function(){if(a.hasMod("loading","yes")){return false}a.setMod("dragging","yes")},stop:function(){a.delMod("dragging")}});this._makeDroppable(this.findElem("group"));this.elem("add-group-form").ajaxForm({clearForm:true,dataType:"json",beforeSubmit:function(){a.elem("error").hide()},error:function(b){a.elem("error").html(b.responseText).show()},success:function(b){var c=$(b.itemHtml);a.findElem("group").last().after(c);a._makeDroppable(c);a.findElem("group-view").last().after(b.viewHtml)}})}},_makeDroppable:function(a){var b=this;a.droppable({tolerance:"pointer",activeClass:this.buildSelector("group","hl","yes").substr(1),hoverClass:this.buildSelector("group","hover","yes").substr(1),drop:function(g){var f=$(g.target);if(b.hasMod(f,"current","yes")){return}b.setMod("loading","yes");var c=f.attr("data-id");var d=b.findElem("group-view","shown","yes");var h=b.getSelectedUsers();d.find("input[name=group_id]").val(c);$.ajax({url:"/move_students/",type:"post",data:d.serialize(),success:function(e){var i=b.findBlockInside(b.findElem("group-view").filter("[data-id="+c+"]"),"b-user-list");h.appendTo(i.domElem);i.doBlocksMethodInside("b-form-checkbox","delMod",["checked"]);b.elem("group-list").html(e);b._makeDroppable(b.findElem("group"));b._updateCurrentGroup();b.delMod("loading")}})}})},_updateCurrentGroup:function(){var a=this.findElem("group-view","shown","yes").attr("data-id");this.delMod(this.findElem("group"),"current");this.setMod(this.findElem("group").filter("[data-id="+a+"]"),"current","yes")},getSelectedUsers:function(){return this.findElem("group-view","shown","yes").find("input[type=checkbox]:checked").closest(".b-user-list__user")}},{live:function(){this.liveBindTo("group","click",function(b){var a=$(b.target).closest(this.buildSelector("group"));var c=a.attr("data-id");this.delMod(this.findElem("group-view"),"shown");this.setMod(this.findElem("group-view").filter("[data-id="+c+"]"),"shown","yes");this._updateCurrentGroup()});this.liveBindTo("group","dblclick",function(b){var a=$(b.target).closest(this.buildSelector("group"));this.delMod(this.findElem("group"),"edit");this.setMod(a,"edit","yes");this.findBlockInside(a,"b-form-input").setMod("focused","yes")});this.liveBindTo("group-edit","keypress",function(b){var a=$(b.target).closest(this.buildSelector("group"));if(b.keyCode==27){this.delMod(a,"edit")}});this.liveBindTo("group","submit",function(d){var a=this;var c=$(d.target);var f=c.find("input[name=name]").val();var b=c.find("input[name=group_id]").val();c.ajaxSubmit({success:function(e){var h=$(e);c.replaceWith(h);BEM.DOM.init(h);var g=a.findElem("group-view").filter("[data-id="+b+"]");a.findElem(g,"group-title").html(f);a._updateCurrentGroup()}});d.preventDefault()})}});BEM.DOM.decl("i-show-domik",{},{live:function(){this.liveBindTo("submit",function(a){Lego.block["b-domik_type_popup"].login();a.preventDefault()})}});BEM.DOM.decl("b-print-form",{onSetMod:{js:function(){var b=this;var a={};this.findBlockInside({blockName:"b-form-button",modName:"role",modVal:"print"}).on("click",function(d){window.print&&print()});function c(d){b.findBlockOutside("b-page").elem("print").html(d);MathJax&&MathJax.Hub.Typeset()}this.domElem.find("input, select").change(function(){var d=b.domElem.serialize();if(a[d]){c(a[d])}else{b.domElem.ajaxSubmit({success:function(e){c(e);a[d]=e}})}})}}});BEM.DOM.decl("b-cut",{},{live:function(){this.liveBindTo("switcher","click",function(){this.toggleMod("state","open","")})}});(function(b,a){a.block["b-brain"]=function(d){var c=b(this);c.hover(function(){c.find(".b-brain__portret").toggleClass("b-brain__portret_state_hover")},function(){c.find(".b-brain__portret").toggleClass("b-brain__portret_state_hover")});c.find(".b-brain__portret__c, .b-brain__link").click(function(){c.find(".b-brain__portret").addClass("b-brain__portret_state_active")})}})(jQuery,window.Lego);BEM.DOM.decl({block:"b-test-control",modName:"type",modVal:"solve"},{onSetMod:{js:function(){var b=this,a=this.elem("group","hover","yes");this.bindTo(a,"mouseover mouseout",function(d){var c=d.data.domElem;this.toggleMod(c,"type","dark","light")})}}});(function(b,a){a.block["b-form"]=function(h){form=b(this);if(form.hasClass("b-form_type_answer")){var i=form.find(".b-form-button_type_submit");var l=form.find(".b-form-button_type_submit input");if(i.length==0){return true}function e(){i.bem("b-form-button").delMod("disabled")}function j(){i.bem("b-form-button").setMod("disabled","yes")}var m=form.find(".b-form-input_type_answer input");if(m.length){function g(){if(m.val()){e()}else{j()}}g();m.blur(g);m.change(g);m.mouseup(g);m.keyup(g);m.bind("paste",function(n){setTimeout(g,100)})}var c=form.find(".b-form-input_type_multy input");if(c.length){function d(){multival=c.map(function(n,o){return o.value}).get().join("");if(multival){e()}else{j()}}d();c.blur(d);c.change(d);c.mouseup(d);c.keyup(d);c.bind("paste",function(n){setTimeout(d,100)})}var k=form.find(".b-test-control__group_type_light input.b-radio");if(k.length){if(form.find(".b-test-control__group_state_active").length){e()}var f=form.find(".b-test-control__group_type_light");f.click(function(){f.removeClass("b-test-control__group_state_active");f.find(".b-radio").removeAttr("checked");f.find(".b-form-button").removeClass("b-form-button_state_grey-19-pressed");if(b(this).find(".b-form-button").hasClass("b-form-button_disabled_yes")==false){b(this).addClass("b-test-control__group_state_active");b(this).find(".b-form-button").addClass("b-form-button_state_grey-19-pressed");b(this).find(".b-radio").attr("checked","checked");e()}else{j()}})}}}})(jQuery,window.Lego);(function(c,a){var b=[];c(document).ready(function(){c("a, .b-pseudo-link, input").each(function(){var d=c(this),g=d.offset(),e=g.left,f=g.top;b.push({node:d,x0:e,y0:f,x1:e+d.width(),y1:f+d.height()})})});a.block["b-tools"]=function(h){c('<div class="b-inctrument" style="display:none;"><div class="b-canvas"></div><div class="b-mark"></div></div>').appendTo("body");c('<div class="b-tooltip-for-protractor"><span></span></div>').appendTo("body");var e=c(".b-inctrument");var f=(function(l){var B=l.lineSrc;var j=l.$node,p=j.find(".b-mark"),v=j.find(".b-canvas")[0],i=false,q,o,k,u,w=false,n=0,m=0,z=125-20+21,t=10,A=c(".b-tooltip-for-protractor");j.mousedown(function(x){if(j.hasClass("b-inctrument_mode_protractor")){i=true;q=x.pageX;o=x.pageY;k=parseInt(j.css("left"),10)||0;u=parseInt(j.css("top"),10)||0;x.preventDefault();return false}});p.mousedown(function(x){if(j.hasClass("b-inctrument_mode_protractor")){w=true;n=j.offset().left+j.width()/2-t;m=j.offset().top+j.height()/2-t;k=parseInt(j.css("left"),10)||0;u=parseInt(j.css("top"),10)||0;return false}});c(".b-tooltip-for-protractor").mousedown(function(){p.mousedown()});c(document).mousemove(function(G){if(i){j.css({left:k-q+G.pageX,top:u-o+G.pageY})}else{if(w){var D=G.pageX,E=G.pageY,x,F,y=z/Math.sqrt((D-n)*(D-n)+(E-m)*(E-m));x=y*(D-n)+n;F=y*(E-m)+m;p.css({left:x-k,top:F-u});var I;x=D-n;F=-E+m;I=Math.atan(F/x);if(x>0&&F<0){I+=2*Math.PI}else{if(x<0){I+=Math.PI}}I=Math.round(180*I/Math.PI);r(I);A.children().text(I+"°")}}if(i||w){var H=p.offset();A.css({top:p.offset().top+t,left:p.offset().left+t})}return false}).mouseup(function(){i=false;w=false});var s,C;function r(x){C.rotate(-x,true)}return{show:function(){j.addClass("b-inctrument_mode_protractor");j.removeAttr("style").css({left:350,top:450});c(".b-tooltip-for-protractor").show();p.empty().removeAttr("style");c(v).empty().removeAttr("style");n=0;m=0;s=Raphael(v,230+21*2,230+21*2);C=s.image(B,0,0,230+21*2,230+21*2);c(".b-tooltip-for-protractor").css({top:p.offset().top+t,left:p.offset().left+t}).show().children().text("0°")},hide:function(){j.removeClass("b-inctrument_mode_protractor");c(".b-tooltip-for-protractor").hide()}}})({lineSrc:"/static/img/protractor.line.png","$node":e});var g=(function(o){var K=o.lineSrc;var j=o.$node,s=j.find(".b-mark"),E=j.find(".b-canvas")[0];var i=false,t,r,n,C;j.mousedown(function(x){if(j.hasClass("b-inctrument_mode_rule")){i=true;t=x.pageX;r=x.pageY;n=parseInt(j.css("left"),10)||0;C=parseInt(j.css("top"),10)||0}});var F=0,D=0;j.click(function(y){for(var x=0;x<b.length;x++){if(y.pageX>b[x].x0&&y.pageX<b[x].x1&&y.pageY>b[x].y0&&y.pageY<b[x].y1){if(b[x].node.hasClass("b-pseudo-link")){b[x].node.click()}else{if(b[x].node.is("a")){window.location.pathname=b[x].node.attr("href")}else{if(b[x].node.is('input[type="submit"]:not([disabled])')){b[x].node.closest("form").submit()}else{b[x].node.focus()}}}return}}});c(document).mousemove(function(P){if(i){j.css({left:n-t+P.pageX,top:C-r+P.pageY})}else{if(H){var N=P.pageY,y=P.pageX,M=I/Math.sqrt((y-J)*(y-J)+(N-m)*(N-m)),x,O;x=M*(y-J)+J;O=M*(N-m)+m;F=x-J;D=O-m;p=Math.atan(D/F);if(F<0){j.css("left",n-I+2*B);p+=Math.PI;x-=4*B}else{j.css("left",n)}if(D<0){j.css("top",C-I+2*B)}else{j.css("top",C)}j.width(I+B*2).height(I+B*2);s.css({left:parseInt((I+B+z)*Math.cos(p-Math.PI*4/180)+J-j.offset().left,10)||0,top:parseInt((I+B+2*z)*Math.sin(p-Math.PI*4/180)+m-j.offset().top,10)||0});u()}}});var H=false,J,m,I=465,l=45,z=7,p=0,B=25,k=c(".l-page__center").offset().top,w=c(".b-tools").offset().top;s.css({left:parseInt((I+B+z)*Math.cos(p-Math.PI*4/180)+J-j.offset().left,10)||0,top:parseInt((I+B+2*z)*Math.sin(p-Math.PI*4/180)+m-j.offset().top,10)||0});s.mousedown(function(x){if(j.hasClass("b-inctrument_mode_rule")){H=true;J=j.offset().left;m=j.offset().top;if(F<0){J+=I-2*B}if(D<0){m+=I-2*B}n=parseInt(j.css("left"),10)||0;C=parseInt(j.css("top"),10)||0;if(F<0){n+=I-2*B}if(D<0){C+=I-2*B}return false}});c(document).mouseup(function(){H=false;i=false});var v,L,G=0,A=0,q=0;c(E).css({marginLeft:-520,marginTop:-520});function u(){L.rotate(p*180/Math.PI,true);G=p;var y=0,x=0;if(F<0){c(E).css({marginLeft:-4*B})}else{c(E).css({marginLeft:-520})}if(D<0){c(E).css({marginTop:-4*B})}else{c(E).css({marginTop:-520})}q=D;A=F}return{show:function(){j.addClass("b-inctrument_mode_rule");j.removeAttr("style").css({left:300,top:500});s.empty().removeAttr("style");c(E).empty().removeAttr("style");v=Raphael(E,1040,1040);L=v.image(K,0,0,1040,1040);c(L.node).mousedown(function(N){N.preventDefault();var M=N.pageX-j.offset().left+4*B,O=N.pageY-j.offset().top+4*B;if(M>0&&O>0&&M<j.width()+4*B&&O<j.height()+4*B){if(j.hasClass("b-inctrument_mode_rule")){i=true;M=N.pageX;O=N.pageY;n=parseInt(j.css("left"),10)||0;C=parseInt(j.css("top"),10)||0}}});G=0;A=0;q=0;J=j.offset().left;m=j.offset().top;s.css({left:parseInt((I+B+z)*Math.cos(-Math.PI*4/180),10)||0,top:parseInt((I+B+2*z)*Math.sin(-Math.PI*4/180),10)||0});c(E).css({marginLeft:-520,marginTop:-520})},hide:function(){j.removeClass("b-inctrument_mode_rule")}}})({lineSrc:"/static/img/rule.png","$node":e});var d=this;d.find(".b-menu__item .b-pseudo-link").click(function(){var i=c(this);if(i.hasClass("b-pseudo-link_type_protractor")){g.hide();if(!e.is(":visible")){f.show()}else{f.hide()}}else{f.hide();if(!e.is(":visible")){g.show()}else{g.hide()}}})}})(jQuery,window.Lego);